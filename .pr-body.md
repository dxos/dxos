## Summary

- **Split topology vs content subscriptions in Tree**: The tree model exposes `childIds` (topology only) and `item`/`itemProps` (content). Parents subscribe to child IDs; each node subscribes to its own content. When a node label/icon changes, only that TreeItem re-renders — not its parent or siblings.
- **Batch graph builder connector updates**: Dirty connectors are coalesced via `main-thread-scheduling` and flushed in a single `Atom.batch`, reducing cascading re-renders from rapid graph mutations.
- **Deferred node expansion**: Graph uses `EXPAND_KEY_SEPARATOR` and defers expansion work so nav tree open/close and layout stay responsive.
- **NavTree refactor**: `useNavTreeModel` builds the atom-based Tree model from the graph (item props + child IDs). New hooks: `useFilteredItems`, `useLoadDescendents`, `useActions`, `useNavTreeState`. `onItemHover` callback for hover-driven expansion. Container and types streamlined.
- **react-ui-list Tree**: Requires `useChildIds` + `useItem` (from model); `useItems` removed. Tree context stabilized via prop refs.
- **plugin-space**: Fix stale closure and falsy cache miss in util caches; reorganize `util.tsx` sections.
- **plugin-graph**: Add `useEdges` for topology-only subscription.

## Changes

| Area | Change |
|------|--------|
| **app-graph** | Dirty-flag batching with `main-thread-scheduling`; `EXPAND_KEY_SEPARATOR`; deferred expansion and state handling; tests updated for async flush. |
| **plugin-graph** | `useEdges` hook for topology-only subscription in `useNode.ts`. |
| **react-ui-list** | `TreeContext`: model provides `childIds` + `item`/`itemProps`. `TreeItem`: uses model; children via `TreeItemById`. `Tree.tsx`: consumes model. `useItems` removed. |
| **plugin-navtree** | `useNavTreeModel` (atom families for item props + child IDs); `useFilteredItems`, `useLoadDescendents`, `useActions`, `useNavTreeState`; `NavTreeContainer` streamlined; `onItemHover`; types in `components/types.ts`; container/component layout and index updates. |
| **plugin-space** | Cache fixes in `util.tsx`; `util.tsx` reorganized into logical sections. |
| **Playwright** | Object creation and test updates for consistency. |

## Test plan

- [x] `moon run app-graph:test` — passes
- [x] `moon run react-ui-list:test` — passes
- [x] Type checks for `react-ui-list`, `plugin-navtree`, `plugin-graph`, `app-graph`
- [ ] Manual: open Composer dev, verify nav tree renders with correct indentation
- [ ] Manual: verify changing a document title only re-renders that TreeItem (React profiler)
- [ ] Manual: verify drag-and-drop and hover expansion in nav tree
