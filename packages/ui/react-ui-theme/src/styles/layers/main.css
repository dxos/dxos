/* Main component classes */

@layer utilities {

  .ch-main-content-padding {
    @apply pis-0 scroll-ps-0 pie-0 scroll-pe-0;

    @media (min-width: theme('screens.lg')) {
      &[data-sidebar-inline-start-state="open"] {
        @apply pis-[--nav-sidebar-size] scroll-ps-[--nav-sidebar-size];
      }

      &[data-sidebar-inline-end-state="open"] {
        @apply pie-[--complementary-sidebar-size] scroll-pe-[--complementary-sidebar-size];
      }
    }
  }

  .ch-main-content-padding-transitions {
    transition-property: padding-inline-start, padding-inline-end, scroll-padding-start, scroll-padding-end;
    @apply duration-200 ease-in-out-symmetric;
  }

  .ch-main-intrinsic-size {
    @apply is-dvw transition-[inline-size] ease-in-out-symmetric duration-200;

    @media (min-width: theme('screens.lg')) {
      &[data-sidebar-inline-start-state="open"] {
        @apply is-[calc(100dvw-var(--nav-sidebar-size))];
      }

      &[data-sidebar-inline-end-state="open"] {
        @apply is-[calc(100dvw-var(--complementary-sidebar-size))];
      }

      &[data-sidebar-inline-start-state="open"][data-sidebar-inline-end-state="open"] {
        @apply is-[calc(100dvw-var(--nav-sidebar-size)-var(--complementary-sidebar-size))];
      }
    }
  }

  .ch-main-bounce-layout {
    @apply fixed inset-0 z-0 overflow-auto overscroll-auto
  }

}

@layer components {

  .ch-main-sidebar {
    transition-property: inset-inline-start, inset-inline-end;
    @apply fixed block-start-0 block-end-0 is-[100vw] z-[7] overscroll-contain overflow-x-hidden overflow-y-auto;
    @apply duration-200 ease-in-out-symmetric;
    @apply border-is border-ie lg:border-none border-separator;
    @apply base-surface md:fixed-surface backdrop-blur-md dark:backdrop-blur-lg;

    &[data-resizing="false"] {
      @apply duration-200;
    }

    &[data-side="is"] {
      @apply z-[8] -inline-start-[100vw] border-ie border-separator;

      &[data-state="open"] {
        @apply inline-start-0;
      }

      @media (min-width: theme('screens.sm')) {
        @apply is-[--nav-sidebar-size] -inline-start-[--nav-sidebar-size];
      }
    }

    &[data-side="ie"] {
      @apply -inline-end-[100vw] border-is border-separator;

      &[data-state="open"] {
        @apply inline-end-0;
      }

      @media (min-width: theme('screens.sm')) {
        @apply is-[--complementary-sidebar-size] -inline-end-[--complementary-sidebar-size];
      }
    }
  }

  .ch-main-overlay {
    @apply fixed inset-0 z-[6] bg-scrim;
    @apply transition-opacity duration-200 ease-in-out-symmetric;
    @apply opacity-0 hidden;

    &[data-state="open"] {
      @apply opacity-100 block;

      @media (min-width: theme('screens.lg')) {
        @apply opacity-100 hidden;
      }
    }
  }
}
