/**
 * Tokens
 */

@theme {
  /* Surfaces */

  --color-base-surface: light-dark(theme(colors.white), theme(colors.neutral.900));
  --color-base-text: light-dark(theme(colors.black), theme(colors.neutral.50));

  --color-header-surface: light-dark(theme(colors.white), theme(colors.neutral.900));

  --color-hover-surface: light-dark(theme(colors.neutral.100), theme(colors.neutral.800));
  --color-hover-surface-group: light-dark(theme(colors.neutral.100), theme(colors.neutral.700));

  --color-input-surface: light-dark(theme(colors.neutral.100), theme(colors.neutral.800));
  --color-input-surface-group: light-dark(theme(colors.neutral.100), theme(colors.neutral.700));

  --color-inverse-surface: light-dark(theme(colors.neutral.900), theme(colors.white));
  --color-inverse-surface-text: light-dark(theme(colors.neutral.50), theme(colors.black));

  --color-active-surface: light-dark(theme(colors.neutral.100), theme(colors.neutral.800));
  --color-group-surface: light-dark(theme(colors.white), theme(colors.neutral.800));

  --color-card-surface: light-dark(theme(colors.white), theme(colors.neutral.900));
  --color-modal-surface: light-dark(theme(colors.white), theme(colors.neutral.800));

  --color-attention: light-dark(theme(colors.white), theme(colors.black));

  --color-scrim-surface: light-dark(theme(colors.neutral.50 / 0.65), theme(colors.neutral.900 / 0.65));
  --color-sidebar-surface: light-dark(theme(colors.white), theme(colors.neutral.900));
  --color-toolbar-surface: light-dark(theme(colors.white), theme(colors.neutral.900));

  --color-text-input-surface: light-dark(theme(colors.neutral.50), theme(colors.neutral.900));
  --color-text-input-surface-group: light-dark(theme(colors.neutral.50), theme(colors.neutral.700));

  --color-deck-surface: light-dark(theme(colors.neutral.50), theme(colors.neutral.950));

  --color-focus-line: 2px;
  --color-focus-surface: light-dark(theme(colors.white), theme(colors.black));
  --color-neutral-focus-indicator: light-dark(theme(colors.neutral.300), theme(colors.neutral.600));

  /* Accent */

  --color-accent-surface: theme(colors.blue.500);
  --color-accent-surface-hover: light-dark(theme(colors.blue.600), theme(colors.blue.500));
  --color-accent-surface-text: theme(colors.white);
  --color-accent-text: light-dark(theme(colors.blue.600), theme(colors.blue.400));
  --color-accent-text-hover: light-dark(theme(colors.blue.500), theme(colors.blue.400));
  --color-accent-focus-indicator: light-dark(theme(colors.blue.300), theme(colors.blue.500));

  --color-un-accent: theme(colors.neutral.400);
  --color-un-accent-hover: theme(colors.neutral.500);

  /* Separator */

  --color-separator: light-dark(theme(colors.neutral.200), theme(colors.neutral.700));
  --color-separator-group: light-dark(theme(colors.neutral.200), theme(colors.neutral.700));
  --color-subdued-separator: light-dark(theme(colors.neutral.200), theme(colors.neutral.700));

  /* Scrollbar */

  --color-scrollbar-thumb: light-dark(theme(colors.neutral.200), theme(colors.neutral.700));
  --color-scrollbar-thumb-active: light-dark(theme(colors.neutral.200), theme(colors.neutral.600));
  --color-scrollbar-thumb-hover: light-dark(theme(colors.neutral.200), theme(colors.neutral.600));

  /* Sheet */

  --color-axis-selected-surface: light-dark(theme(colors.neutral.100), theme(colors.neutral.900));
  --color-axis-selected-text: light-dark(theme(colors.neutral.100), theme(colors.neutral.900));
  --color-axis-surface: light-dark(theme(colors.neutral.50), theme(colors.neutral.800));
  --color-axis-text: light-dark(theme(colors.neutral.800), theme(colors.neutral.200));

  /* Misc */

  --color-call-active: theme(colors.green.500);
  --color-grid-commented-active: light-dark(theme(colors.green.200 / 0.5), theme(colors.green.600 / 0.5));
  --color-grid-line: light-dark(theme(colors.neutral.100), theme(colors.neutral.800));
  --color-grid-focus-indicator-color: light-dark(theme(colors.blue.300), theme(colors.blue.500));
  --color-hair-line: 1px;
  --color-landmark-line: 1px;
  --color-modal-line: 1px;
  --color-no-line: 0px;
  --color-positioned-line: 1px;
  --color-thick-line: 2px;
}



@layer dx-tokens {
  /* Semantic tokens without --color-* equivalents */

  :root, .dark {
    --dx-callAlert: var(--color-rose-500);
    --dx-primaryCursor: light-dark(var(--color-blue-400), var(--color-blue-300));

    --dx-gridCell: light-dark(transparent, var(--color-neutral-950));
    --dx-gridCellSelected: light-dark(var(--color-neutral-100), var(--color-neutral-900));
    --dx-gridOverlay: oklch(from var(--color-blue-500) l c h / 0.5);
    --dx-gridSelectionOverlay: oklch(from var(--color-blue-500) l c h / 0.2);
    --dx-gridHighlight: oklch(from var(--color-emerald-500) l c h / 0.5);
    --dx-gridCommented: light-dark(var(--color-green-200), var(--color-green-600));

    --dx-scrollbarTrack: light-dark(var(--color-neutral-50), var(--color-neutral-900));
    --dx-scrollbarThumbSubdued: light-dark(var(--color-neutral-100), var(--color-neutral-800));
    --dx-hoverOverlay: oklch(from var(--color-neutral-500) l c h / 0.1);
    --dx-accentSurfaceRelated: light-dark(oklch(from var(--color-blue-300) l c h / 0.1), oklch(from var(--color-blue-400) l c h / 0.1));
    --dx-description: light-dark(var(--color-neutral-600), var(--color-neutral-400));
    --dx-subdued: light-dark(var(--color-neutral-800), var(--color-neutral-200));
    --dx-placeholder: var(--color-neutral-600);
  }

  /* Aliases and cursor tokens */

  :root, .dark {
    --dx-currentRelated: var(--color-modal-surface);

    --dx-successCursor: light-dark(var(--color-emerald-400), var(--color-emerald-300));
    --dx-infoCursor: light-dark(var(--color-cyan-400), var(--color-cyan-300));
    --dx-warningCursor: light-dark(var(--color-amber-400), var(--color-amber-300));
    --dx-errorCursor: light-dark(var(--color-rose-400), var(--color-rose-300));
    --dx-currentCursor: var(--dx-primaryCursor);
  }

  /* TODO(burdon): Are these used? See surfaces.css */
  .sidebar-surface, .dark .sidebar-surface, .bg-group-surface, .dark .bg-group-surface, .bg-sidebar-surface, .dark .bg-sidebar-surface, .bg-header-surface, .dark .bg-header-surface, .bg-toolbar-surface, .dark .bg-toolbar-surface, .bg-card-surface, .dark .bg-card-surface {
    --color-text-input-surface: light-dark(var(--color-neutral-50), var(--color-neutral-800));
    --color-input-surface: light-dark(var(--color-neutral-100), var(--color-neutral-800));
    --color-hover-surface: light-dark(var(--color-neutral-100), var(--color-neutral-700));
    --color-separator: light-dark(var(--color-neutral-200), var(--color-neutral-700));
  }

  /* TODO(burdon): Are these used? See surfaces.css */
  .modal-surface, .dark .modal-surface, .bg-modal-surface, .dark .bg-modal-surface, .bg-current-related, .dark .bg-current-related {
    --color-text-input-surface: light-dark(var(--color-neutral-50), var(--color-neutral-800));
    --color-input-surface: light-dark(var(--color-neutral-100), var(--color-neutral-800));
    --color-hover-surface: light-dark(var(--color-neutral-100), var(--color-neutral-700));
    --color-separator: light-dark(var(--color-neutral-200), var(--color-neutral-700));
  }

  [data-grid-focus-indicator-variant="stack"] {
    --color-grid-focus-indicator-color: light-dark(var(--color-neutral-400), var(--color-neutral-600));
  }

  :root {
    --dx-line-0: 0.000px;
    --dx-line-1: 1.000px;
    --dx-line-2: 2.000px;

    --dx-lacuna-12: 1.500rem;
    --dx-lacuna-3: 0.375rem;
    --dx-lacuna-4: 0.500rem;
    --dx-lacuna-6: 0.750rem;
  }

  :root {
    --dx-noLine: var(--dx-line-0);
    --dx-hairLine: var(--dx-line-1);
    --dx-thickLine: var(--dx-line-2);
    --dx-trimXs: var(--dx-lacuna-3);
    --dx-trimSm: var(--dx-lacuna-4);
    --dx-trimMd: var(--dx-lacuna-6);
    --dx-trimLg: var(--dx-lacuna-12);
    --dx-inputFine: var(--dx-lacuna-3);
    --dx-inputCoarse: var(--dx-lacuna-4);
  }

  :root, .density-fine {
    --dx-focusOffset: var(--dx-noLine);
    --dx-modalLine: var(--dx-hairLine);
    --dx-gridGap: var(--dx-hairLine);
    --dx-gridFocusIndicatorWidth: var(--dx-hairLine);
    --dx-focusLine: var(--dx-thickLine);
    --dx-iconButtonPadding: var(--dx-inputFine);
    --dx-cardChrome: var(--dx-trimXs);
    --dx-cardPadding: var(--dx-trimSm);
  }

  .density-coarse {
    --dx-iconButtonPadding: var(--dx-inputCoarse);
    --dx-cardPadding: var(--dx-trimMd);
  }

  [data-grid-focus-indicator-variant="stack"] {
    --dx-gridFocusIndicatorWidth: var(--dx-thickLine);
  }

  :root {
    --dx-size-18: 18.000rem;
    --dx-size-20: 20.000rem;
    --dx-size-22: 22.000rem;
    --dx-size-30: 30.000rem;
    --dx-size-50: 50.000rem;
  }

  :root {
    --dx-prose-max-width: var(--dx-size-50);
    --dx-container-max-width: var(--dx-size-50);
    --dx-card-default-width: var(--dx-size-20);
    --dx-card-min-width: var(--dx-size-18);
    --dx-card-max-width: var(--dx-size-22);
    --dx-card-min-height: var(--dx-size-18);
    --dx-card-max-height: var(--dx-size-30);
  }

  :root {
    /* Recitations */
    --sticky-top: 0;

    /* Lengths / sizes */
    --rail-content: 3rem;
    --rail-size: calc(var(--rail-content) + 1px);
    --rail-action: calc(var(--rail-content) - 0.5rem + 1px);
    --rail-item: calc(var(--rail-content) - 1rem);
    --line-height: 32px;
    --topbar-size: var(--rail-size);
    --toolbar-size: var(--rail-content);
    --statusbar-size: var(--rail-content);
    --nav-sidebar-size: 22.5rem;
    --complementary-sidebar-size: 25rem;
    --drawer-size: 50dvh;
    /* NOTE(thure): 74px (rather than rem) is intentional in order to match the size of macOS windowing controls. */
    --l0-size: 74px;
    --l0-avatar-size: 3rem;
    --l1-size: calc(var(--nav-sidebar-size) - var(--l0-size));
    --r0-size: var(--rail-size);
    --r1-size: calc(var(--complementary-sidebar-size) - var(--r0-size));
    --text-content: calc(50rem - env(safe-area-inset-left) - env(safe-area-inset-right));
  }

  /* TODO(thure): Support arbitrary values (like for keywords e.g. `auto`, or font families) in @ch-ui/tokens */
  :root {
    --dx-calc-auto: auto;
    --dx-calc-min: min-content;
    --dx-calc-fit: fit-content;
    --dx-calc-max: max-content;
    --dx-calc-content: content;
  }

  @supports (block-size: calc-size(fit-content, size)) {
    :root {
      --dx-calc-auto: calc-size(auto, size);
      --dx-calc-min: calc-size(min-content, size);
      --dx-calc-fit: calc-size(fit-content, size);
      --dx-calc-max: calc-size(max-content, size);
      --dx-calc-content: calc-size(content, size);
    }
  }
}
