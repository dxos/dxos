/**
 * Main theme.
 */

/**
 * Establish CSS cascade layer order before Tailwind sets its own.
 * First mention of a layer name wins its position in the order.
 * utilities must be last so it overrides all base and component layers.
 */
@layer properties, theme, dx-tokens, user-tokens, base, tw-base, dx-base, components, tw-components, dx-components, utilities;

@import 'tailwindcss';
@import './styles/index.css';
@import './styles/colors.css';

@plugin '@tailwindcss/forms';
@plugin 'tailwind-scrollbar';
@plugin 'tailwindcss-radix';

/**
 * Custom variants for pointer/hover media queries.
 * Replaces v3 custom screens: pointer-fine, hover-hover.
 */
@custom-variant pointer-fine (@media (pointer: fine));
@custom-variant hover-hover (@media (hover: hover));

/*
  * TODO(burdon): Generate semantic sets (e.g., -fill, -text, -surface, -surface-text: see hash-styles.ts)
  * TODO(burdon): Define size tokens from tailwind.ts (then delete).
  * TODO(burdon): Search for all custom classes like dx-
  * TODO(burdon): Normalize format to kebab-case.
  */

/**
 * Tailwind v4 theme configuration using @theme directive.
 * Replaces JavaScript config for theme values.
 */
@theme {
  /* Font families */
  --font-body: 'Inter Variable', ui-sans-serif, system-ui, sans-serif;
  --font-mono: 'JetBrains Mono Variable', ui-monospace, 'Cascadia Code', 'Source Code Pro', monospace;

  /* Custom spacing/sizing values - for ring, ring-offset, border-width, etc. */
  --ring-offset-width-focusOffset: var(--dx-focusOffset);
  --ring-width-focusLine: var(--dx-focusLine);
  --ring-width-hairLine: var(--dx-hairLine);
  --ring-width-thickLine: var(--dx-thickLine);
  --ring-width-noLine: var(--dx-noLine);

  /* Custom spacing for prose/container/card sizing */
  --spacing-prose-max-width: var(--dx-prose-max-width);
  --spacing-container-max-width: var(--dx-container-max-width);
  --spacing-card-default-width: var(--dx-card-default-width);
  --spacing-card-min-width: var(--dx-card-min-width);
  --spacing-card-max-width: var(--dx-card-max-width);
  --spacing-card-min-height: var(--dx-card-min-height);
  --spacing-card-max-height: var(--dx-card-max-height);

  /* Border radius scale (matches v3 config override) */
  --radius-none: 0;
  --radius-sm: 0.25rem;
  --radius: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1rem;

  /* Font size scale (1.125 modular scale from v3 config) */
  --text-xs: 0.790rem;
  --text-xs--line-height: 1rem;
  --text-sm: 0.889rem;
  --text-sm--line-height: 1.25rem;
  --text-base: 1rem;
  --text-base--line-height: 1.5rem;
  --text-lg: 1.125rem;
  --text-lg--line-height: 1.75rem;
  --text-xl: 1.266rem;
  --text-xl--line-height: 1.75rem;
  --text-2xl: 1.424rem;
  --text-2xl--line-height: 2rem;
  --text-3xl: 1.602rem;
  --text-3xl--line-height: 2.25rem;
  --text-4xl: 1.802rem;
  --text-4xl--line-height: 2.5rem;
  --text-5xl: 2.027rem;
  --text-5xl--line-height: 2.5rem;
  --text-6xl: 2.281rem;
  --text-6xl--line-height: 2.5rem;
  --text-7xl: 2.566rem;
  --text-7xl--line-height: 2.75rem;
  --text-8xl: 2.887rem;
  --text-8xl--line-height: 3rem;
  --text-9xl: 3.247rem;
  --text-9xl--line-height: 3.25rem;

  /* Box shadow */
  --shadow-slider: 0 0 0 5px rgba(0, 0, 0, 0.3);

  /* Transition timing function */
  --ease-in-out-symmetric: cubic-bezier(0.5, 0, 0.5, 1);

  /* Custom animations - migrated from tailwind.ts */

  /* Fade animations */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes fade-out {
    from { opacity: 1; }
    to { opacity: 0; }
  }
  --animate-fade-in: fade-in 200ms ease-out;
  --animate-fade-out: fade-out 400ms ease-out;

  /* Popper/dialog slide animations */
  @keyframes slide-down-and-fade {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(16px); }
  }
  @keyframes slide-left-and-fade {
    from { opacity: 0; transform: translateX(-16px); }
    to { opacity: 1; transform: translateX(0); }
  }
  @keyframes slide-up-and-fade {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes slide-right-and-fade {
    from { opacity: 0; transform: translateX(16px); }
    to { opacity: 1; transform: translateX(0); }
  }
  --animate-slide-down-and-fade: slide-down-and-fade 400ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-slide-left-and-fade: slide-left-and-fade 400ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-slide-up-and-fade: slide-up-and-fade 400ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-slide-right-and-fade: slide-right-and-fade 400ms cubic-bezier(0.16, 1, 0.3, 1);

  /* Toast animations */
  @keyframes toast-hide {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }
  @keyframes toast-slide-in-right {
    0% { transform: translateX(calc(100% + 1rem)); }
    100% { transform: translateX(0); }
  }
  @keyframes toast-slide-in-bottom {
    0% { transform: translateY(calc(100% + 1rem)); }
    100% { transform: translateY(0); }
  }
  @keyframes toast-swipe-out {
    0% { transform: translateX(var(--radix-toast-swipe-end-x)); }
    100% { transform: translateX(calc(100% + 1rem)); }
  }
  --animate-toast-hide: toast-hide 100ms ease-in forwards;
  --animate-toast-slide-in-right: toast-slide-in-right 150ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-toast-slide-in-bottom: toast-slide-in-bottom 150ms cubic-bezier(0.16, 1, 0.3, 1);
  --animate-toast-swipe-out: toast-swipe-out 100ms ease-out forwards;

  /* Accordion animations */
  @keyframes slide-down {
    from { height: 0px; }
    to { height: var(--radix-accordion-content-height); }
  }
  @keyframes slide-up {
    from { height: var(--radix-accordion-content-height); }
    to { height: 0px; }
  }
  --animate-slide-down: slide-down 300ms cubic-bezier(0.87, 0, 0.13, 1);
  --animate-slide-up: slide-up 300ms cubic-bezier(0.87, 0, 0.13, 1);

  /* Shimmer animation */
  @keyframes shimmer-loop {
    100% { transform: translateX(100%); }
  }
  --animate-shimmer: shimmer-loop 2s infinite;

  /* Halo pulse animation */
  @keyframes halo-pulse {
    0% { opacity: 0.3; }
    5% { opacity: 1; }
    100% { opacity: 0.3; }
  }
  --animate-halo-pulse: halo-pulse 2s ease-out infinite;

  /* Progress animations */
  @keyframes progress-indeterminate {
    0% { left: 0; width: 0%; }
    25% { left: 25%; width: 50%; }
    75% { left: 50%; width: 100%; }
    100% { left: 100%; width: 0%; }
  }
  --animate-progress-indeterminate: progress-indeterminate 2s ease-out infinite;

  /* Border trail animations */
  @keyframes trail {
    to { offset-distance: 100%; }
  }
  @keyframes trail-offset {
    0% { offset-distance: 50%; }
    100% { offset-distance: 150%; }
  }
  --animate-trail: trail 6s linear infinite;
  --animate-trail-offset: trail-offset 6s linear infinite;

  /* Spin animations (using built-in spin, just defining timing) */
  --animate-spin-slow: spin 3s linear infinite;
}

