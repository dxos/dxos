layer: library
language: typescript
tags:
  - ts-build
  - ts-test
  - pack
  - storybook
tasks:
  compile:
    args:
      - '--entryPoint=src/index.ts'
      - '--entryPoint=src/sdk.ts'
      - '--entryPoint=src/types/index.ts'
      - '--platform=browser'
      - '--platform=node'
    deps:
      - prebuild
  prebuild:
    command: bash ./scripts/copy_assets.sh
    toolchains: node # enforce that deps are installed
    inputs:
      - scripts/copy_assets.sh
      - package.json
      - moon.yml
    outputs:
      - dist/assets
  test:
    inputs:
      - .storybook/*
      - /tools/storybook-react/.storybook/main.ts
