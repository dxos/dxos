{"conversations":[{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01SWx6FcjwD244AJ4CzACboG","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to create a new organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" called \"Cyberdyne Systems\".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\n1. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", check what","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" are available to see if there's an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" type","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Create","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with the name","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"Cyberdyne Systems\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n3. Ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d it to the chat context for","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" further use\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" by listing","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" available schemas to fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the Organization type.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EooECkYICxgCKkApOBVEUVqs6UpUyLW5NX/vUqtp+8qp1L2dbT6dvsTdZu9dxxK4CkV8/5vJADr9KylxgLVHesGjyttXOtT0YO5SEgySGqDQCmPpUqseQ8saDGVB9yFQwlfIG2MIXyIwGWhqHHkz5HGkiYS0qz6pAsf1AAmO+Lrj1UoSezFqsbksDR47xpbcFMe5DzfaOcwoKvECyq7QJRfGxqgCrRq38NTc0CSXh5FeWBaCnRS6SusHHOuPrvsij9j79hpy4VHSIVsDi7kZGx2SCy1FoCErBXz7RKvMbTfnQeuCF6f/exWxP6KxOsblbJxG1JGPl1YugxZx9Fb5355lIZWIW0rlMGKplx8wEQSCQwlnyysfHEp64NiRFT6tN2Ja5L5xFSP4Qx8LQMbGe4gZ+qEvLtukj+t3FYZykoLRdHfk1dZ58RfcDC23RnXV7P/DB30+9VltfjgS9dhK3bTMC8cxsAmxHh4XXpPR/rkYsScVpNWo8A+eFxr9bJgAi6PT90RhBcGnclUUv0oBv9wMvXcu58W1Q2bKivpTSe/b00uh+cOvLl4wm6MXS/4gyg9j9jyvifPFGDBRXvF/YFXxY4eAT5G/8Ni42aashHIU+r2pXV7rWR/YAPWMeGTdtkoZJLxHewxa8fMnPG0kpsB1ELq1MNvWJo6UmZe4107lVZ/3cipEJIKz85dyGAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll create a new organization called \"","metadata":{}},{"type":"text-delta","id":"1","delta":"Cyberdyne Systems\" for you","metadata":{}},{"type":"text-delta","id":"1","delta":". First","metadata":{}},{"type":"text-delta","id":"1","delta":", let me check what organization","metadata":{}},{"type":"text-delta","id":"1","delta":" schema","metadata":{}},{"type":"text-delta","id":"1","delta":" is available.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"limit\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"20}","metadata":{}},{"type":"tool-params-end","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":172,"totalTokens":182},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":0},"cache_creation_input_tokens":0,"cache_read_input_tokens":4786,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01KDJmczmsMXVmyDHiLcEnUd","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I","metadata":{}},{"type":"text-delta","id":"0","delta":" can see that there","metadata":{}},{"type":"text-delta","id":"0","delta":"'s","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" available","metadata":{}},{"type":"text-delta","id":"0","delta":" (`","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos","metadata":{}},{"type":"text-delta","id":"0","delta":".org/type/Organization`).","metadata":{}},{"type":"text-delta","id":"0","delta":" Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" create","metadata":{}},{"type":"text-delta","id":"0","delta":" a new organization","metadata":{}},{"type":"text-delta","id":"0","delta":" calle","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"er","metadata":{}},{"type":"text-delta","id":"0","delta":"dyne Systems\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"{\"typena","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"me\": \"dxos","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":".org/type","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"/Organiza","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"tion\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":", \"data\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":": {","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"\"name\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"\"C","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"yber","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"dyn","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"e Systems\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":131,"totalTokens":137},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":5956},"cache_creation_input_tokens":5956,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that there's an Organization schema available (`dxos.org/type/Organization`). Now I'll create a new organization called \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","isFailure":false,"result":{"id":"01KHVFYW5XDWRATWM8XNTK40CZ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVFYW5XDWRATWM8XNTK40CZ","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01XiPMHWBdoKWERG13Dy6NfJ","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I've successfully created a","metadata":{}},{"type":"text-delta","id":"0","delta":" new organization called \"Cyberdyne","metadata":{}},{"type":"text-delta","id":"0","delta":" Systems\".","metadata":{}},{"type":"text-delta","id":"0","delta":" The organization","metadata":{}},{"type":"text-delta","id":"0","delta":" has been create","metadata":{}},{"type":"text-delta","id":"0","delta":"d with the ID `01KHV","metadata":{}},{"type":"text-delta","id":"0","delta":"FYW5XDWRA","metadata":{}},{"type":"text-delta","id":"0","delta":"TWM8XNTK40","metadata":{}},{"type":"text-delta","id":"0","delta":"CZ`.","metadata":{}},{"type":"text-delta","id":"0","delta":" \n\nWoul","metadata":{}},{"type":"text-delta","id":"0","delta":"d you like me to ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d this","metadata":{}},{"type":"text-delta","id":"0","delta":" organization to the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context","metadata":{}},{"type":"text-delta","id":"0","delta":" for","metadata":{}},{"type":"text-delta","id":"0","delta":" easy","metadata":{}},{"type":"text-delta","id":"0","delta":" reference, or would you like","metadata":{}},{"type":"text-delta","id":"0","delta":" to ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d more","metadata":{}},{"type":"text-delta","id":"0","delta":" details","metadata":{}},{"type":"text-delta","id":"0","delta":" to","metadata":{}},{"type":"text-delta","id":"0","delta":" it","metadata":{}},{"type":"text-delta","id":"0","delta":" such","metadata":{}},{"type":"text-delta","id":"0","delta":" as a description","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" status","metadata":{}},{"type":"text-delta","id":"0","delta":", website","metadata":{}},{"type":"text-delta","id":"0","delta":", or location?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","name":"add-to-context","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"{\"i","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"d\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"\"01KHVFYW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"5XDW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"RATWM8XNTK40","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"CZ\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":166,"totalTokens":172},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":269},"cache_creation_input_tokens":269,"cache_read_input_tokens":5956,"input_tokens":6,"output_tokens":7,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that there's an Organization schema available (`dxos.org/type/Organization`). Now I'll create a new organization called \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","isFailure":false,"result":{"id":"01KHVFYW5XDWRATWM8XNTK40CZ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVFYW5XDWRATWM8XNTK40CZ","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I've successfully created a new organization called \"Cyberdyne Systems\". The organization has been created with the ID `01KHVFYW5XDWRATWM8XNTK40CZ`. \n\nWould you like me to add this organization to the chat context for easy reference, or would you like to add more details to it such as a description, status, website, or location?","options":{}},{"type":"tool-call","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","name":"add-to-context","params":{"id":"01KHVFYW5XDWRATWM8XNTK40CZ"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","name":"add-to-context","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Khx8yiVym8bTFxfKbGaviD","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve adde","metadata":{}},{"type":"text-delta","id":"0","delta":"d the","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems organization to the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context. You","metadata":{}},{"type":"text-delta","id":"0","delta":" can now easily","metadata":{}},{"type":"text-delta","id":"0","delta":" reference it an","metadata":{}},{"type":"text-delta","id":"0","delta":"d update","metadata":{}},{"type":"text-delta","id":"0","delta":" its","metadata":{}},{"type":"text-delta","id":"0","delta":" properties","metadata":{}},{"type":"text-delta","id":"0","delta":" as needed.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":31,"totalTokens":36},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":179},"cache_creation_input_tokens":179,"cache_read_input_tokens":6225,"input_tokens":5,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]}]}