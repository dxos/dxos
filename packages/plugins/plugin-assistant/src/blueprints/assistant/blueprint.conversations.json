{"conversations":[{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"List all available schemas. Tell me what typenames are available.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_015SDFwjX48iNUDJmK6tf9WW","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to list all available schemas and know","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" what typenames are available. I shoul","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d use the list","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"schemas function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to get this information.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"ErwCCkYICxgCKkBwsAprS8plLaVfU9tCLRwFhp5JmTga0BcgWeHdrO5aAkjEdxUaBJ5UwVEkaGi3xztZmOk7zCI2jYgApq4RxMTrEgy3IVy64IGWsCLrt9UaDLiWiZDYYROsmhCNlSIwCevlrNZvuJse0XmmwI2SAKVlj0xHxU0poL10Va7Oa8YdDVzHN3pMkTXV5dC2nhEtKqMB19RqJ6kMQwcRPAeT4cI6+940cxdAzYScoEaG8iMq4VZ6Lpv//P+SN1qKMsmnuxcCx04El1uo+unp97aUrNzT3v0+z+JIxRak8Iun7og5R9L7HdDlwk8Pjd5y5TonAfAd27/zvcDEOzafQTGecMXUz0LxoRHAI0pb/mlCdv5rWZ8dNaXzw3BTwqpwI2IB4T7Rt+nQIguvV59kKSD9PdnW5YvWLxgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll list","metadata":{}},{"type":"text-delta","id":"1","delta":" all available schemas for","metadata":{}},{"type":"text-delta","id":"1","delta":" you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01X8HWvVzzcfCiZxrgBvk3G1","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01X8HWvVzzcfCiZxrgBvk3G1","delta":"","metadata":{}},{"type":"tool-params-end","id":"toolu_01X8HWvVzzcfCiZxrgBvk3G1","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":83,"totalTokens":93},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6399},"cache_creation_input_tokens":6399,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"List all available schemas. Tell me what typenames are available.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to list all available schemas and know what typenames are available. I should use the list-schemas function to get this information.","options":{}},{"type":"text","text":"I'll list all available schemas for you.","options":{}},{"type":"tool-call","id":"toolu_01X8HWvVzzcfCiZxrgBvk3G1","name":"list-schemas","params":{},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01X8HWvVzzcfCiZxrgBvk3G1","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01SHLrYv52YigRwM6byAet5G","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Base","metadata":{}},{"type":"text-delta","id":"0","delta":"d on the available","metadata":{}},{"type":"text-delta","id":"0","delta":" schemas","metadata":{}},{"type":"text-delta","id":"0","delta":", here","metadata":{}},{"type":"text-delta","id":"0","delta":" are","metadata":{}},{"type":"text-delta","id":"0","delta":" the typ","metadata":{}},{"type":"text-delta","id":"0","delta":"enames you","metadata":{}},{"type":"text-delta","id":"0","delta":" can use:\n\n##","metadata":{}},{"type":"text-delta","id":"0","delta":" Object","metadata":{}},{"type":"text-delta","id":"0","delta":" Types","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-delta","id":"0","delta":"\n1","metadata":{}},{"type":"text-delta","id":"0","delta":". **","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos.org/type/Blueprint","metadata":{}},{"type":"text-delta","id":"0","delta":"** - For","metadata":{}},{"type":"text-delta","id":"0","delta":" AI","metadata":{}},{"type":"text-delta","id":"0","delta":" assistant","metadata":{}},{"type":"text-delta","id":"0","delta":" blueprints with","metadata":{}},{"type":"text-delta","id":"0","delta":" instructions","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":"d tools","metadata":{}},{"type":"text-delta","id":"0","delta":"\n2. **dxos.","metadata":{}},{"type":"text-delta","id":"0","delta":"org/type/Organization","metadata":{}},{"type":"text-delta","id":"0","delta":"** - For organization/","metadata":{}},{"type":"text-delta","id":"0","delta":"company information\n3. **dx","metadata":{}},{"type":"text-delta","id":"0","delta":"os.org/type/Person**","metadata":{}},{"type":"text-delta","id":"0","delta":" - For person/contact information","metadata":{}},{"type":"text-delta","id":"0","delta":"\n4. **dxos.org","metadata":{}},{"type":"text-delta","id":"0","delta":"/type/Tag** - For ta","metadata":{}},{"type":"text-delta","id":"0","delta":"gging and categorizing","metadata":{}},{"type":"text-delta","id":"0","delta":" objects\n5. **example.com","metadata":{}},{"type":"text-delta","id":"0","delta":"/type/Expando** -","metadata":{}},{"type":"text-delta","id":"0","delta":" A","metadata":{}},{"type":"text-delta","id":"0","delta":" flexible object","metadata":{}},{"type":"text-delta","id":"0","delta":" type that allows any","metadata":{}},{"type":"text-delta","id":"0","delta":" additional properties\n\n## Relation","metadata":{}},{"type":"text-delta","id":"0","delta":" Types:\n1. **dx","metadata":{}},{"type":"text-delta","id":"0","delta":"os.org/relation/","metadata":{}},{"type":"text-delta","id":"0","delta":"Employer","metadata":{}},{"type":"text-delta","id":"0","delta":"** - For linking","metadata":{}},{"type":"text-delta","id":"0","delta":" a","metadata":{}},{"type":"text-delta","id":"0","delta":" Person","metadata":{}},{"type":"text-delta","id":"0","delta":" to an Organization (employer relationship","metadata":{}},{"type":"text-delta","id":"0","delta":")","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\nEach","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" defines the","metadata":{}},{"type":"text-delta","id":"0","delta":" structure","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":"d properties for","metadata":{}},{"type":"text-delta","id":"0","delta":" its corresponding","metadata":{}},{"type":"text-delta","id":"0","delta":" type","metadata":{}},{"type":"text-delta","id":"0","delta":". For","metadata":{}},{"type":"text-delta","id":"0","delta":" example:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **","metadata":{}},{"type":"text-delta","id":"0","delta":"Person","metadata":{}},{"type":"text-delta","id":"0","delta":"** objects","metadata":{}},{"type":"text-delta","id":"0","delta":" can","metadata":{}},{"type":"text-delta","id":"0","delta":" have properties like fullName, emails","metadata":{}},{"type":"text-delta","id":"0","delta":", phone","metadata":{}},{"type":"text-delta","id":"0","delta":" numbers, an","metadata":{}},{"type":"text-delta","id":"0","delta":"d organization","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Organization** objects can have","metadata":{}},{"type":"text-delta","id":"0","delta":" name","metadata":{}},{"type":"text-delta","id":"0","delta":", description","metadata":{}},{"type":"text-delta","id":"0","delta":", status","metadata":{}},{"type":"text-delta","id":"0","delta":", website","metadata":{}},{"type":"text-delta","id":"0","delta":", and location","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Tag","metadata":{}},{"type":"text-delta","id":"0","delta":"** objects have","metadata":{}},{"type":"text-delta","id":"0","delta":" a","metadata":{}},{"type":"text-delta","id":"0","delta":" label and optional","metadata":{}},{"type":"text-delta","id":"0","delta":" color","metadata":{}},{"type":"text-delta","id":"0","delta":" (hue)\n- **Blueprint","metadata":{}},{"type":"text-delta","id":"0","delta":"** objects define","metadata":{}},{"type":"text-delta","id":"0","delta":" AI","metadata":{}},{"type":"text-delta","id":"0","delta":" assistant behavior","metadata":{}},{"type":"text-delta","id":"0","delta":" with instructions an","metadata":{}},{"type":"text-delta","id":"0","delta":"d available","metadata":{}},{"type":"text-delta","id":"0","delta":" tools","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Expando** is","metadata":{}},{"type":"text-delta","id":"0","delta":" a special","metadata":{}},{"type":"text-delta","id":"0","delta":" type","metadata":{}},{"type":"text-delta","id":"0","delta":" that accepts","metadata":{}},{"type":"text-delta","id":"0","delta":" any additional properties beyon","metadata":{}},{"type":"text-delta","id":"0","delta":"d the require","metadata":{}},{"type":"text-delta","id":"0","delta":"d i","metadata":{}},{"type":"text-delta","id":"0","delta":"d\n\nYou can use these typenames when","metadata":{}},{"type":"text-delta","id":"0","delta":" creating new","metadata":{}},{"type":"text-delta","id":"0","delta":" objects or que","metadata":{}},{"type":"text-delta","id":"0","delta":"rying existing ones in","metadata":{}},{"type":"text-delta","id":"0","delta":" the","metadata":{}},{"type":"text-delta","id":"0","delta":" system.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":292,"totalTokens":298},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":9230},"cache_creation_input_tokens":9230,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_016AfguQdaYhMyLxpbu278fN","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants me to ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d a new schema with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" specific","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" fields. I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to create a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" JSON","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schema","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" following:\n- Name","metadata":{}},{"type":"reasoning-delta","id":"0","delta":": \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Project\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n- Typename: \"example.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"com/type/Project\" ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n- Fields: ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n  - name (string)","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n  - description (string)\n  ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"- status (string)\n\nI'll","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"schema","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to create this.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EskDCkYICxgCKkBv4UBBaYX8jB5vblU+Etxm6LYwxwQviwMxWJXc8ju2grJTO9JTJsHneFqQfACzySyl6w/wZtKSXPgIvemkBMvJEgwsETzmeHdafODe3YYaDAr8yTjXpCsrSWeuPiIwRPOz5Nik8kMqwS0JSY72y9b/gomSgMsRXIZoJXkoabjWRbhDLEsKgWaGsOAf+I5HKrACaq0x4zbMuc6200pmdJBuAliex8fSqgMZFVpu2SJZPQkBG30xAMAkqqqLoV94iyWkgL73ak97FmcJSed9NRJJn0JSKKOxh0gy2bH6evLlwjpnDo5JKEdwn7f/3BhF6ktcyVafAQc5tHXpyQHPHLwt05k4XxSm6DNYmH+E9jC5Sf/Kh0WiFw2akY3RuXvYPq3ksFzNFruC/ApbpK0ZpT9bMTN3NMZNSsYyme8+H6I6koCnH8VcZj/UE4/E0hMH8vjbD+0KBSQKO35oMUHyrX9TuDfJRhNIFlo+tOyTbwX1uITa0cYr1cKVKX9wqUhYzKoJI7cfHqjCuhOATw659YaSndHb45MXUlrbENA1uojX5aOw+95hPOShPNXuCr8BB9SW0DkDnR3yzaym2jFRfb/2ERgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll ad","metadata":{}},{"type":"text-delta","id":"1","delta":"d the new Project schema for you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","name":"add-schema","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"{\"na","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"me\": \"Proje","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ct","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":", \"type","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"name\": \"ex","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ample.com/ty","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"pe/P","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"roject\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":", \"json","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"Schema","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\": {\"type","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\":\"obj","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ect\",","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"prope","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"rties\":{\"n","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ame\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"type\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"s","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"tring\",\"de","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"sc","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"riptio","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"n\":\"The","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":" name of t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"he project","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"},\"descript","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ion\":{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"type\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"string\",\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"des","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"cripti","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"on\":\"A","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":" descrip","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"tion of","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":" th","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"e ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"pro","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ject\"}","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":",\"status\":{","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"type\":\"st","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ring\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":",\"descrip","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"tion\":\"T","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"he current","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":" status of ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"the proj","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ect\"}},","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"\"requir","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"ed\":[\"nam","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","delta":"e\"]}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":313,"totalTokens":323},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6421},"cache_creation_input_tokens":6421,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":6,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add a new schema with specific fields. I need to create a JSON schema with the following:\n- Name: \"Project\"\n- Typename: \"example.com/type/Project\" \n- Fields: \n  - name (string)\n  - description (string)\n  - status (string)\n\nI'll use the add-schema function to create this.","options":{}},{"type":"text","text":"I'll add the new Project schema for you.","options":{}},{"type":"tool-call","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"]}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01SmT5SfZkffX4AMKtGwdp7m","name":"add-schema","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_015odpxGWWakpdo3WAZihg12","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The Project schema has been successfully added to","metadata":{}},{"type":"text-delta","id":"0","delta":" the space","metadata":{}},{"type":"text-delta","id":"0","delta":"!","metadata":{}},{"type":"text-delta","id":"0","delta":" \n\nThe schema","metadata":{}},{"type":"text-delta","id":"0","delta":" includes:\n- **typename","metadata":{}},{"type":"text-delta","id":"0","delta":"**: `example.com/type/","metadata":{}},{"type":"text-delta","id":"0","delta":"Project`","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Fields","metadata":{}},{"type":"text-delta","id":"0","delta":"**:\n  - `name`","metadata":{}},{"type":"text-delta","id":"0","delta":" (string)","metadata":{}},{"type":"text-delta","id":"0","delta":" - required\n  - `description`","metadata":{}},{"type":"text-delta","id":"0","delta":" (string) - optional","metadata":{}},{"type":"text-delta","id":"0","delta":"\n  - `status` (string)","metadata":{}},{"type":"text-delta","id":"0","delta":" - optional\n\nYou","metadata":{}},{"type":"text-delta","id":"0","delta":" can now create","metadata":{}},{"type":"text-delta","id":"0","delta":" objects","metadata":{}},{"type":"text-delta","id":"0","delta":" of","metadata":{}},{"type":"text-delta","id":"0","delta":" type Project","metadata":{}},{"type":"text-delta","id":"0","delta":" using","metadata":{}},{"type":"text-delta","id":"0","delta":" this","metadata":{}},{"type":"text-delta","id":"0","delta":" schema.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":86,"totalTokens":91},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6588},"cache_creation_input_tokens":6588,"cache_read_input_tokens":0,"input_tokens":5,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01QwzQSNit7YcZq56tEantBW","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to create a new organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" called \"Cyberdyne Systems\".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", check what","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" are","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" available to see if there","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"'s an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" type","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Create","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the organization with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" that","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" specific","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" name\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" by listing","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the appropriate","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" type","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EtUDCkYICxgCKkBYj2LtOUYZsxw2JhivGS9xy+tVI0IVWsRGfhD4M2cVw1YGxhD4HxNUUk17q4doHCculFcs2zlTaN1aWJsI6DY5Egz7+2c5EhOmd+JA7csaDGCC6vlIgf+tvHYyBSIw6SEDuaDgpa1VlSVU9Ly3AVt8wTAOYVAuj/3gy7I5e7ii1YY+MSmpOEe6YKc4mCg2KrwCiqg+Xa4sGtyhBKDxCSemzvoxiRpN0ZBppSXhNwiuclBdccBldB/OSYoz9Tlt483cIBl6hhl5iukMslptDKNyvG7vyGJBqzR4LWVJxKk3yZbow5GFoCaR/G9p+FXj0xOGAEnmY+H3qFAhMrmFB/DHjj+Y1+CwgroMDSb8qayW8ZrtQU2cXFflKuEJ16SqK0Chw0aFvas/KU/ozVZEkW0CMF39t0q3ZjTC9GIMJs8r3g3Qpe+lBMBPvmb07AWD8G8t02KVjykBm+IXItNQLxtz/dEIgb9Owcm9OGY/hELgr6YAJEnjXpgg3GmceO9oqkm9XEgqRfiPicT4PrH/hQuBNrhRWb/lUSct4MM5u1TY58t98GS5EuI/zvrDizVVTrPjyQi5Xl/8k9I+ydhIKdlIf/5oNBTXqk5vcsIxZxgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help","metadata":{}},{"type":"text-delta","id":"1","delta":" you create a","metadata":{}},{"type":"text-delta","id":"1","delta":" new organization called \"Cyberdyne","metadata":{}},{"type":"text-delta","id":"1","delta":" Systems\". Let me first check what organization","metadata":{}},{"type":"text-delta","id":"1","delta":" schema","metadata":{}},{"type":"text-delta","id":"1","delta":" is available.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","delta":"{\"limit\": 2","metadata":{}},{"type":"tool-params-delta","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","delta":"0}","metadata":{}},{"type":"tool-params-end","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":153,"totalTokens":163},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6398},"cache_creation_input_tokens":6398,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization with that specific name\n\nLet me start by listing the schemas to find the appropriate type for an organization.","options":{}},{"type":"text","text":"I'll help you create a new organization called \"Cyberdyne Systems\". Let me first check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01SPCfR6Ea6xouyWYnQ53sow","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great","metadata":{}},{"type":"text-delta","id":"0","delta":"! I can see that there","metadata":{}},{"type":"text-delta","id":"0","delta":"'s an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" available","metadata":{}},{"type":"text-delta","id":"0","delta":". Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" create","metadata":{}},{"type":"text-delta","id":"0","delta":" the","metadata":{}},{"type":"text-delta","id":"0","delta":" new","metadata":{}},{"type":"text-delta","id":"0","delta":" organization","metadata":{}},{"type":"text-delta","id":"0","delta":" calle","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"er","metadata":{}},{"type":"text-delta","id":"0","delta":"dyne Systems\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","name":"create-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"{\"t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"ypen","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"ame\": \"dxos","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":".org/typ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"e/Org","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"anization\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":", \"data\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"{\"name\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"\"Cyberdyne","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":" Sy","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","delta":"stems\"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":120,"totalTokens":126},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":9263},"cache_creation_input_tokens":9263,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization with that specific name\n\nLet me start by listing the schemas to find the appropriate type for an organization.","options":{}},{"type":"text","text":"I'll help you create a new organization called \"Cyberdyne Systems\". Let me first check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I can see that there's an Organization schema available. Now I'll create the new organization called \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","name":"create-object","isFailure":false,"result":{"id":"01JGFJJZ00G0WKQSJGMAKCNT9Q","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNT9Q","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01N9qCi59VDzNva3kyhiUVY5","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I've successfully created a","metadata":{}},{"type":"text-delta","id":"0","delta":" new organization calle","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Cyberdyne Systems\".","metadata":{}},{"type":"text-delta","id":"0","delta":" The organization","metadata":{}},{"type":"text-delta","id":"0","delta":" has been adde","metadata":{}},{"type":"text-delta","id":"0","delta":"d to","metadata":{}},{"type":"text-delta","id":"0","delta":" your","metadata":{}},{"type":"text-delta","id":"0","delta":" space","metadata":{}},{"type":"text-delta","id":"0","delta":" with the ID","metadata":{}},{"type":"text-delta","id":"0","delta":" `01JGFJJZ","metadata":{}},{"type":"text-delta","id":"0","delta":"00G0WKQSJ","metadata":{}},{"type":"text-delta","id":"0","delta":"GMAKCNT9Q`.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","name":"add-to-context","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"obj\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"01JGFJJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"Z00","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"G0WKQS","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"JGM","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","delta":"AKCNT9Q\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":127,"totalTokens":133},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":256},"cache_creation_input_tokens":256,"cache_read_input_tokens":9263,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization with that specific name\n\nLet me start by listing the schemas to find the appropriate type for an organization.","options":{}},{"type":"text","text":"I'll help you create a new organization called \"Cyberdyne Systems\". Let me first check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01JnE9gtBxqpkGSjNZu334f2","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I can see that there's an Organization schema available. Now I'll create the new organization called \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01RHq1oUXgN1xUqMUbywQws1","name":"create-object","isFailure":false,"result":{"id":"01JGFJJZ00G0WKQSJGMAKCNT9Q","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNT9Q","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I've successfully created a new organization called \"Cyberdyne Systems\". The organization has been added to your space with the ID `01JGFJJZ00G0WKQSJGMAKCNT9Q`.","options":{}},{"type":"tool-call","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","name":"add-to-context","params":{"obj":"01JGFJJZ00G0WKQSJGMAKCNT9Q"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01EZ2NJh4yDPkcyHrQg3Mjyu","name":"add-to-context","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01DSpHU5T4WN2ggRWthF9QAH","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The","metadata":{}},{"type":"text-delta","id":"0","delta":" organization is","metadata":{}},{"type":"text-delta","id":"0","delta":" now adde","metadata":{}},{"type":"text-delta","id":"0","delta":"d to the","metadata":{}},{"type":"text-delta","id":"0","delta":" conversation","metadata":{}},{"type":"text-delta","id":"0","delta":" context. You","metadata":{}},{"type":"text-delta","id":"0","delta":" can:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n-","metadata":{}},{"type":"text-delta","id":"0","delta":" Ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d more details","metadata":{}},{"type":"text-delta","id":"0","delta":" like","metadata":{}},{"type":"text-delta","id":"0","delta":" a","metadata":{}},{"type":"text-delta","id":"0","delta":" description","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" website","metadata":{}},{"type":"text-delta","id":"0","delta":", location","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" or","metadata":{}},{"type":"text-delta","id":"0","delta":" status","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- Create people","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":"d associate","metadata":{}},{"type":"text-delta","id":"0","delta":" them with this organization\n- Add tags","metadata":{}},{"type":"text-delta","id":"0","delta":" to","metadata":{}},{"type":"text-delta","id":"0","delta":" categorize it","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\nWould you like me to add any additional","metadata":{}},{"type":"text-delta","id":"0","delta":" information to","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":66,"totalTokens":71},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":140},"cache_creation_input_tokens":140,"cache_read_input_tokens":9519,"input_tokens":5,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_018sd3WsUpYmkv4T9Lgn9wPU","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to delete an organization calle","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"Obsolete Corp\". I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\n1. First search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for organizations","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with the name \"Obsolete Corp","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\" \n2. Once","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I find it, delete","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nLet me start by que","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"rying for organizations with that","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" name.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EpMDCkYICxgCKkCvSSVVJja8mTsggaDPXtvdIUKdEpJBIx+cT6ykv7B3hLL10AoufaDvS5Pab0AhjSyEYT+esdMfKt8BNBoueffYEgxoG9qZN4HewMARJhoaDHgbdUKWbFucQa/bAyIwLIiVVBnBSlmrCQPxQReH70/wysFO6wh5I8Ek0x2q+zcxDHiWtHlkukrNl2wP3DFYKvoBrtHE0+gI47azIPbpa70m2nPBsZ6pCO+OjxefjQgDIit2JmfyxlO7UMAGKEOF8oGM4a3n6hGA0Izvo2A8LkP31Y7D2PWfE67orFq9gdzYTtu/1LgSnplz9yZXjTsrfYSM+mjV/bPuROusgF5zrGCN8S68HQY6eV+WXXdydybOY8YUCmFadq/hCzz0z1ZHAEk5eHeTTMXLoja2wDt3Fklb8thV3RzdJ3D9pfkezYAlqNf6pBJT4js8CD7c5x+IQzIZlGVUWiLBtL1FTSEQ4EWEVU2cCpAVzCQAiyDtHSm4p0EuHHmMwHbEm/QXTwL3MEechlRdBNxbNJI9rhgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you delete the","metadata":{}},{"type":"text-delta","id":"1","delta":" organization \"Obsolete Corp\". Let","metadata":{}},{"type":"text-delta","id":"1","delta":" me first search for it in","metadata":{}},{"type":"text-delta","id":"1","delta":" the database.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"{\"typena","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"me\": \"dxos.","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"org/t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"ype/Orga","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"nizati","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"on\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":", ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"\"text\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":" \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"Obsolete Co","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"rp\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":", \"include","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"Content","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":"\": true","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":", \"limit\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","delta":": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":206,"totalTokens":216},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6395},"cache_creation_input_tokens":6395,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to delete an organization called \"Obsolete Corp\". I need to:\n\n1. First search for organizations with the name \"Obsolete Corp\" \n2. Once I find it, delete the object\n\nLet me start by querying for organizations with that name.","options":{}},{"type":"text","text":"I'll help you delete the organization \"Obsolete Corp\". Let me first search for it in the database.","options":{}},{"type":"tool-call","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","name":"query","params":{"typename":"dxos.org/type/Organization","text":"Obsolete Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTA8","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTA8","name":"Obsolete Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01DLc88Stwu4DWHRv6ACgv7F","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d the organization \"Obsolete Corp\".","metadata":{}},{"type":"text-delta","id":"0","delta":" Now I'll delete it.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","name":"delete-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","delta":"{\"obj\": \"01J","metadata":{}},{"type":"tool-params-delta","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","delta":"GFJJZ00G0WKQ","metadata":{}},{"type":"tool-params-delta","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","delta":"SJGMA","metadata":{}},{"type":"tool-params-delta","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","delta":"KCNTA8\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":89,"totalTokens":95},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6648},"cache_creation_input_tokens":6648,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to delete an organization called \"Obsolete Corp\". I need to:\n\n1. First search for organizations with the name \"Obsolete Corp\" \n2. Once I find it, delete the object\n\nLet me start by querying for organizations with that name.","options":{}},{"type":"text","text":"I'll help you delete the organization \"Obsolete Corp\". Let me first search for it in the database.","options":{}},{"type":"tool-call","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","name":"query","params":{"typename":"dxos.org/type/Organization","text":"Obsolete Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01LJPQ9B6JQFbRxUWSEiLgSd","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTA8","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTA8","name":"Obsolete Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Found the organization \"Obsolete Corp\". Now I'll delete it.","options":{}},{"type":"tool-call","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","name":"delete-object","params":{"obj":"01JGFJJZ00G0WKQSJGMAKCNTA8"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_018BvDrzkdjGEHzdySTa4kSi","name":"delete-object","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_012ZZQUZSSX2EnmBxwHm5Luc","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The organization \"Obsolete Corp\"","metadata":{}},{"type":"text-delta","id":"0","delta":" has been successfully deleted from the database.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":19,"totalTokens":24},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":102},"cache_creation_input_tokens":102,"cache_read_input_tokens":6648,"input_tokens":5,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_017VepYdeHKacjpk6hrPxZyk","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" update an organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" by","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" changing its name from \"Old Name Inc","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\" to \"New Name Corp\". ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nFirst","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", I need to fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" name","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"Old Name Inc\". I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"'ll","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the query tool to search for it","metadata":{}},{"type":"reasoning-delta","id":"0","delta":".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Then once","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I find it, I'll use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the update-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" tool to change its","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" name.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nLet me start by querying for","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the organization.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EoIECkYICxgCKkBn2ijIXTo4h9PzllW22/+KvktMFnMqnCn+l+f94ik+L5iApIt+9J3z1x4DVe8TUkLYPEcysIE079f/mbWuVxB3EgyqHZJv6heMTwefrP4aDGb4vqjCi/8fGeeS3yIw+o8pCKuP1XvbW0sSZ/cJu32hRY1cJjlCX5b6cH0GGay+0M5oxjLc/a8ATG0DTV9vKukC+IWEohWD93CoGBBuRJj0n9Ojd6uZ6BiGGBNBhSXHH/+bUq0YJfV4N6DSjRLUYsQbVfadePAr2VuBmOwR/1tUDx9s8MDvWnVzdlG1TVHG5PjT1QfcZkxixvhkVVO3fy0qvN+TqOLW5pI0RzqAaiz5JAKRVMDYaWQObXsEreksDnH0V+j+CPqA8+3X+lj++HMOKRk7UwtMj3vd/Kk6xgBHI1djRB2Eh4tT+XSjqpqpIIMm9r4qRpc7HusqSlgYXVIG2hlZErHjTA3VYAvV718ABlgOzVWzjOQaOIEGORjktPTMY3KnN9Pp9Z5fnU96T/uaAl1J5Oa16at8Y7m1xq4X3vlIURR6jTW12xG+5JJqSxwTqvp188HI7FHzgL24RqPUGy5EN/bFtw51IJ6c5+KEZ9YKDf84dNRrMK1kojUh1atGpzzUCOXXQW9fB0BgDTOX7oJFO74OsdnIbwVirjxBXsbp+J4cACFsmRgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you update the organization's","metadata":{}},{"type":"text-delta","id":"1","delta":" name from \"Old Name Inc\" to","metadata":{}},{"type":"text-delta","id":"1","delta":" \"New Name Corp\". Let me first","metadata":{}},{"type":"text-delta","id":"1","delta":" fin","metadata":{}},{"type":"text-delta","id":"1","delta":"d the organization.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"{\"t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"ext\": \"Old","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":" N","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"ame Inc\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":", \"incl","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"ude","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"Content\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":" tru","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":", \"li","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":"mit\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","delta":" 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":210,"totalTokens":220},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6404},"cache_creation_input_tokens":6404,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to update an organization object by changing its name from \"Old Name Inc\" to \"New Name Corp\". \n\nFirst, I need to find the organization object with the name \"Old Name Inc\". I'll use the query tool to search for it. Then once I find it, I'll use the update-object tool to change its name.\n\nLet me start by querying for the organization.","options":{}},{"type":"text","text":"I'll help you update the organization's name from \"Old Name Inc\" to \"New Name Corp\". Let me first find the organization.","options":{}},{"type":"tool-call","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","name":"query","params":{"text":"Old Name Inc","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTAR","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAR","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01JGFJJZ00G0WKQSJGMAKCNTAS","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAS","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01JGFJJZ00G0WKQSJGMAKCNTAR"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01JGFJJZ00G0WKQSJGMAKCNTAX","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAX","name":"Old Name Inc"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01HkQVnK829HzywEtWUZWSNc","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d the organization","metadata":{}},{"type":"text-delta","id":"0","delta":" \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Old Name Inc\".","metadata":{}},{"type":"text-delta","id":"0","delta":" Now I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" update its","metadata":{}},{"type":"text-delta","id":"0","delta":" name to \"New Name Corp","metadata":{}},{"type":"text-delta","id":"0","delta":"\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","name":"update-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"{\"ob","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"j\": \"01JGFJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"JZ00","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"G0WKQSJG","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"MAKCNTAX","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":", ","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"\"p","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"ropert","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"ies\": {\"nam","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"e\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":":\"New Na","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"me ","metadata":{}},{"type":"tool-params-delta","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","delta":"Corp\"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":124,"totalTokens":130},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":7870},"cache_creation_input_tokens":7870,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to update an organization object by changing its name from \"Old Name Inc\" to \"New Name Corp\". \n\nFirst, I need to find the organization object with the name \"Old Name Inc\". I'll use the query tool to search for it. Then once I find it, I'll use the update-object tool to change its name.\n\nLet me start by querying for the organization.","options":{}},{"type":"text","text":"I'll help you update the organization's name from \"Old Name Inc\" to \"New Name Corp\". Let me first find the organization.","options":{}},{"type":"tool-call","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","name":"query","params":{"text":"Old Name Inc","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01NRpSkvxGgNskx85iL1bgjb","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTAR","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAR","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01JGFJJZ00G0WKQSJGMAKCNTAS","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAS","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01JGFJJZ00G0WKQSJGMAKCNTAR"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01JGFJJZ00G0WKQSJGMAKCNTAX","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAX","name":"Old Name Inc"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found the organization \"Old Name Inc\". Now I'll update its name to \"New Name Corp\".","options":{}},{"type":"tool-call","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","name":"update-object","params":{"obj":"01JGFJJZ00G0WKQSJGMAKCNTAX","properties":{"name":"New Name Corp"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011f9EZpbhtqbysbcDcNRgJZ","name":"update-object","isFailure":false,"result":{"id":"01JGFJJZ00G0WKQSJGMAKCNTAX","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTAX","name":"New Name Corp"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_013Azn4pYPWeTExMaHzjPvoW","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Successfully","metadata":{}},{"type":"text-delta","id":"0","delta":" updated! The","metadata":{}},{"type":"text-delta","id":"0","delta":" organization's","metadata":{}},{"type":"text-delta","id":"0","delta":" name has","metadata":{}},{"type":"text-delta","id":"0","delta":" been changed from \"Old Name Inc\"","metadata":{}},{"type":"text-delta","id":"0","delta":" to \"New Name Corp\". The update","metadata":{}},{"type":"text-delta","id":"0","delta":" has","metadata":{}},{"type":"text-delta","id":"0","delta":" been save","metadata":{}},{"type":"text-delta","id":"0","delta":"d to the database","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":34,"totalTokens":40},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":256},"cache_creation_input_tokens":256,"cache_read_input_tokens":7870,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Search for all organizations. How many are there?","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Ku5XhgzcrDirn83mDC4jqy","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to search for all organizations and know","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" how many there are. I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. Use the query","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" tool to search for objects","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" of type organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":",","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I shoul","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d check what","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" are available to fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" exact","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" typename","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for organizations\n3. Then run the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" query to fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d all organizations\n4. Count an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d report how","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" many were","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" found\n\nLet me start by listing","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" exact typename for organizations.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EsYECkYICxgCKkDw4TngBHL+9cnGpPcEEAewqkJ1TBpBgxUtvvbqRjiaC8fUX2PsdhSLGBXGvIfTl0B7II6GosdRwFjuMYytWCFXEgx5xtIUoJ4QwpxJZtkaDEGGH36l7LBWuNEFoyIwDUJybmsjStYxDbVwn3xwXisU0+SZ98uFBf1GqoYC8yVmORXIWotLh7LaTl8LRiP5Kq0Dj4zEb463XJf+3a5tMpWgGFtwq0ImaaTr5g0fWMgI47HbBBsLXmL4QKxmBuhQIz51/a+5qavstsI+1rAA/ThDxmYEmLzvKVrdIv6Q6xKZUhM9No9TuMfmU36I/qVjCbvmPTBAsw7So8qDa5vQTccd4ZpXIPgyEEP7WFgehFGZslXia3Rxma+F86mJQYXra6a/cUD0dxzxMJXLpYvORAF8KHnHcE2QFZK3Bt4UhLAyR4uzNtp8d7uf6i6y8RoWLQSQL3FUnmiUx0sRfOt2qYPLXUsbAe21SzJpRB8kBAHQ8czKjjmWbowcfb6HCpygyrPaSJLO+mlmmniPlKAgVUJf9HV5T/VnoIChId6bweKdVU2gRx4cqrun8gufdVgM+w5ObHzY+/02p6NbN6cqDwrbfdijcSOp9bji4pb76xXeMrc7FNNX+t3JFIr4CdsP3CLOE7GhJhQANPPraqfxbPu5v66nFkqp/edyK2mO6gVQYHYNOuLNtBk/hDbMMgUR2ZS2od/SuhTkxlcv0fdUU+64QnJ++29Z5EG6BydIeRqntVkeawoYYZHqO2An44zSGAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll search","metadata":{}},{"type":"text-delta","id":"1","delta":" for all organizations in the system.","metadata":{}},{"type":"text-delta","id":"1","delta":" First","metadata":{}},{"type":"text-delta","id":"1","delta":", let me check the","metadata":{}},{"type":"text-delta","id":"1","delta":" available schemas to find the exact typename","metadata":{}},{"type":"text-delta","id":"1","delta":" for organizations.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","delta":"{\"limit\": 5","metadata":{}},{"type":"tool-params-delta","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","delta":"0}","metadata":{}},{"type":"tool-params-end","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":176,"totalTokens":186},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6396},"cache_creation_input_tokens":6396,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Search for all organizations. How many are there?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to search for all organizations and know how many there are. I need to:\n1. Use the query tool to search for objects of type organization\n2. First, I should check what schemas are available to find the exact typename for organizations\n3. Then run the query to find all organizations\n4. Count and report how many were found\n\nLet me start by listing schemas to find the exact typename for organizations.","options":{}},{"type":"text","text":"I'll search for all organizations in the system. First, let me check the available schemas to find the exact typename for organizations.","options":{}},{"type":"tool-call","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","name":"list-schemas","params":{"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01PJsNqvz52sneWvHjH1adSs","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Now I can search","metadata":{}},{"type":"text-delta","id":"0","delta":" for all","metadata":{}},{"type":"text-delta","id":"0","delta":" organizations","metadata":{}},{"type":"text-delta","id":"0","delta":" using","metadata":{}},{"type":"text-delta","id":"0","delta":" the correct","metadata":{}},{"type":"text-delta","id":"0","delta":" typename","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"{\"typen","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"ame\": \"dxos","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":".org/type/","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"Organ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"iz","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"ation\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":", \"include","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"Content","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":"\": false","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":", \"limit\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","delta":" 100}","metadata":{}},{"type":"tool-params-end","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":108,"totalTokens":114},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":9261},"cache_creation_input_tokens":9261,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Search for all organizations. How many are there?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to search for all organizations and know how many there are. I need to:\n1. Use the query tool to search for objects of type organization\n2. First, I should check what schemas are available to find the exact typename for organizations\n3. Then run the query to find all organizations\n4. Count and report how many were found\n\nLet me start by listing schemas to find the exact typename for organizations.","options":{}},{"type":"text","text":"I'll search for all organizations in the system. First, let me check the available schemas to find the exact typename for organizations.","options":{}},{"type":"tool-call","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","name":"list-schemas","params":{"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0158t3gYsV3zDgKzGcRWm3DG","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now I can search for all organizations using the correct typename:","options":{}},{"type":"tool-call","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","name":"query","params":{"typename":"dxos.org/type/Organization","includeContent":false,"limit":100},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01KPhYAj1sbAc3VhPK32vZGX","name":"query","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTBJ","typename":"dxos.org/type/Organization","label":"Acme Corp"},{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTBM","typename":"dxos.org/type/Organization","label":"Globex Industries"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_013Evu5LAHdvRF3QMJ1Qegu8","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Base","metadata":{}},{"type":"text-delta","id":"0","delta":"d on my","metadata":{}},{"type":"text-delta","id":"0","delta":" search","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" I found **","metadata":{}},{"type":"text-delta","id":"0","delta":"2 organizations** in the system","metadata":{}},{"type":"text-delta","id":"0","delta":":\n\n1.","metadata":{}},{"type":"text-delta","id":"0","delta":" Acme Corp\n2. Glob","metadata":{}},{"type":"text-delta","id":"0","delta":"ex Industries\n\nWoul","metadata":{}},{"type":"text-delta","id":"0","delta":"d you like me to loa","metadata":{}},{"type":"text-delta","id":"0","delta":"d more details about these organizations or search for","metadata":{}},{"type":"text-delta","id":"0","delta":" additional information","metadata":{}},{"type":"text-delta","id":"0","delta":"?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":51,"totalTokens":57},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":281},"cache_creation_input_tokens":281,"cache_read_input_tokens":9261,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTC9. What is its description?","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_011iQQLPCoeR9ye7vMf31F9G","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me to load the full details of a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" specific object using","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" its","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" D","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"XN identifier an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d then tell","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" them what","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" its description is. I need to use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the loa","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"object function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to retrieve","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the object's","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" data","metadata":{}},{"type":"reasoning-delta","id":"0","delta":".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EvMCCkYICxgCKkBghhKRuHeJhkzAOyeJIqdWQrwhuUUeuS4WpcGEEYjqLs06UinTTkYz2qck9t+47OBx3McdVfQglG6V3PazmdtLEgxKexTXv4PGarQywiwaDOILs7j0PpujFTx4ziIwEFnZZgOaPLO8O/89qXdcBI5d1XasrkhnwvpT9+Y05mHdBOVKEYgVgOygTrfd9ERbKtoBA5GsBt4e26Iyk1ybT3oBiZ2bKe2MeTX4R1ZChz/c+0XrLToiWDP4+TRaMNDe7Q1XWTLxGZ+O0MqHCxG8Dq58YUqUJtQumb5GdtrCMtMz1dM5oq+3oOfCl/DVdVjgWQ8tl/DJmc+47LhTUbFa/0aCho5IHLN3hyQmjVnl8IjLfxEkab1DkwORnDOzk3yPfPKSWjlQiU3Q5aoPo6TznCw5spQ9bf1qv/GdXLHGIms7S3TPjjKG8RKQWoqcmEaxJLnSQ0dGh2bsZCq16b/oTkO32bsZtcAy5kls5xcYAQ=="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll load the full details of that","metadata":{}},{"type":"text-delta","id":"1","delta":" object for you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_0171urn1gBXN3MgTGcAJkco3","name":"load-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"{\"r","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"efs\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":" [\"dxn:e","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"cho:BDJXMULP","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"W5FB","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"55UZ","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"7KP5HLDHVTX","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"UT","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"HE2U","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":":01JGFJJZ","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"00G0WKQSJGM","metadata":{}},{"type":"tool-params-delta","id":"toolu_0171urn1gBXN3MgTGcAJkco3","delta":"AKCNTC9\"]}","metadata":{}},{"type":"tool-params-end","id":"toolu_0171urn1gBXN3MgTGcAJkco3","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":174,"totalTokens":184},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6453},"cache_creation_input_tokens":6453,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTC9. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object using its DXN identifier and then tell them what its description is. I need to use the load-object function to retrieve the object's data.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_0171urn1gBXN3MgTGcAJkco3","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTC9"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0171urn1gBXN3MgTGcAJkco3","name":"load-object","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTC9","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTC9","description":"A detailed organization.","name":"Detail Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Lr1wyZWFEH35z9eksWxCTy","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Base","metadata":{}},{"type":"text-delta","id":"0","delta":"d on the loade","metadata":{}},{"type":"text-delta","id":"0","delta":"d object details, this","metadata":{}},{"type":"text-delta","id":"0","delta":" is an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" object with the following information","metadata":{}},{"type":"text-delta","id":"0","delta":":\n\n**Description:** \"","metadata":{}},{"type":"text-delta","id":"0","delta":"A detailed organization.\"\n\nThe object is","metadata":{}},{"type":"text-delta","id":"0","delta":" name","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Detail Corp\" and is","metadata":{}},{"type":"text-delta","id":"0","delta":" of","metadata":{}},{"type":"text-delta","id":"0","delta":" type `dxos","metadata":{}},{"type":"text-delta","id":"0","delta":".org/type/Organization:0","metadata":{}},{"type":"text-delta","id":"0","delta":".1.0`.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":59,"totalTokens":65},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6694},"cache_creation_input_tokens":6694,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_016pdzPcpBC6QZL42k8bj6bs","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"I need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. List","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" find the relation typename for","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" an Employer relation\n2. Create","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" relation","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" from","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" person \"John Connor\" to organization \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Cyberdyne Systems\" with role","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"Engineer\"\n\nFirst, let me","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" list the schemas to find the exact","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" typename for the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Employer relation.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"ErkDCkYICxgCKkCxVGDiUapxiBV/N0jKZxqnOobf1d/ulMk4AzAyWYCPLaf1NoL7YhLpSDePYUv93HXCBEjilBCGdousbzAmofUaEgwwMJhr/iODEB7BuP8aDGg6BEgPZmAeQG5tdCIwVwdUD5OithxdEa6NdhHxzKznqnIE+O3EmehZxQa9T9BruAbirnCoVLzYCqjK/OIzKqACQZyw8RaeEUSBvf4yJmEgoSJ99RXY7ml5U+OOCYtUkKr+AELC92uhw5q9MfKWbf0dxoDLKn9tyY90nPscmJtP4W9XGKE0B25ixYtR3B5k7YXdGrTOAM5+rKpsezNL/CaVwK9WmG1FtMe4iVNa1EnCZ5KFGJKQF9PBRXtwATanE2ERkukwHlcZSzn/Pt8OrDFXmdD+YD/BSHSMzuKG+tYBzI2Ykd21TgFcwbH5EcnAYK2g1+L4BaNdJwrJE4lgjG5hJF82cXfffqi6+AnXW9S0k6RkQt2EaQsEdWYE45kiJFoaKkV3Mhst9UMMY9tVB5WinpTNxVZ1WNiQGw8XTCnicClMoQjgHbuTh5ozylbRqppfyhxkNUG5TADKFYLOpEurGAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you create an Employer","metadata":{}},{"type":"text-delta","id":"1","delta":" relation between","metadata":{}},{"type":"text-delta","id":"1","delta":" John Connor and Cyberdyne Systems","metadata":{}},{"type":"text-delta","id":"1","delta":". Let me first list the schemas to","metadata":{}},{"type":"text-delta","id":"1","delta":" find the exact","metadata":{}},{"type":"text-delta","id":"1","delta":" typename","metadata":{}},{"type":"text-delta","id":"1","delta":" for the Employer relation.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_012319TCSRMvnRHR56YSDoCh","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_012319TCSRMvnRHR56YSDoCh","delta":"{\"limit\": 2","metadata":{}},{"type":"tool-params-delta","id":"toolu_012319TCSRMvnRHR56YSDoCh","delta":"0}","metadata":{}},{"type":"tool-params-end","id":"toolu_012319TCSRMvnRHR56YSDoCh","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":162,"totalTokens":172},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6420},"cache_creation_input_tokens":6420,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"I need to:\n1. List schemas to find the relation typename for an Employer relation\n2. Create the relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\"\n\nFirst, let me list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"text","text":"I'll help you create an Employer relation between John Connor and Cyberdyne Systems. Let me first list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01G6RALNzC53ZM9TUX4cUR1t","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d the","metadata":{}},{"type":"text-delta","id":"0","delta":" Employer","metadata":{}},{"type":"text-delta","id":"0","delta":" relation","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":". Now I","metadata":{}},{"type":"text-delta","id":"0","delta":" need to search","metadata":{}},{"type":"text-delta","id":"0","delta":" for the Person","metadata":{}},{"type":"text-delta","id":"0","delta":" \"","metadata":{}},{"type":"text-delta","id":"0","delta":"John","metadata":{}},{"type":"text-delta","id":"0","delta":" Connor","metadata":{}},{"type":"text-delta","id":"0","delta":"\" an","metadata":{}},{"type":"text-delta","id":"0","delta":"d the","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" \"Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"erdyne Systems\" to get","metadata":{}},{"type":"text-delta","id":"0","delta":" their IDs.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"{\"typename\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":": \"dx","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"os.o","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"rg/t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"ype/Pers","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"on\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":", \"te","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"xt\": \"John ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"Conn","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"or\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":", \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"inclu","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"deC","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"ontent\": t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"rue","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":", \"lim","metadata":{}},{"type":"tool-params-delta","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","delta":"it\": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":152,"totalTokens":158},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":9295},"cache_creation_input_tokens":9295,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"I need to:\n1. List schemas to find the relation typename for an Employer relation\n2. Create the relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\"\n\nFirst, let me list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"text","text":"I'll help you create an Employer relation between John Connor and Cyberdyne Systems. Let me first list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the Employer relation schema. Now I need to search for the Person \"John Connor\" and the Organization \"Cyberdyne Systems\" to get their IDs.","options":{}},{"type":"tool-call","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","params":{"typename":"dxos.org/type/Person","text":"John Connor","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTCT","@type":"dxn:type:dxos.org/type/Person:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTCT","fullName":"John Connor"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_015NTa5ijAJw9KRkPTQoRCB6","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Now","metadata":{}},{"type":"text-delta","id":"0","delta":" let me search for","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"{\"typenam","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"e\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"dxos.org/","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"type/Organiz","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"ation","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":", \"text\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":" \"Cy","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"berdyne Sys","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"tems\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":", \"includeCo","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"ntent\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"true","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":", \"l","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"imi","metadata":{}},{"type":"tool-params-delta","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","delta":"t\": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":128,"totalTokens":134},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":289},"cache_creation_input_tokens":289,"cache_read_input_tokens":9295,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"I need to:\n1. List schemas to find the relation typename for an Employer relation\n2. Create the relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\"\n\nFirst, let me list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"text","text":"I'll help you create an Employer relation between John Connor and Cyberdyne Systems. Let me first list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the Employer relation schema. Now I need to search for the Person \"John Connor\" and the Organization \"Cyberdyne Systems\" to get their IDs.","options":{}},{"type":"tool-call","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","params":{"typename":"dxos.org/type/Person","text":"John Connor","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTCT","@type":"dxn:type:dxos.org/type/Person:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTCT","fullName":"John Connor"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for Cyberdyne Systems:","options":{}},{"type":"tool-call","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","name":"query","params":{"typename":"dxos.org/type/Organization","text":"Cyberdyne Systems","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTCW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTCW","name":"Cyberdyne Systems"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_016VFgLTufS1UiaiGZWTPGjV","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect! I found both:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- John Connor (Person):","metadata":{}},{"type":"text-delta","id":"0","delta":" `","metadata":{}},{"type":"text-delta","id":"0","delta":"01","metadata":{}},{"type":"text-delta","id":"0","delta":"JGFJJZ00G","metadata":{}},{"type":"text-delta","id":"0","delta":"0WKQSJGM","metadata":{}},{"type":"text-delta","id":"0","delta":"AKCNTCT`\n- Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"erdyne Systems (Organization): `01","metadata":{}},{"type":"text-delta","id":"0","delta":"JGFJJZ00G","metadata":{}},{"type":"text-delta","id":"0","delta":"0WKQSJGM","metadata":{}},{"type":"text-delta","id":"0","delta":"AKCNTCW`\n\nNow I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" create the Employer relation with","metadata":{}},{"type":"text-delta","id":"0","delta":" the","metadata":{}},{"type":"text-delta","id":"0","delta":" role","metadata":{}},{"type":"text-delta","id":"0","delta":" \"Engineer","metadata":{}},{"type":"text-delta","id":"0","delta":"\":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","name":"create-relation","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"{\"typename\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"dxos.or","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"g/rel","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"ation/Emplo","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"yer\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":", \"sour","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"ce","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"\": \"0","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"1JGFJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"JZ00G","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"0WKQSJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"GMAKCN","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"TCT\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":", \"ta","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"rget","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"\": \"01J","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"GFJJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"Z0","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"0G","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"0WKQSJG","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"MAKCNTCW\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":", \"pro","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"pe","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"rties\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":": {\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"role\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"\"Engineer\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":",\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"active\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","delta":"true}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":251,"totalTokens":257},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":269},"cache_creation_input_tokens":269,"cache_read_input_tokens":9584,"input_tokens":6,"output_tokens":6,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"I need to:\n1. List schemas to find the relation typename for an Employer relation\n2. Create the relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\"\n\nFirst, let me list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"text","text":"I'll help you create an Employer relation between John Connor and Cyberdyne Systems. Let me first list the schemas to find the exact typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_012319TCSRMvnRHR56YSDoCh","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the Employer relation schema. Now I need to search for the Person \"John Connor\" and the Organization \"Cyberdyne Systems\" to get their IDs.","options":{}},{"type":"tool-call","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","params":{"typename":"dxos.org/type/Person","text":"John Connor","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01XiZTxNUnDX7foVMEHxfgd2","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTCT","@type":"dxn:type:dxos.org/type/Person:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTCT","fullName":"John Connor"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for Cyberdyne Systems:","options":{}},{"type":"tool-call","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","name":"query","params":{"typename":"dxos.org/type/Organization","text":"Cyberdyne Systems","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01GPuQPv6LwfqE7ozjRYjUWz","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTCW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTCW","name":"Cyberdyne Systems"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found both:\n- John Connor (Person): `01JGFJJZ00G0WKQSJGMAKCNTCT`\n- Cyberdyne Systems (Organization): `01JGFJJZ00G0WKQSJGMAKCNTCW`\n\nNow I'll create the Employer relation with the role \"Engineer\":","options":{}},{"type":"tool-call","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","name":"create-relation","params":{"typename":"dxos.org/relation/Employer","source":"01JGFJJZ00G0WKQSJGMAKCNTCT","target":"01JGFJJZ00G0WKQSJGMAKCNTCW","properties":{"role":"Engineer","active":true}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01SgQYqLogP2JwU8PGpdttJW","name":"create-relation","isFailure":false,"result":{"id":"01JGFJJZ00G0WKQSJGMAKCNTDF","@type":"dxn:type:dxos.org/relation/Employer:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTDF","@relationSource":"dxn:echo:@:01JGFJJZ00G0WKQSJGMAKCNTCT","@relationTarget":"dxn:echo:@:01JGFJJZ00G0WKQSJGMAKCNTCW","active":true,"role":"Engineer"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_019k6cZJB6fhKKrpsnKivcod","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Excellent! I've successfully created an","metadata":{}},{"type":"text-delta","id":"0","delta":" Employer relation between","metadata":{}},{"type":"text-delta","id":"0","delta":" John Connor and Cyberdyne Systems","metadata":{}},{"type":"text-delta","id":"0","delta":" with the role \"Engineer\". The relation","metadata":{}},{"type":"text-delta","id":"0","delta":" has","metadata":{}},{"type":"text-delta","id":"0","delta":" been create","metadata":{}},{"type":"text-delta","id":"0","delta":"d with:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n- **","metadata":{}},{"type":"text-delta","id":"0","delta":"Relation ID**: `01JG","metadata":{}},{"type":"text-delta","id":"0","delta":"FJJZ00G0W","metadata":{}},{"type":"text-delta","id":"0","delta":"KQSJGMAKCNTDF","metadata":{}},{"type":"text-delta","id":"0","delta":"`\n- **Source**: John Connor","metadata":{}},{"type":"text-delta","id":"0","delta":" (","metadata":{}},{"type":"text-delta","id":"0","delta":"Person)","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Target**: Cyber","metadata":{}},{"type":"text-delta","id":"0","delta":"dyne Systems (Organization)  \n-","metadata":{}},{"type":"text-delta","id":"0","delta":" **Role**: Engineer\n- **Active","metadata":{}},{"type":"text-delta","id":"0","delta":"**: true (","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":" also","metadata":{}},{"type":"text-delta","id":"0","delta":" set","metadata":{}},{"type":"text-delta","id":"0","delta":" the active status","metadata":{}},{"type":"text-delta","id":"0","delta":" to true,","metadata":{}},{"type":"text-delta","id":"0","delta":" indicating","metadata":{}},{"type":"text-delta","id":"0","delta":" this","metadata":{}},{"type":"text-delta","id":"0","delta":" is a","metadata":{}},{"type":"text-delta","id":"0","delta":" current employment","metadata":{}},{"type":"text-delta","id":"0","delta":" relationship)\n\nThe relation is now establishe","metadata":{}},{"type":"text-delta","id":"0","delta":"d in","metadata":{}},{"type":"text-delta","id":"0","delta":" the system","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" linking","metadata":{}},{"type":"text-delta","id":"0","delta":" John Connor as","metadata":{}},{"type":"text-delta","id":"0","delta":" an Engineer at Cyberdyne Systems","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":142,"totalTokens":148},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":451},"cache_creation_input_tokens":451,"cache_read_input_tokens":9853,"input_tokens":6,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the relation dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTDZ.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01AGjrv2Lcy8588UrENfqhqR","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me to delete a relation with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" D","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"XN `","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"dxn:echo:B","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"DJXMULPW5FB","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"55UZ7KP5","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"HLDHVTXUTHE2","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"U:01JGFJJ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Z00G0WKQ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"SJGMAKCNTDZ`.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \n\nI","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to use the `delete-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"relation` function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" which takes","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" `","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"rel","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"`","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" parameter that","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" accepts","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" relation ID","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"/","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"D","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"XN. The user has","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" provided the exact","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" DXN,","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" so I should use it exactly as provide","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EuEDCkYICxgCKkD5u1pRdMrQjIFwNjjwyK+87CLnuEt1CPaJZv16bta9rT+wwod+tXl+Ql3lM/hv0M2eGCdg0ED6xIxvnoGFUkvEEgw5wCZoq4ZrBC0SpIsaDJdlI1khKL/z5AxbpiIw4AaVkoFv4KexV5HyMohBmfEVhDBjI6dZf5c4/hGL1i6cz2LdofbAmHyePyBAGc8RKsgCe0ysDjm4+AuA8FNkl+YnTGdPM75sxU/55OTXqdzQK2XiEdzHt1ev0JhQEsFw+oCvGXwo7QRY2U5Lqxw+T+8tKusJ+ullGX1i54haHjX+XDOgVL0LNx/oj6BICLBNQShMIcDJIOvNrR2MmvBUNFrbw/Fr0zP1Hq+vhDM3mnyUUCgIwy4xBMiGQkYrjsvGGSbLljdQ0J01iZz9ffyMi2bgBdjuNo10zHOB6qai8CjQslRiIZ0gYb33le4ACTyHsm0UiXC9PTMD+z2ZSbEWkklAqGo4lOQ/1h9e4gwsy7SE+nJZf1QF7TNsH0zidWTJr3vRo5bJc1F3oEhCilHTKk5LYVYYf+3pSiWEhP9j1GPFhb4QIMMW4xFr7Ie4ZdL67X5QDu2chKdt9tXHDH6Nyh9VsSp5oVM1C88icbezfdhnWU/eYpgpK8MNSxgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll delete that","metadata":{}},{"type":"text-delta","id":"1","delta":" relation for you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_018eYvHyZyxKRemz4LWE36VX","name":"delete-relation","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"rel\": \"dxn","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":":echo:BDJXM","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"ULPW5FB55UZ7","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"KP5HLDHVTXU","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"THE2U:01JGF","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"JJZ00G0WKQ","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"SJG","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"MAKCNT","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"DZ","metadata":{}},{"type":"tool-params-delta","id":"toolu_018eYvHyZyxKRemz4LWE36VX","delta":"\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_018eYvHyZyxKRemz4LWE36VX","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":243,"totalTokens":253},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6445},"cache_creation_input_tokens":6445,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the relation dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTDZ.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to delete a relation with the DXN `dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTDZ`. \n\nI need to use the `delete-relation` function which takes a `rel` parameter that accepts the relation ID/DXN. The user has provided the exact DXN, so I should use it exactly as provided.","options":{}},{"type":"text","text":"I'll delete that relation for you.","options":{}},{"type":"tool-call","id":"toolu_018eYvHyZyxKRemz4LWE36VX","name":"delete-relation","params":{"rel":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTDZ"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_018eYvHyZyxKRemz4LWE36VX","name":"delete-relation","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01YbEcMhMTr5ttZo5aTNkrhp","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The relation has been successfully deleted.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":10,"totalTokens":15},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6548},"cache_creation_input_tokens":6548,"cache_read_input_tokens":0,"input_tokens":5,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_015YtMbmzA3u5rKwTDsDhBJL","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" add a tag calle","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"important\" to an organization called \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Tagged Corp\". ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nFirst","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", I need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. Search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for the organization \"Tagged Corp\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for or","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" create the tag \"important\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" (","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"tags","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" are objects","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" of","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" type ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"dxos.org/type","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"/Tag","metadata":{}},{"type":"reasoning-delta","id":"0","delta":")\n3. Use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the add-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"tag function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to add the tag to the organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nLet me start by searching for the organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EoQECkYICxgCKkCRfPONTnaw+0OyPxfYZnJ28/EibDzj44E6HGldl39IMSS28eIBWaOVJR92aj4VzwmFnwJM+ISyeU1T/2SM/8i8Egx7BnJGk3sAr7x85DMaDNJDLkAc73OspKhvmSIwtwjOkQq1eAy1XpvA+Ru5zTDZSlvNJL/9SshYPvCazDmYhIhJQSEs8Lb7e+T28TELKusCCLJPKgQ/kCMjhqK+6FP+myVMtD2cZX9XZzmQvgHSeAL78hr+V9gyA9ikOheqy55kZDBDeIxtJlp+ag6pR+CsXX/L2f9UjIR3jLBNgWFmWJl95qi9N3UnJzFCpfVTYaR+ErapK8CqsV303bFkHOEv0T/rMO0/2acEm9uwUujmPS9JDAPgYppBPWD/8oOsTg+yZZN3YmDZhxgZ36JYDrmRGtkucNsNOZp20BSDG5oM8nAXEtv4nplPePWK+unVxXg7iXXoXhiOam9hm9C178lY+BqawAfTbCjBSj70P9n8s992L2kXdBBp2i1lXWXEaKzrTKWNxtJ+LzPJbSwQXYpMNF8zNp5pSOqBuVPM0V08batAOaVTwSoXcrpD01b8VpQWzLDpir/KkO3DZsk7mvyrYgvVdlDsId/8PQnV/8SSYI8furiDGuLEwfFuiRvlbmrAbFktSUwtVxHjztNTpBGg888eRfMujpj7qM45GAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help","metadata":{}},{"type":"text-delta","id":"1","delta":" you add the \"important\" tag to","metadata":{}},{"type":"text-delta","id":"1","delta":" the","metadata":{}},{"type":"text-delta","id":"1","delta":" organization \"Tagged Corp\". Let me first","metadata":{}},{"type":"text-delta","id":"1","delta":" search for the organization.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"{\"text\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"Tagged ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"Corp","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":", \"i","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"ncl","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"udeConte","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":"nt\": true","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","delta":", \"limit\": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":214,"totalTokens":224},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6398},"cache_creation_input_tokens":6398,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag called \"important\" to an organization called \"Tagged Corp\". \n\nFirst, I need to:\n1. Search for the organization \"Tagged Corp\"\n2. Search for or create the tag \"important\" (tags are objects of type dxos.org/type/Tag)\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to the organization \"Tagged Corp\". Let me first search for the organization.","options":{}},{"type":"tool-call","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTEG","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEG","name":"Tagged Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_018H4bMtjDH5h9fJMkBFGNqj","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Now","metadata":{}},{"type":"text-delta","id":"0","delta":" let","metadata":{}},{"type":"text-delta","id":"0","delta":" me search","metadata":{}},{"type":"text-delta","id":"0","delta":" for existing","metadata":{}},{"type":"text-delta","id":"0","delta":" tags to","metadata":{}},{"type":"text-delta","id":"0","delta":" fin","metadata":{}},{"type":"text-delta","id":"0","delta":"d the \"","metadata":{}},{"type":"text-delta","id":"0","delta":"important\" tag.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_012veRE7HQR1QDB9CBUppnxy","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"{\"typename","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"\": \"d","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"xos.org","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"/type/Tag\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":", \"text\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"impor","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"tant\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":", \"i","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"ncludeConten","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"t\": tru","metadata":{}},{"type":"tool-params-delta","id":"toolu_012veRE7HQR1QDB9CBUppnxy","delta":"e}","metadata":{}},{"type":"tool-params-end","id":"toolu_012veRE7HQR1QDB9CBUppnxy","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":111,"totalTokens":117},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6622},"cache_creation_input_tokens":6622,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag called \"important\" to an organization called \"Tagged Corp\". \n\nFirst, I need to:\n1. Search for the organization \"Tagged Corp\"\n2. Search for or create the tag \"important\" (tags are objects of type dxos.org/type/Tag)\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to the organization \"Tagged Corp\". Let me first search for the organization.","options":{}},{"type":"tool-call","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTEG","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEG","name":"Tagged Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for existing tags to find the \"important\" tag.","options":{}},{"type":"tool-call","id":"toolu_012veRE7HQR1QDB9CBUppnxy","name":"query","params":{"typename":"dxos.org/type/Tag","text":"important","includeContent":true},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_012veRE7HQR1QDB9CBUppnxy","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTEJ","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEJ","label":"important"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Mc7nWxeLwj82Writf4oMpU","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d both","metadata":{}},{"type":"text-delta","id":"0","delta":" the organization \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Tagged Corp\" and the \"important\"","metadata":{}},{"type":"text-delta","id":"0","delta":" tag. Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I'll add the tag","metadata":{}},{"type":"text-delta","id":"0","delta":" to the organization.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","name":"add-tag","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"{\"obj\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"01J","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"GFJJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"Z00G","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"0WKQS","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"JGMA","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"KCNTEG\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":", \"tag\": \"0","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"1JGFJJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"Z00G","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"0WKQSJGMAKC","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"NT","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","delta":"EJ\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":137,"totalTokens":143},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":246},"cache_creation_input_tokens":246,"cache_read_input_tokens":6622,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag called \"important\" to an organization called \"Tagged Corp\". \n\nFirst, I need to:\n1. Search for the organization \"Tagged Corp\"\n2. Search for or create the tag \"important\" (tags are objects of type dxos.org/type/Tag)\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to the organization \"Tagged Corp\". Let me first search for the organization.","options":{}},{"type":"tool-call","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01MTvvnfRoXA81SmKp7pUNWr","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTEG","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEG","name":"Tagged Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for existing tags to find the \"important\" tag.","options":{}},{"type":"tool-call","id":"toolu_012veRE7HQR1QDB9CBUppnxy","name":"query","params":{"typename":"dxos.org/type/Tag","text":"important","includeContent":true},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_012veRE7HQR1QDB9CBUppnxy","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTEJ","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEJ","label":"important"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found both the organization \"Tagged Corp\" and the \"important\" tag. Now I'll add the tag to the organization.","options":{}},{"type":"tool-call","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","name":"add-tag","params":{"obj":"01JGFJJZ00G0WKQSJGMAKCNTEG","tag":"01JGFJJZ00G0WKQSJGMAKCNTEJ"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01Ff2xkddeawm7s8XAHgjazK","name":"add-tag","isFailure":false,"result":{"id":"01JGFJJZ00G0WKQSJGMAKCNTEG","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[],"tags":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEJ"]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTEG","name":"Tagged Corp"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01RBD3Kdd2CMJw9pJxPhEygx","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I've successfully added the \"","metadata":{}},{"type":"text-delta","id":"0","delta":"important\" tag to the organization \"Tagge","metadata":{}},{"type":"text-delta","id":"0","delta":"d Corp\". The tag has been applie","metadata":{}},{"type":"text-delta","id":"0","delta":"d an","metadata":{}},{"type":"text-delta","id":"0","delta":"d you","metadata":{}},{"type":"text-delta","id":"0","delta":" can see it in the organization's metadata","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":37,"totalTokens":43},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":331},"cache_creation_input_tokens":331,"cache_read_input_tokens":6868,"input_tokens":6,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Remove tag \"obsolete\" from the organization \"Untagged Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01JoL6UcXFo96S4yooV3dTZi","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" remove a tag calle","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"obsolete\" from an organization calle","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"Untagged Corp\". To","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" do this, I need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\n1. First, fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Untagged Corp\" ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Find the tag object \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"obsolete\"\n3. Use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the remove-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"tag function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to remove the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" tag from the organization\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" by searching for the organization.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"Eu0DCkYICxgCKkBBXtm9H9jpxZqua/seP0HYpGNguIMpSB0dVacvVVIH/NT+heE9DzajMC7f0wAPX33QvxdkyxZYoM7J/tFx0LhXEgyWv3NZoePMW1jQwP8aDM21bUwx9NWZrkxSkiIw+QBM7KF2vRY6RybGPEVjQLGQGYushlX2nMjwF14T+avugSKLBFb4OpS6vCKHIWWbKtQCUC/TO55w5jIqQvR7rr+ZdeBGnoESK2xueErakee4I/HQjfAgEe9mxIMRo/aNHWFYCl0pvMmgMDH9yLh8xLdreUAEAd1ipuEZ+nRI6TUGLiO3FT4FCJQI/Ob3HsQBr64IlkC8t0R0a5YEqjbbDfD71O8fljsgSdGlrqG5uR/GuyGEDhCXmUMreKNIlPCh5rvNE4eixcy0FLxhPWRA8aWdt4EztVfaYjZi6vWh7Hx9mVYd0+d9QYba4v0T8sCQI9I4mkDzeOh8vS5K4G3Fd6ZHW3nwpfLjJO5fEAhgUOOyGl9KjcOeT0qKvyR5dszg2z7gnsC48iAHA1NlDhaxopLDkBziZjdxBIz9dK3CToShegOv8O6ZdTFzTAJZMacRvDl8ET+wuzenQBKKhQhHEXu8kvGOd6hS4A+AdixvMhIodEsr3eNKG+FzZXPvp4787ti4CjwnlBgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you remove the \"obsol","metadata":{}},{"type":"text-delta","id":"1","delta":"ete\" tag from \"Untag","metadata":{}},{"type":"text-delta","id":"1","delta":"ged Corp\". Let me first fin","metadata":{}},{"type":"text-delta","id":"1","delta":"d both","metadata":{}},{"type":"text-delta","id":"1","delta":" the organization and the tag.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"{\"te","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"xt\": \"U","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"ntagge","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"d Corp\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":", \"inc","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"ludeCon","metadata":{}},{"type":"tool-params-delta","id":"toolu_011e8rnhfLPE18nFtDZQVApk","delta":"tent\": false}","metadata":{}},{"type":"tool-params-end","id":"toolu_011e8rnhfLPE18nFtDZQVApk","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":198,"totalTokens":208},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":0},"cache_creation_input_tokens":0,"cache_read_input_tokens":6402,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Remove tag \"obsolete\" from the organization \"Untagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to remove a tag called \"obsolete\" from an organization called \"Untagged Corp\". To do this, I need to:\n\n1. First, find the organization object \"Untagged Corp\" \n2. Find the tag object \"obsolete\"\n3. Use the remove-tag function to remove the tag from the organization\n\nLet me start by searching for the organization.","options":{}},{"type":"text","text":"I'll help you remove the \"obsolete\" tag from \"Untagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","params":{"text":"Untagged Corp","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFB","typename":"dxos.org/type/Organization","label":"Untagged Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01TEbrzsQfJrKQxfcYxGqcmz","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Now","metadata":{}},{"type":"text-delta","id":"0","delta":" let me search","metadata":{}},{"type":"text-delta","id":"0","delta":" for the \"","metadata":{}},{"type":"text-delta","id":"0","delta":"obsolete\" tag:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"{\"typename\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":" \"dxos.org","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"/type/Ta","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"g\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":", \"text\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"\"obsolet","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"e\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":", \"incl","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"udeCo","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"nten","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":"t\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","delta":": true}","metadata":{}},{"type":"tool-params-end","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":109,"totalTokens":115},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6575},"cache_creation_input_tokens":6575,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Remove tag \"obsolete\" from the organization \"Untagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to remove a tag called \"obsolete\" from an organization called \"Untagged Corp\". To do this, I need to:\n\n1. First, find the organization object \"Untagged Corp\" \n2. Find the tag object \"obsolete\"\n3. Use the remove-tag function to remove the tag from the organization\n\nLet me start by searching for the organization.","options":{}},{"type":"text","text":"I'll help you remove the \"obsolete\" tag from \"Untagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","params":{"text":"Untagged Corp","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFB","typename":"dxos.org/type/Organization","label":"Untagged Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for the \"obsolete\" tag:","options":{}},{"type":"tool-call","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","name":"query","params":{"typename":"dxos.org/type/Tag","text":"obsolete","includeContent":true},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTFD","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFD","label":"obsolete"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01LHK36k5FdY4E8MiSPTZF8n","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I found both the organization \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Untagged Corp\" and the","metadata":{}},{"type":"text-delta","id":"0","delta":" \"","metadata":{}},{"type":"text-delta","id":"0","delta":"obsolete\" tag. Now I'll","metadata":{}},{"type":"text-delta","id":"0","delta":" remove the tag","metadata":{}},{"type":"text-delta","id":"0","delta":" from the organization:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_016ionPyCSmLw6kLQEFBovNY","name":"remove-tag","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"{\"obj\": \"dx","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"n:echo:BDJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"XMULPW5FB","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"55UZ7KP5","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"HL","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"DH","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"VTXUTHE2U:01","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"JGF","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"JJZ00G0","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"WK","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"QSJGMAK","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"CNTFB\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":", \"t","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"ag","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"\"d","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"xn","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":":echo:","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"BDJXMULPW5","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"FB55UZ7KP","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"5HLDHVTXUTHE","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"2U:01J","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"GFJJZ0","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"0G0W","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"KQ","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"SJGMA","metadata":{}},{"type":"tool-params-delta","id":"toolu_016ionPyCSmLw6kLQEFBovNY","delta":"KCNTFD\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_016ionPyCSmLw6kLQEFBovNY","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":210,"totalTokens":216},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":245},"cache_creation_input_tokens":245,"cache_read_input_tokens":6575,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Remove tag \"obsolete\" from the organization \"Untagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to remove a tag called \"obsolete\" from an organization called \"Untagged Corp\". To do this, I need to:\n\n1. First, find the organization object \"Untagged Corp\" \n2. Find the tag object \"obsolete\"\n3. Use the remove-tag function to remove the tag from the organization\n\nLet me start by searching for the organization.","options":{}},{"type":"text","text":"I'll help you remove the \"obsolete\" tag from \"Untagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","params":{"text":"Untagged Corp","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011e8rnhfLPE18nFtDZQVApk","name":"query","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFB","typename":"dxos.org/type/Organization","label":"Untagged Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for the \"obsolete\" tag:","options":{}},{"type":"tool-call","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","name":"query","params":{"typename":"dxos.org/type/Tag","text":"obsolete","includeContent":true},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CsCfAaXhbtZnL1paKkGuQX","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTFD","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFD","label":"obsolete"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found both the organization \"Untagged Corp\" and the \"obsolete\" tag. Now I'll remove the tag from the organization:","options":{}},{"type":"tool-call","id":"toolu_016ionPyCSmLw6kLQEFBovNY","name":"remove-tag","params":{"obj":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFB","tag":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFD"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_016ionPyCSmLw6kLQEFBovNY","name":"remove-tag","isFailure":false,"result":{"id":"01JGFJJZ00G0WKQSJGMAKCNTFB","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[],"tags":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTFB","name":"Untagged Corp"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_012m2G5azkbriNfLHSRyrwum","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Successfully","metadata":{}},{"type":"text-delta","id":"0","delta":" removed the \"obsolete\" tag from","metadata":{}},{"type":"text-delta","id":"0","delta":" \"Untagged Corp\"","metadata":{}},{"type":"text-delta","id":"0","delta":"! The organization now has no","metadata":{}},{"type":"text-delta","id":"0","delta":" tags associate","metadata":{}},{"type":"text-delta","id":"0","delta":"d with it.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":30,"totalTokens":36},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":354},"cache_creation_input_tokens":354,"cache_read_input_tokens":6820,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add the organization \"Context Corp\" to the chat context.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01TVviiTr5EfkfMcqSPZ15us","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants me to add an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization calle","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"Context Corp\" to the chat context","metadata":{}},{"type":"reasoning-delta","id":"0","delta":". To","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" do this, I need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\n1. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" check if \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Context Corp\" already","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" exists in the database","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. If it doesn't exist","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", create","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" it as an organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n3. Then","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" add it to the chat context\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start by searching","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for existing","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organizations with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the name \"Context Corp\".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EoMECkYICxgCKkBMnhjsw2dIuiHBP7DOvVk8xnj58tycFn5W/fuQsyb0CV5vv7DmktOlytjXUAin5UPKOOVfTBvAsBehQvn4tPSjEgzUvbFx0/8uPZuZ/RwaDNxotVyjgEsSqsFd1CIw1v5SKIdxv84rdW6FXsEoxxwa85uYftkjv+7/STDiVzDs7sU0MiMmo8ZIgKpPRuJKKuoC3utTtH3Foblxuc7ekerdbwr5N9TcoApHWKZrfR68E5Wnr+RkPXKcO+S0/T9dp0SXsBGRU0CUXVOhM/hBahH5LVrk82XQZS15gNWU2HRULwcH2bZ12Kvbn2zUwjEMdwhW4WEqzuaHZBrPxqgLOMdfwatuDufppGiwmygQ9ks7I6z9cIPWLmEnUSrDgJ3Cz3bGeSYBKF9JhALsD3JvoF/Jh8FWWAJb8IG8NtxrpkpKoZ2az32w63Og1p2mkL1dqTozv+vI7HLNqEKWXcf+1Ir0FwZ3r+2SKoA8uTS1Ce6v+GzhLaYsn++2b4ZNhCeuhlf0GIi0Z2+whZElETZAt8VH5DlPXanu6Gdw+mYWLf6RwXBo9ev04ffwn7qAQrLoZAmZB4rCfHgk2gEU4H7jSuD4zMENeDHngngnLkFY2evc7GjDDRkRfpWeS6Dtnqut2YR7XsHR+R4woxLBpzpockRj4cOIkspxM7G/fgsYAQ=="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll","metadata":{}},{"type":"text-delta","id":"1","delta":" search","metadata":{}},{"type":"text-delta","id":"1","delta":" for \"","metadata":{}},{"type":"text-delta","id":"1","delta":"Context Corp\" to","metadata":{}},{"type":"text-delta","id":"1","delta":" see if it already exists,","metadata":{}},{"type":"text-delta","id":"1","delta":" and then","metadata":{}},{"type":"text-delta","id":"1","delta":" add it to the chat context.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_0177smwbJvwftn7kBN3onWDL","name":"query","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"text\": \"C","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"ontext C","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"orp\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":", \"includeCo","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"ntent\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":": true","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":", \"lim","metadata":{}},{"type":"tool-params-delta","id":"toolu_0177smwbJvwftn7kBN3onWDL","delta":"it\": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_0177smwbJvwftn7kBN3onWDL","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":203,"totalTokens":213},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6398},"cache_creation_input_tokens":6398,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":7,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add the organization \"Context Corp\" to the chat context.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add an organization called \"Context Corp\" to the chat context. To do this, I need to:\n\n1. First check if \"Context Corp\" already exists in the database\n2. If it doesn't exist, create it as an organization object\n3. Then add it to the chat context\n\nLet me start by searching for existing organizations with the name \"Context Corp\".","options":{}},{"type":"text","text":"I'll search for \"Context Corp\" to see if it already exists, and then add it to the chat context.","options":{}},{"type":"tool-call","id":"toolu_0177smwbJvwftn7kBN3onWDL","name":"query","params":{"text":"Context Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0177smwbJvwftn7kBN3onWDL","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTG1","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTG1","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01JGFJJZ00G0WKQSJGMAKCNTG2","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTG2","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01JGFJJZ00G0WKQSJGMAKCNTG1"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01JGFJJZ00G0WKQSJGMAKCNTG6","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTG6","name":"Context Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01HEzVJVgG8vv5vZKqUrtnT9","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great","metadata":{}},{"type":"text-delta","id":"0","delta":"! I foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d the organization","metadata":{}},{"type":"text-delta","id":"0","delta":" \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Context Corp\" in the database","metadata":{}},{"type":"text-delta","id":"0","delta":". I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d it to the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context now.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","name":"add-to-context","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","delta":"{\"ob","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","delta":"j\": \"01JGF","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","delta":"JJZ00G","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","delta":"0WKQSJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","delta":"GMAKCNTG6\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":100,"totalTokens":106},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":7865},"cache_creation_input_tokens":7865,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add the organization \"Context Corp\" to the chat context.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add an organization called \"Context Corp\" to the chat context. To do this, I need to:\n\n1. First check if \"Context Corp\" already exists in the database\n2. If it doesn't exist, create it as an organization object\n3. Then add it to the chat context\n\nLet me start by searching for existing organizations with the name \"Context Corp\".","options":{}},{"type":"text","text":"I'll search for \"Context Corp\" to see if it already exists, and then add it to the chat context.","options":{}},{"type":"tool-call","id":"toolu_0177smwbJvwftn7kBN3onWDL","name":"query","params":{"text":"Context Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0177smwbJvwftn7kBN3onWDL","name":"query","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTG1","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTG1","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01JGFJJZ00G0WKQSJGMAKCNTG2","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTG2","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01JGFJJZ00G0WKQSJGMAKCNTG1"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01JGFJJZ00G0WKQSJGMAKCNTG6","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTG6","name":"Context Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the organization \"Context Corp\" in the database. I'll add it to the chat context now.","options":{}},{"type":"tool-call","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","name":"add-to-context","params":{"obj":"01JGFJJZ00G0WKQSJGMAKCNTG6"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01A7WqitqDxFSNBWsh6CGNhu","name":"add-to-context","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_0177qp75CoQ11igejDAAxyFU","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve successfully added \"Context Corp\" to","metadata":{}},{"type":"text-delta","id":"0","delta":" the chat context. This","metadata":{}},{"type":"text-delta","id":"0","delta":" organization is now available for reference","metadata":{}},{"type":"text-delta","id":"0","delta":" throughout","metadata":{}},{"type":"text-delta","id":"0","delta":" our conversation.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":27,"totalTokens":32},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":113},"cache_creation_input_tokens":113,"cache_read_input_tokens":7865,"input_tokens":5,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>\n\n## Context Objects\n\n<object>\n  <dxn>dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW</dxn>\n  <typename>dxos.org/type/Organization</typename>\n</object>","options":{}},{"role":"user","content":"Remove the organization \"Remove Context Corp\" from the chat context.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01CudLCWoMTxLJUXxkvRqE8E","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants me to remove an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization called \"Remove Context Corp\" from","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the chat context. I can","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" see there","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"'s currently","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" one","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization in the context with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" D","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"XN `","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"dxn:echo:B","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"DJXMULPW5FB","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"55UZ7KP5","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"HLDHVTXUTHE2","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"U:01JGFJJ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Z00G0WKQ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"SJGMAKCNTGW`","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" and typename `dxos.org","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"/type/Organization`.\n\nHowever","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" don't know","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" what the name","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" of this organization is","metadata":{}},{"type":"reasoning-delta","id":"0","delta":". I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" shoul","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d first","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" loa","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d this","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to check","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" if","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" it","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"'s","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" indee","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"Remove Context Corp\" before","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" removing it.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EuAECkYICxgCKkDOOnF5CtP9Fm/11OqPZG4ATY5jBPBoPFHbyRj8IXKdE0lRPcHaOTcXUIG2aMfNS7PMVbV81L6Su9anrPuAm5N1EgwVr9NmO2uLBeTZyUoaDPg9XfMs/NhxIx8hMyIwFrXYyYGBhj5gql6YyjIHIFLOPXFAZKKImvXXE1tPaBZxT+2e/EHSrFvnZMX1ctfHKscD04sbKwQX4jnrfqyhqRQwV1dMvnx6iy7gbrfaDYeLjzwE0v8+NwDtaLsE4LM5PDZlS8RqUIWGjHu8tUSxQXsexLjKvWU9J3vC+FKCUN9jL9ix31zAEXmmvhEJiBpKlW9tyjUt/dTMMdCv3ys9lhsjLutPmkkl7RBMJShz9uSjyFrpstOIX07YU7VdiX0PvlhTdQlxM/XkdFNyOOVQhIfyU5bV0hN2zS5wDKi77O9jW0l8x/Y7HEqIV7eWOj9y+1sDZOBVhkfGBl82iE1HJen4SZ/oAOOdKlAFFzLAxxEyso8LBrwGhzn2FVVR7TULPq0F6dCl54LdB+BhdgldrouOglGT7ANMHvb4RDw9ZualAHpLel7EL/h/k/CabU6fdPEZCI4MJZmoS+tW40lslngsulmTr4tfQsCj8Eke/9rPGEZuoKeyiGL3DPYw66ypcX6XQYOm5ZBf5GGLVVk2TQeq8eQOFqLkG24trgoRl3PmFLKW1M4jxkYQJmdPScThQKLRmjyogFpj9qfhiDiaMlRDlLx8HIsV5Df47WhU3pJVIrJlVYZlwO6eCLYa4eOuEIGqXGoMrGQYgav8pOccNoAN39VYF75U4VgYAQ=="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll first","metadata":{}},{"type":"text-delta","id":"1","delta":" check","metadata":{}},{"type":"text-delta","id":"1","delta":" what","metadata":{}},{"type":"text-delta","id":"1","delta":" organization is currently in the chat context before","metadata":{}},{"type":"text-delta","id":"1","delta":" removing it.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","name":"load-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"{\"re","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"fs\": [","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"\"dxn:echo:","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"BDJXMULPW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"5FB5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"5UZ7","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"KP5HL","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"DHVTXUTHE2","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"U:01JGFJJZ00","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"G0WKQSJGMAK","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"CNTGW\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","delta":"]}","metadata":{}},{"type":"tool-params-end","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":274,"totalTokens":284},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6495},"cache_creation_input_tokens":6495,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":7,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>\n\n## Context Objects\n\n<object>\n  <dxn>dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW</dxn>\n  <typename>dxos.org/type/Organization</typename>\n</object>","options":{}},{"role":"user","content":"Remove the organization \"Remove Context Corp\" from the chat context.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to remove an organization called \"Remove Context Corp\" from the chat context. I can see there's currently one organization in the context with DXN `dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW` and typename `dxos.org/type/Organization`.\n\nHowever, I don't know what the name of this organization is. I should first load this object to check if it's indeed \"Remove Context Corp\" before removing it.","options":{}},{"type":"text","text":"I'll first check what organization is currently in the chat context before removing it.","options":{}},{"type":"tool-call","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","name":"load-object","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTGW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW","name":"Remove Context Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01MmUPKhk97mtFp8oJh5Zbe9","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I can see that the","metadata":{}},{"type":"text-delta","id":"0","delta":" organization in","metadata":{}},{"type":"text-delta","id":"0","delta":" the chat context is indee","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Remove Context Corp\". I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll now remove it","metadata":{}},{"type":"text-delta","id":"0","delta":" from the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_017piERpq6eD6xcN7QB852Gk","name":"remove-from-context","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"{\"obj\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"\"dx","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"n:echo:BDJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"XMULPW5FB55","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"UZ7KP5HLDH","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"VTX","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"UTHE2U:","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"01JG","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"FJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"JZ00G0WKQSJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_017piERpq6eD6xcN7QB852Gk","delta":"GMAKCNTGW\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_017piERpq6eD6xcN7QB852Gk","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":139,"totalTokens":145},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6734},"cache_creation_input_tokens":6734,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["obj"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["obj","properties"],"properties":{"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"query","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10},"includeQueues":{"type":"boolean","description":"Search in queues as well as spaces. Only use this if searching for emails.","default":false}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","properties"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["rel"],"properties":{"rel":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.\nYou must search database for available tags, or create a new one.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tag","obj"],"properties":{"tag":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"obj":{"type":"string","description":"The ID of the referenced object. Formats accepted:\n- DXN (dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4). DXNs can be prepended with an @ symbol for compatibility with in-text references.\n- space ID, object ID tuple (spaceID:objectID)\n- Only object ID that is assumed to be in the current space (01KG7R1ZXWFMWQ4DA1Q6TN1DG4)","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>\n\n## Context Objects\n\n<object>\n  <dxn>dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW</dxn>\n  <typename>dxos.org/type/Organization</typename>\n</object>","options":{}},{"role":"user","content":"Remove the organization \"Remove Context Corp\" from the chat context.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to remove an organization called \"Remove Context Corp\" from the chat context. I can see there's currently one organization in the context with DXN `dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW` and typename `dxos.org/type/Organization`.\n\nHowever, I don't know what the name of this organization is. I should first load this object to check if it's indeed \"Remove Context Corp\" before removing it.","options":{}},{"type":"text","text":"I'll first check what organization is currently in the chat context before removing it.","options":{}},{"type":"tool-call","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01RwUAzDKotEBCKbaDdhAo8E","name":"load-object","isFailure":false,"result":[{"id":"01JGFJJZ00G0WKQSJGMAKCNTGW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW","name":"Remove Context Corp"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that the organization in the chat context is indeed \"Remove Context Corp\". I'll now remove it from the chat context.","options":{}},{"type":"tool-call","id":"toolu_017piERpq6eD6xcN7QB852Gk","name":"remove-from-context","params":{"obj":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01JGFJJZ00G0WKQSJGMAKCNTGW"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_017piERpq6eD6xcN7QB852Gk","name":"remove-from-context","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_014SH2tprYe1uFbpYkTEmyXD","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I've successfully removed the organization \"Remove","metadata":{}},{"type":"text-delta","id":"0","delta":" Context Corp\" from the chat context.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":19,"totalTokens":24},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":152},"cache_creation_input_tokens":152,"cache_read_input_tokens":6734,"input_tokens":5,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]}]}