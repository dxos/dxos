{"conversations":[{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01SWx6FcjwD244AJ4CzACboG","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to create a new organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" called \"Cyberdyne Systems\".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\n1. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", check what","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" are available to see if there's an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" type","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Create","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with the name","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"Cyberdyne Systems\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n3. Ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d it to the chat context for","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" further use\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" by listing","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" available schemas to fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the Organization type.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EooECkYICxgCKkApOBVEUVqs6UpUyLW5NX/vUqtp+8qp1L2dbT6dvsTdZu9dxxK4CkV8/5vJADr9KylxgLVHesGjyttXOtT0YO5SEgySGqDQCmPpUqseQ8saDGVB9yFQwlfIG2MIXyIwGWhqHHkz5HGkiYS0qz6pAsf1AAmO+Lrj1UoSezFqsbksDR47xpbcFMe5DzfaOcwoKvECyq7QJRfGxqgCrRq38NTc0CSXh5FeWBaCnRS6SusHHOuPrvsij9j79hpy4VHSIVsDi7kZGx2SCy1FoCErBXz7RKvMbTfnQeuCF6f/exWxP6KxOsblbJxG1JGPl1YugxZx9Fb5355lIZWIW0rlMGKplx8wEQSCQwlnyysfHEp64NiRFT6tN2Ja5L5xFSP4Qx8LQMbGe4gZ+qEvLtukj+t3FYZykoLRdHfk1dZ58RfcDC23RnXV7P/DB30+9VltfjgS9dhK3bTMC8cxsAmxHh4XXpPR/rkYsScVpNWo8A+eFxr9bJgAi6PT90RhBcGnclUUv0oBv9wMvXcu58W1Q2bKivpTSe/b00uh+cOvLl4wm6MXS/4gyg9j9jyvifPFGDBRXvF/YFXxY4eAT5G/8Ni42aashHIU+r2pXV7rWR/YAPWMeGTdtkoZJLxHewxa8fMnPG0kpsB1ELq1MNvWJo6UmZe4107lVZ/3cipEJIKz85dyGAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll create a new organization called \"","metadata":{}},{"type":"text-delta","id":"1","delta":"Cyberdyne Systems\" for you","metadata":{}},{"type":"text-delta","id":"1","delta":". First","metadata":{}},{"type":"text-delta","id":"1","delta":", let me check what organization","metadata":{}},{"type":"text-delta","id":"1","delta":" schema","metadata":{}},{"type":"text-delta","id":"1","delta":" is available.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"limit\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","delta":"20}","metadata":{}},{"type":"tool-params-end","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":172,"totalTokens":182},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":0},"cache_creation_input_tokens":0,"cache_read_input_tokens":4786,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01KDJmczmsMXVmyDHiLcEnUd","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I","metadata":{}},{"type":"text-delta","id":"0","delta":" can see that there","metadata":{}},{"type":"text-delta","id":"0","delta":"'s","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" available","metadata":{}},{"type":"text-delta","id":"0","delta":" (`","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos","metadata":{}},{"type":"text-delta","id":"0","delta":".org/type/Organization`).","metadata":{}},{"type":"text-delta","id":"0","delta":" Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" create","metadata":{}},{"type":"text-delta","id":"0","delta":" a new organization","metadata":{}},{"type":"text-delta","id":"0","delta":" calle","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"er","metadata":{}},{"type":"text-delta","id":"0","delta":"dyne Systems\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"{\"typena","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"me\": \"dxos","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":".org/type","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"/Organiza","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"tion\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":", \"data\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":": {","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"\"name\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"\"C","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"yber","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"dyn","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"e Systems\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","delta":"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":131,"totalTokens":137},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":5956},"cache_creation_input_tokens":5956,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that there's an Organization schema available (`dxos.org/type/Organization`). Now I'll create a new organization called \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","isFailure":false,"result":{"id":"01KHVFYW5XDWRATWM8XNTK40CZ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVFYW5XDWRATWM8XNTK40CZ","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01XiPMHWBdoKWERG13Dy6NfJ","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I've successfully created a","metadata":{}},{"type":"text-delta","id":"0","delta":" new organization called \"Cyberdyne","metadata":{}},{"type":"text-delta","id":"0","delta":" Systems\".","metadata":{}},{"type":"text-delta","id":"0","delta":" The organization","metadata":{}},{"type":"text-delta","id":"0","delta":" has been create","metadata":{}},{"type":"text-delta","id":"0","delta":"d with the ID `01KHV","metadata":{}},{"type":"text-delta","id":"0","delta":"FYW5XDWRA","metadata":{}},{"type":"text-delta","id":"0","delta":"TWM8XNTK40","metadata":{}},{"type":"text-delta","id":"0","delta":"CZ`.","metadata":{}},{"type":"text-delta","id":"0","delta":" \n\nWoul","metadata":{}},{"type":"text-delta","id":"0","delta":"d you like me to ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d this","metadata":{}},{"type":"text-delta","id":"0","delta":" organization to the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context","metadata":{}},{"type":"text-delta","id":"0","delta":" for","metadata":{}},{"type":"text-delta","id":"0","delta":" easy","metadata":{}},{"type":"text-delta","id":"0","delta":" reference, or would you like","metadata":{}},{"type":"text-delta","id":"0","delta":" to ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d more","metadata":{}},{"type":"text-delta","id":"0","delta":" details","metadata":{}},{"type":"text-delta","id":"0","delta":" to","metadata":{}},{"type":"text-delta","id":"0","delta":" it","metadata":{}},{"type":"text-delta","id":"0","delta":" such","metadata":{}},{"type":"text-delta","id":"0","delta":" as a description","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" status","metadata":{}},{"type":"text-delta","id":"0","delta":", website","metadata":{}},{"type":"text-delta","id":"0","delta":", or location?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","name":"add-to-context","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"{\"i","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"d\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"\"01KHVFYW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"5XDW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"RATWM8XNTK40","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","delta":"CZ\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":166,"totalTokens":172},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":269},"cache_creation_input_tokens":269,"cache_read_input_tokens":5956,"input_tokens":6,"output_tokens":7,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that there's an Organization schema available (`dxos.org/type/Organization`). Now I'll create a new organization called \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CQRoKtqR39RGiYcH6hVcbf","name":"create-object","isFailure":false,"result":{"id":"01KHVFYW5XDWRATWM8XNTK40CZ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVFYW5XDWRATWM8XNTK40CZ","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I've successfully created a new organization called \"Cyberdyne Systems\". The organization has been created with the ID `01KHVFYW5XDWRATWM8XNTK40CZ`. \n\nWould you like me to add this organization to the chat context for easy reference, or would you like to add more details to it such as a description, status, website, or location?","options":{}},{"type":"tool-call","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","name":"add-to-context","params":{"id":"01KHVFYW5XDWRATWM8XNTK40CZ"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01T8z9AZKJMimo8iURwCy6xC","name":"add-to-context","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Khx8yiVym8bTFxfKbGaviD","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve adde","metadata":{}},{"type":"text-delta","id":"0","delta":"d the","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems organization to the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context. You","metadata":{}},{"type":"text-delta","id":"0","delta":" can now easily","metadata":{}},{"type":"text-delta","id":"0","delta":" reference it an","metadata":{}},{"type":"text-delta","id":"0","delta":"d update","metadata":{}},{"type":"text-delta","id":"0","delta":" its","metadata":{}},{"type":"text-delta","id":"0","delta":" properties","metadata":{}},{"type":"text-delta","id":"0","delta":" as needed.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":31,"totalTokens":36},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":179},"cache_creation_input_tokens":179,"cache_read_input_tokens":6225,"input_tokens":5,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"List all available schemas. Tell me what typenames are available.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01SJdYQ1dvaEmkZcfVXYXWMA","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user is asking me to list all","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" available schemas and tell them what typenames","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" are available. I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to use the list","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"schemas tool to get this","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" information.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EsUCCkYICxgCKkCttjiXOQdFnWlYFhHQe0m7fHux69WZce7KP4FlkC7qZfYouP0Lm4Bf5aSFFmnzR2ixQTC9Kc04zK2+3jD70u6OEgzAlkRlCnlGsrYewi4aDNnsNOD3gLryzXc6FSIwZ2rC6fGLl2z3Un5CjMOdE2w/TxBewBnzX9Wv9uLWjBDNPQZc1PUWzGs8D3Wegi9AKqwBSGuKHQkPpVeqcTVwRz+QnvO1FQSLatZsfcDBjWywrM+xOfsDorLCect6oiQWLxgkRBw64nCZ8tWoJHDIyQPOqU0GZg7rjISekC2Mk1lxXo+C6Mm/qay0tCfKjbgmTdeDDc7hibGUAQVqkuIu+wmF3y6WIMV9kzHM7WpmvPUrSQoOBmHQKCJ589Bv/6FFfixBHPs0UBRQqCf5UGgGJ5tBqhE0Tk3Yf9EQNaw2ARgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll list","metadata":{}},{"type":"text-delta","id":"1","delta":" all available schemas for you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_017D5wyxDU9o2dhqfytc8Qmu","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_017D5wyxDU9o2dhqfytc8Qmu","delta":"","metadata":{}},{"type":"tool-params-end","id":"toolu_017D5wyxDU9o2dhqfytc8Qmu","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":87,"totalTokens":97},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4787},"cache_creation_input_tokens":4787,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"List all available schemas. Tell me what typenames are available.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user is asking me to list all available schemas and tell them what typenames are available. I need to use the list-schemas tool to get this information.","options":{}},{"type":"text","text":"I'll list all available schemas for you.","options":{}},{"type":"tool-call","id":"toolu_017D5wyxDU9o2dhqfytc8Qmu","name":"list-schemas","params":{},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_017D5wyxDU9o2dhqfytc8Qmu","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01RwfvMDfxFecf8yTQDW9Rq1","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Here","metadata":{}},{"type":"text-delta","id":"0","delta":" are","metadata":{}},{"type":"text-delta","id":"0","delta":" all","metadata":{}},{"type":"text-delta","id":"0","delta":" the available","metadata":{}},{"type":"text-delta","id":"0","delta":" schemas","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":"d their","metadata":{}},{"type":"text-delta","id":"0","delta":" typ","metadata":{}},{"type":"text-delta","id":"0","delta":"enames:\n\n##","metadata":{}},{"type":"text-delta","id":"0","delta":" Available","metadata":{}},{"type":"text-delta","id":"0","delta":" Typ","metadata":{}},{"type":"text-delta","id":"0","delta":"enames:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n###","metadata":{}},{"type":"text-delta","id":"0","delta":" ","metadata":{}},{"type":"text-delta","id":"0","delta":"1. **","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos.org/relation","metadata":{}},{"type":"text-delta","id":"0","delta":"/Employer","metadata":{}},{"type":"text-delta","id":"0","delta":"**","metadata":{}},{"type":"text-delta","id":"0","delta":" (","metadata":{}},{"type":"text-delta","id":"0","delta":"Relation","metadata":{}},{"type":"text-delta","id":"0","delta":")\n   ","metadata":{}},{"type":"text-delta","id":"0","delta":"- Represents","metadata":{}},{"type":"text-delta","id":"0","delta":" an emplo","metadata":{}},{"type":"text-delta","id":"0","delta":"ying relationship","metadata":{}},{"type":"text-delta","id":"0","delta":" between","metadata":{}},{"type":"text-delta","id":"0","delta":" a Person and an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization\n   - Properties: role","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" active","metadata":{}},{"type":"text-delta","id":"0","delta":" status","metadata":{}},{"type":"text-delta","id":"0","delta":", start/end dates\n\n### ","metadata":{}},{"type":"text-delta","id":"0","delta":"2. **dxos.org","metadata":{}},{"type":"text-delta","id":"0","delta":"/type","metadata":{}},{"type":"text-delta","id":"0","delta":"/Blueprint","metadata":{}},{"type":"text-delta","id":"0","delta":"** (Object","metadata":{}},{"type":"text-delta","id":"0","delta":")\n   - Stores","metadata":{}},{"type":"text-delta","id":"0","delta":" AI","metadata":{}},{"type":"text-delta","id":"0","delta":" assistant","metadata":{}},{"type":"text-delta","id":"0","delta":" blueprints with instructions","metadata":{}},{"type":"text-delta","id":"0","delta":" and tools","metadata":{}},{"type":"text-delta","id":"0","delta":"\n   - Properties: key","metadata":{}},{"type":"text-delta","id":"0","delta":", name, description, instructions (","metadata":{}},{"type":"text-delta","id":"0","delta":"with","metadata":{}},{"type":"text-delta","id":"0","delta":" Han","metadata":{}},{"type":"text-delta","id":"0","delta":"dlebars templates","metadata":{}},{"type":"text-delta","id":"0","delta":"), tools array","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n### 3. **dxos","metadata":{}},{"type":"text-delta","id":"0","delta":".org/type/Organization","metadata":{}},{"type":"text-delta","id":"0","delta":"** (Object)","metadata":{}},{"type":"text-delta","id":"0","delta":"\n   - Represents an","metadata":{}},{"type":"text-delta","id":"0","delta":" organization/","metadata":{}},{"type":"text-delta","id":"0","delta":"company\n   - Properties: name,","metadata":{}},{"type":"text-delta","id":"0","delta":" description","metadata":{}},{"type":"text-delta","id":"0","delta":", status","metadata":{}},{"type":"text-delta","id":"0","delta":" (","metadata":{}},{"type":"text-delta","id":"0","delta":"prospect","metadata":{}},{"type":"text-delta","id":"0","delta":"/qualifie","metadata":{}},{"type":"text-delta","id":"0","delta":"d/active/commit","metadata":{}},{"type":"text-delta","id":"0","delta":"/","metadata":{}},{"type":"text-delta","id":"0","delta":"reject","metadata":{}},{"type":"text-delta","id":"0","delta":"), image","metadata":{}},{"type":"text-delta","id":"0","delta":", website, location\n\n### 4","metadata":{}},{"type":"text-delta","id":"0","delta":". **dxos.org/","metadata":{}},{"type":"text-delta","id":"0","delta":"type/Person** (Object)","metadata":{}},{"type":"text-delta","id":"0","delta":"\n   - Represents a person with","metadata":{}},{"type":"text-delta","id":"0","delta":" comprehensive","metadata":{}},{"type":"text-delta","id":"0","delta":" contact information","metadata":{}},{"type":"text-delta","id":"0","delta":"\n   - Properties: fullName,","metadata":{}},{"type":"text-delta","id":"0","delta":" preferredName, nickname, image,","metadata":{}},{"type":"text-delta","id":"0","delta":" organization (","metadata":{}},{"type":"text-delta","id":"0","delta":"employer","metadata":{}},{"type":"text-delta","id":"0","delta":" reference","metadata":{}},{"type":"text-delta","id":"0","delta":"), jobTitle, department, notes,","metadata":{}},{"type":"text-delta","id":"0","delta":" emails, identities, phoneNumbers,","metadata":{}},{"type":"text-delta","id":"0","delta":" addresses, urls, birthday, custom","metadata":{}},{"type":"text-delta","id":"0","delta":" fields, location\n\n### 5.","metadata":{}},{"type":"text-delta","id":"0","delta":" **dxos.org/type","metadata":{}},{"type":"text-delta","id":"0","delta":"/Tag** (Object)\n   ","metadata":{}},{"type":"text-delta","id":"0","delta":"- Simple","metadata":{}},{"type":"text-delta","id":"0","delta":" tag for","metadata":{}},{"type":"text-delta","id":"0","delta":" categorizing","metadata":{}},{"type":"text-delta","id":"0","delta":" objects","metadata":{}},{"type":"text-delta","id":"0","delta":"\n   - Properties: label, h","metadata":{}},{"type":"text-delta","id":"0","delta":"ue (","metadata":{}},{"type":"text-delta","id":"0","delta":"color)","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n### 6. **example","metadata":{}},{"type":"text-delta","id":"0","delta":".com/type/Expan","metadata":{}},{"type":"text-delta","id":"0","delta":"do** (Object)\n   - A","metadata":{}},{"type":"text-delta","id":"0","delta":" flexible object","metadata":{}},{"type":"text-delta","id":"0","delta":" type","metadata":{}},{"type":"text-delta","id":"0","delta":" that allows","metadata":{}},{"type":"text-delta","id":"0","delta":" any","metadata":{}},{"type":"text-delta","id":"0","delta":" additional","metadata":{}},{"type":"text-delta","id":"0","delta":" properties\n   - Only","metadata":{}},{"type":"text-delta","id":"0","delta":" has an i","metadata":{}},{"type":"text-delta","id":"0","delta":"d as","metadata":{}},{"type":"text-delta","id":"0","delta":" required property","metadata":{}},{"type":"text-delta","id":"0","delta":",","metadata":{}},{"type":"text-delta","id":"0","delta":" but","metadata":{}},{"type":"text-delta","id":"0","delta":" accepts","metadata":{}},{"type":"text-delta","id":"0","delta":" any other properties dynamically\n\nThese","metadata":{}},{"type":"text-delta","id":"0","delta":" schemas define","metadata":{}},{"type":"text-delta","id":"0","delta":" the structure for","metadata":{}},{"type":"text-delta","id":"0","delta":" different","metadata":{}},{"type":"text-delta","id":"0","delta":" types","metadata":{}},{"type":"text-delta","id":"0","delta":" of objects","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":"d relations","metadata":{}},{"type":"text-delta","id":"0","delta":" you","metadata":{}},{"type":"text-delta","id":"0","delta":" can","metadata":{}},{"type":"text-delta","id":"0","delta":" create","metadata":{}},{"type":"text-delta","id":"0","delta":" in the","metadata":{}},{"type":"text-delta","id":"0","delta":" ECHO","metadata":{}},{"type":"text-delta","id":"0","delta":" space","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-delta","id":"0","delta":" The typenames follow a reverse","metadata":{}},{"type":"text-delta","id":"0","delta":" domain notation","metadata":{}},{"type":"text-delta","id":"0","delta":" pattern (e.g., `","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos.org/type","metadata":{}},{"type":"text-delta","id":"0","delta":"/Person`)","metadata":{}},{"type":"text-delta","id":"0","delta":" to","metadata":{}},{"type":"text-delta","id":"0","delta":" ensure","metadata":{}},{"type":"text-delta","id":"0","delta":" uniqu","metadata":{}},{"type":"text-delta","id":"0","delta":"eness.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":397,"totalTokens":403},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":7618},"cache_creation_input_tokens":7618,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01X1kfzTpys4u1TrnrbxEhTw","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants me to ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d a new schema called \"Project\" with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" specific","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" fields. I need to use the ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"schema function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"do this.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" nee","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d to create","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" JSON","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schema","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" specifie","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d fields.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nThe","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" required parameters for add-schema are:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n- name:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Project\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n- typename: \"example.com","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"/type/Project\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n- json","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Schema: I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to construct this with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the fields specifie","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d\n\nThe JSON","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schema should define","metadata":{}},{"type":"reasoning-delta","id":"0","delta":":","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n- name: string\n- description","metadata":{}},{"type":"reasoning-delta","id":"0","delta":": string  \n- status: string","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EtoECkYICxgCKkDGAfsbjgbnnqBA2doZDFA8s09MzTjAgHCndEwwAtDOw2/GpRkBKnOKxzTYlMUKBUIoPip4HWHkzU6fYf1Vc/X5Egw6iuwOHsJg2o8+Y9UaDJbpyCVuTlaHdvpWUSIwPDsgTwUgKFL3X7mSqBZCfnyzZB6imuuMwshszX926iKaMWxDA2ksEDESky3kJQJuKsED5bNArMe21RMGCBWAZ0q2xXEW29KLf5QceIBFUkqotRkXw0cRvFdrDbyE7/WQL3bpaWBNAHymYAFMtU9cKn9Kvchmnd5yWPpcAa5k3N8/DHDI/0dNrRjXEdShGTW8eQVQqwlcGBeIB/U35udljpsJ1/qjivChDubj+9B5X8H939F7hI7Vc+0rjYbe6w1T3yaKjhASKiWdGWkX82IMQoINarvPYjMrnuE3f6moG44DfBwXFRuF70Lp2m1/c4mk5BEEwt3MatM5NjXu5c2dWVeKK8so5xPrCVdb+Hb6V0DfC1YmRKU05OMv4SurCAxdWRSQV0Z3Bdczeq2y3haSgEO/Rhw5o+IZtSEe1v0bC97qKmtlKBJYLX4/KHAWxjLNNyXv4EV8jcTBW+IpFHyLObi+pvV+5GsAIoHutUo7Yf9W1yHKYDfdc6dHcxfuI96kWyjgglC7sHahTMxniQ7/bX+PtXLiDPmWEa0zLv/4s/BNnPvQvLdWtBqC3TKlYpnT7OtniteVuAXnd+V7ZDtgnJ+/fY9TrQSb+bhlDve8ZIoSNDaDbDY1jil/Mn1RgpHPLh/SVdlQCXBlOntVrWCdOAoFxWsYAQ=="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll add a","metadata":{}},{"type":"text-delta","id":"1","delta":" new schema for \"Project\" with the","metadata":{}},{"type":"text-delta","id":"1","delta":" fields","metadata":{}},{"type":"text-delta","id":"1","delta":" you specified.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"{\"nam","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"e\": \"Pro","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"ject\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":", \"typenam","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"e\": \"e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"xamp","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"le.com/ty","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"pe/Project\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":", \"jsonSchem","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"a\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"{\"typ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"e\":\"object\",","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"\"properti","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"es\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":":{\"n","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"ame\":{\"type","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"\":\"string\",","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"\"descri","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"pt","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"ion\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":":\"The na","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"me of t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"he projec","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"t\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"},\"d","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"escription","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"\":{\"type\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"\"st","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"ring\",\"desc","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"rip","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"tion\":\"A d","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"escri","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"ptio","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"n ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"of th","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"e pr","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"oject\"},\"st","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"atus\":{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"type\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"\"stri","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"ng\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":",\"descrip","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"tion\":\"The","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":" current","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":" status of","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":" the ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"pr","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"oject\"}},\"r","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"equired\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"[\"name\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","delta":"]}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":342,"totalTokens":352},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4809},"cache_creation_input_tokens":4809,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":6,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add a new schema called \"Project\" with specific fields. I need to use the add-schema function to do this. I need to create a JSON schema with the specified fields.\n\nThe required parameters for add-schema are:\n- name: \"Project\"\n- typename: \"example.com/type/Project\"\n- jsonSchema: I need to construct this with the fields specified\n\nThe JSON schema should define:\n- name: string\n- description: string  \n- status: string","options":{}},{"type":"text","text":"I'll add a new schema for \"Project\" with the fields you specified.","options":{}},{"type":"tool-call","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"]}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01X95RAgYd8gcESARswSLpJe","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I see there was","metadata":{}},{"type":"text-delta","id":"0","delta":" an error with the schema creation. Let","metadata":{}},{"type":"text-delta","id":"0","delta":" me try a","metadata":{}},{"type":"text-delta","id":"0","delta":" different approach by adjust","metadata":{}},{"type":"text-delta","id":"0","delta":"ing the schema structure","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"{\"name\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":" \"Project","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":", \"t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ypen","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ame\": \"exa","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"mp","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"le.com/t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ype","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"/Pr","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"oje","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ct\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":", \"jsonSchem","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"a\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"{\"$schema\":\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ht","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"tp://js","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"on-sche","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ma.org/","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"dra","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ft-07/sch","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ema#\",","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"\"type\":\"obj","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ec","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"t\",\"title","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"\":\"Project\",","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"\"proper","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ties\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":":{\"na","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"me\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"{\"type\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":":\"string\",\"t","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"itl","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"e\":\"Name\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"},\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"de","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"scription\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"{\"type\":\"st","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ring\",\"title","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"\":\"Descripti","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"on\"},","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"\"sta","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"tu","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"s\":{\"typ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"e\":\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"str","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"ing\",\"titl","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"e\":\"Stat","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","delta":"us\"}}}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":241,"totalTokens":247},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":5042},"cache_creation_input_tokens":5042,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add a new schema called \"Project\" with specific fields. I need to use the add-schema function to do this. I need to create a JSON schema with the specified fields.\n\nThe required parameters for add-schema are:\n- name: \"Project\"\n- typename: \"example.com/type/Project\"\n- jsonSchema: I need to construct this with the fields specified\n\nThe JSON schema should define:\n- name: string\n- description: string  \n- status: string","options":{}},{"type":"text","text":"I'll add a new schema for \"Project\" with the fields you specified.","options":{}},{"type":"tool-call","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"]}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"I see there was an error with the schema creation. Let me try a different approach by adjusting the schema structure:","options":{}},{"type":"tool-call","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","title":"Project","properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"status":{"type":"string","title":"Status"}}}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01CgGxsT7tYusUpA9TohugAn","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"It","metadata":{}},{"type":"text-delta","id":"0","delta":" appears","metadata":{}},{"type":"text-delta","id":"0","delta":" there's an","metadata":{}},{"type":"text-delta","id":"0","delta":" issue","metadata":{}},{"type":"text-delta","id":"0","delta":" with the ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d-schema function. Let me check","metadata":{}},{"type":"text-delta","id":"0","delta":" what","metadata":{}},{"type":"text-delta","id":"0","delta":" schemas","metadata":{}},{"type":"text-delta","id":"0","delta":" are currently available first","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","delta":"{\"limit\": 10}","metadata":{}},{"type":"tool-params-end","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":77,"totalTokens":83},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":274},"cache_creation_input_tokens":274,"cache_read_input_tokens":5042,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add a new schema called \"Project\" with specific fields. I need to use the add-schema function to do this. I need to create a JSON schema with the specified fields.\n\nThe required parameters for add-schema are:\n- name: \"Project\"\n- typename: \"example.com/type/Project\"\n- jsonSchema: I need to construct this with the fields specified\n\nThe JSON schema should define:\n- name: string\n- description: string  \n- status: string","options":{}},{"type":"text","text":"I'll add a new schema for \"Project\" with the fields you specified.","options":{}},{"type":"tool-call","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"]}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"I see there was an error with the schema creation. Let me try a different approach by adjusting the schema structure:","options":{}},{"type":"tool-call","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","title":"Project","properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"status":{"type":"string","title":"Status"}}}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"It appears there's an issue with the add-schema function. Let me check what schemas are currently available first:","options":{}},{"type":"tool-call","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","name":"list-schemas","params":{"limit":10},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"},{"typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Project","entityKind":"object","typename":"example.com/type/Project","version":"0.1.0","type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"],"propertyOrder":["name","description","status"],"additionalProperties":false,"annotations":{"schemaId":"dxn:echo:@:01KHVGKD7H0XPNWYE65FG4TYMQ"}},"kind":"record"},{"typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Project","entityKind":"object","typename":"example.com/type/Project","version":"0.1.0","type":"object","properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"status":{"type":"string","title":"Status"}},"required":[],"propertyOrder":["name","description","status"],"additionalProperties":false,"title":"Project","annotations":{"schemaId":"dxn:echo:@:01KHVGKJAT5XVRWY0ETWFDJWPR"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_0191wc9oCQhAeD88pMHhunoD","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":" can see that","metadata":{}},{"type":"text-delta","id":"0","delta":" there","metadata":{}},{"type":"text-delta","id":"0","delta":" are","metadata":{}},{"type":"text-delta","id":"0","delta":" actually","metadata":{}},{"type":"text-delta","id":"0","delta":" already","metadata":{}},{"type":"text-delta","id":"0","delta":" two Project","metadata":{}},{"type":"text-delta","id":"0","delta":" schemas","metadata":{}},{"type":"text-delta","id":"0","delta":" with","metadata":{}},{"type":"text-delta","id":"0","delta":" the","metadata":{}},{"type":"text-delta","id":"0","delta":" typename","metadata":{}},{"type":"text-delta","id":"0","delta":" \"example.com/type/Project","metadata":{}},{"type":"text-delta","id":"0","delta":"\"","metadata":{}},{"type":"text-delta","id":"0","delta":" in","metadata":{}},{"type":"text-delta","id":"0","delta":" the system.","metadata":{}},{"type":"text-delta","id":"0","delta":" Let me check their","metadata":{}},{"type":"text-delta","id":"0","delta":" details:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"{\"ty","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"pename","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"\": \"exam","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"pl","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"e.com","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"/type/Pr","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"oject\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":", \"include","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"Conte","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"nt\": tru","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":"e","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":", \"limit\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","delta":": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":129,"totalTokens":135},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":3276},"cache_creation_input_tokens":3276,"cache_read_input_tokens":5316,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add a new schema called \"Project\" with specific fields. I need to use the add-schema function to do this. I need to create a JSON schema with the specified fields.\n\nThe required parameters for add-schema are:\n- name: \"Project\"\n- typename: \"example.com/type/Project\"\n- jsonSchema: I need to construct this with the fields specified\n\nThe JSON schema should define:\n- name: string\n- description: string  \n- status: string","options":{}},{"type":"text","text":"I'll add a new schema for \"Project\" with the fields you specified.","options":{}},{"type":"tool-call","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"]}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"I see there was an error with the schema creation. Let me try a different approach by adjusting the schema structure:","options":{}},{"type":"tool-call","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","title":"Project","properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"status":{"type":"string","title":"Status"}}}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01TQ8LFTRayoD1Q2A4cEa35w","name":"add-schema","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nApiError: Cannot modify ECHO object property \"name\" outside of Obj.change(). Use Obj.change(obj, (mutableObj) => { mutableObj.name = value; }) instead.","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"It appears there's an issue with the add-schema function. Let me check what schemas are currently available first:","options":{}},{"type":"tool-call","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","name":"list-schemas","params":{"limit":10},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01CjZtJpGY9BFrQE44dGWWAj","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"},{"typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Project","entityKind":"object","typename":"example.com/type/Project","version":"0.1.0","type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"],"propertyOrder":["name","description","status"],"additionalProperties":false,"annotations":{"schemaId":"dxn:echo:@:01KHVGKD7H0XPNWYE65FG4TYMQ"}},"kind":"record"},{"typename":"example.com/type/Project","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Project","entityKind":"object","typename":"example.com/type/Project","version":"0.1.0","type":"object","properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"status":{"type":"string","title":"Status"}},"required":[],"propertyOrder":["name","description","status"],"additionalProperties":false,"title":"Project","annotations":{"schemaId":"dxn:echo:@:01KHVGKJAT5XVRWY0ETWFDJWPR"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"I can see that there are actually already two Project schemas with the typename \"example.com/type/Project\" in the system. Let me check their details:","options":{}},{"type":"tool-call","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","name":"list-objects","params":{"typename":"example.com/type/Project","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014Qogz77K5Hk4JXzBfX6v5R","name":"list-objects","isFailure":false,"result":[],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01A8V9N4gGvY4AS7HSmYCTw9","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The","metadata":{}},{"type":"text-delta","id":"0","delta":" Project","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" with","metadata":{}},{"type":"text-delta","id":"0","delta":" typename","metadata":{}},{"type":"text-delta","id":"0","delta":" \"example.com/type/Project","metadata":{}},{"type":"text-delta","id":"0","delta":"\" already","metadata":{}},{"type":"text-delta","id":"0","delta":" exists in","metadata":{}},{"type":"text-delta","id":"0","delta":" the system. Looking","metadata":{}},{"type":"text-delta","id":"0","delta":" at the schema","metadata":{}},{"type":"text-delta","id":"0","delta":" list","metadata":{}},{"type":"text-delta","id":"0","delta":", I can","metadata":{}},{"type":"text-delta","id":"0","delta":" see there","metadata":{}},{"type":"text-delta","id":"0","delta":" are actually","metadata":{}},{"type":"text-delta","id":"0","delta":" two versions","metadata":{}},{"type":"text-delta","id":"0","delta":" of","metadata":{}},{"type":"text-delta","id":"0","delta":" it","metadata":{}},{"type":"text-delta","id":"0","delta":":\n\n1. The first version","metadata":{}},{"type":"text-delta","id":"0","delta":" has","metadata":{}},{"type":"text-delta","id":"0","delta":" exactly","metadata":{}},{"type":"text-delta","id":"0","delta":" the fields","metadata":{}},{"type":"text-delta","id":"0","delta":" you","metadata":{}},{"type":"text-delta","id":"0","delta":" requeste","metadata":{}},{"type":"text-delta","id":"0","delta":"d: name","metadata":{}},{"type":"text-delta","id":"0","delta":" (","metadata":{}},{"type":"text-delta","id":"0","delta":"string), description (string), and status","metadata":{}},{"type":"text-delta","id":"0","delta":" (string),","metadata":{}},{"type":"text-delta","id":"0","delta":" with \"","metadata":{}},{"type":"text-delta","id":"0","delta":"name\" as a","metadata":{}},{"type":"text-delta","id":"0","delta":" required field.","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n2. The second version has the","metadata":{}},{"type":"text-delta","id":"0","delta":" same fields but as","metadata":{}},{"type":"text-delta","id":"0","delta":" optional fields with","metadata":{}},{"type":"text-delta","id":"0","delta":" titles","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\nSince the","metadata":{}},{"type":"text-delta","id":"0","delta":" schema you","metadata":{}},{"type":"text-delta","id":"0","delta":" want already","metadata":{}},{"type":"text-delta","id":"0","delta":" exists, you","metadata":{}},{"type":"text-delta","id":"0","delta":" can","metadata":{}},{"type":"text-delta","id":"0","delta":" now","metadata":{}},{"type":"text-delta","id":"0","delta":" create","metadata":{}},{"type":"text-delta","id":"0","delta":" Project","metadata":{}},{"type":"text-delta","id":"0","delta":" objects","metadata":{}},{"type":"text-delta","id":"0","delta":" using the typename","metadata":{}},{"type":"text-delta","id":"0","delta":" \"example.com/type/Project","metadata":{}},{"type":"text-delta","id":"0","delta":"\". Woul","metadata":{}},{"type":"text-delta","id":"0","delta":"d you like me to create a Project object","metadata":{}},{"type":"text-delta","id":"0","delta":" using","metadata":{}},{"type":"text-delta","id":"0","delta":" this","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":"?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":132,"totalTokens":138},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":142},"cache_creation_input_tokens":142,"cache_read_input_tokens":8592,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add a new schema called \"Project\" with typename \"example.com/type/Project\" and fields: name (string), description (string), and status (string).","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to add a new schema called \"Project\" with specific fields. I need to use the add-schema function to do this. I need to create a JSON schema with the specified fields.\n\nThe required parameters for add-schema are:\n- name: \"Project\"\n- typename: \"example.com/type/Project\"\n- jsonSchema: I need to construct this with the fields specified\n\nThe JSON schema should define:\n- name: string\n- description: string  \n- status: string","options":{}},{"type":"text","text":"I'll add a new schema for \"Project\" with the fields you specified.","options":{}},{"type":"tool-call","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","params":{"name":"Project","typename":"example.com/type/Project","jsonSchema":{"type":"object","properties":{"name":{"type":"string","description":"The name of the project"},"description":{"type":"string","description":"A description of the project"},"status":{"type":"string","description":"The current status of the project"}},"required":["name"]}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01V8MSSGEMnFSh8xzNjvcs1K","name":"add-schema","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01EWHGYxV91pnKJcXq4xuE49","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve successfully added the \"Project\" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" with:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Name","metadata":{}},{"type":"text-delta","id":"0","delta":"**: Project","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Typename**: example.com","metadata":{}},{"type":"text-delta","id":"0","delta":"/type/Project\n- **Fields","metadata":{}},{"type":"text-delta","id":"0","delta":"**:\n  - `name`","metadata":{}},{"type":"text-delta","id":"0","delta":" (string) - The","metadata":{}},{"type":"text-delta","id":"0","delta":" name of the project\n  - `","metadata":{}},{"type":"text-delta","id":"0","delta":"description` (string) - A description","metadata":{}},{"type":"text-delta","id":"0","delta":" of the project\n  - `status","metadata":{}},{"type":"text-delta","id":"0","delta":"` (string) - The current status","metadata":{}},{"type":"text-delta","id":"0","delta":" of the project\n\nThe schema is","metadata":{}},{"type":"text-delta","id":"0","delta":" now available for","metadata":{}},{"type":"text-delta","id":"0","delta":" creating","metadata":{}},{"type":"text-delta","id":"0","delta":" new","metadata":{}},{"type":"text-delta","id":"0","delta":" Project","metadata":{}},{"type":"text-delta","id":"0","delta":" objects","metadata":{}},{"type":"text-delta","id":"0","delta":" in your space","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-delta","id":"0","delta":" Would you like to create","metadata":{}},{"type":"text-delta","id":"0","delta":" a project using","metadata":{}},{"type":"text-delta","id":"0","delta":" this new","metadata":{}},{"type":"text-delta","id":"0","delta":" schema?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":112,"totalTokens":117},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4982},"cache_creation_input_tokens":4982,"cache_read_input_tokens":0,"input_tokens":5,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01DFHvCmPe6Ywtz3Uqj8ngVM","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect! I can see that there","metadata":{}},{"type":"text-delta","id":"0","delta":" is","metadata":{}},{"type":"text-delta","id":"0","delta":" an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":" available","metadata":{}},{"type":"text-delta","id":"0","delta":" (`","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos.org/type/","metadata":{}},{"type":"text-delta","id":"0","delta":"Organization`). Now I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll","metadata":{}},{"type":"text-delta","id":"0","delta":" create the","metadata":{}},{"type":"text-delta","id":"0","delta":" organization","metadata":{}},{"type":"text-delta","id":"0","delta":" \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"er","metadata":{}},{"type":"text-delta","id":"0","delta":"dyne Systems\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","name":"create-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"{\"typen","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"ame\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"\"dxo","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"s.org/","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"type/Organ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"izat","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"io","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"n\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":", \"data\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"{\"name\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"\"Cyber","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"dyn","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"e Syste","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","delta":"ms\"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":129,"totalTokens":135},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":7653},"cache_creation_input_tokens":7653,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":7,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that there is an Organization schema available (`dxos.org/type/Organization`). Now I'll create the organization \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","name":"create-object","isFailure":false,"result":{"id":"01KHVGWTDY5JATYEYHNY3QC705","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGWTDY5JATYEYHNY3QC705","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_011bdouo3qHWfzRfEgJc7DHC","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"tool-params-start","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","name":"add-to-context","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"{\"id\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"01KHVGW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"TD","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"Y5JATYEYHNY3","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"QC70","metadata":{}},{"type":"tool-params-delta","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","delta":"5\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":72,"totalTokens":78},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":259},"cache_creation_input_tokens":259,"cache_read_input_tokens":7653,"input_tokens":6,"output_tokens":29,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create a new organization called \"Cyberdyne Systems\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create a new organization called \"Cyberdyne Systems\". I need to:\n\n1. First, check what schemas are available to see if there's an Organization type\n2. Create the organization object with the name \"Cyberdyne Systems\"\n3. Add it to the chat context for further use\n\nLet me start by listing the available schemas to find the Organization type.","options":{}},{"type":"text","text":"I'll create a new organization called \"Cyberdyne Systems\" for you. First, let me check what organization schema is available.","options":{}},{"type":"tool-call","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","params":{"limit":20},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AnaqvssNFc7biiT9L1xvjb","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I can see that there is an Organization schema available (`dxos.org/type/Organization`). Now I'll create the organization \"Cyberdyne Systems\".","options":{}},{"type":"tool-call","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","name":"create-object","params":{"typename":"dxos.org/type/Organization","data":{"name":"Cyberdyne Systems"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01Uds4ZS9QUjKFYRVgMg6EJa","name":"create-object","isFailure":false,"result":{"id":"01KHVGWTDY5JATYEYHNY3QC705","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGWTDY5JATYEYHNY3QC705","name":"Cyberdyne Systems"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"tool-call","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","name":"add-to-context","params":{"id":"01KHVGWTDY5JATYEYHNY3QC705"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01T7Ssw1m7S9qnGEY4VAZgF2","name":"add-to-context","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_013Jx36vgL9Ww3hXuuSdoXNr","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve successfully created a","metadata":{}},{"type":"text-delta","id":"0","delta":" new organization","metadata":{}},{"type":"text-delta","id":"0","delta":" calle","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"Cyberdyne Systems\".","metadata":{}},{"type":"text-delta","id":"0","delta":" The organization has been create","metadata":{}},{"type":"text-delta","id":"0","delta":"d with the","metadata":{}},{"type":"text-delta","id":"0","delta":" ID `01KHVGWT","metadata":{}},{"type":"text-delta","id":"0","delta":"DY5JATYEYHNY","metadata":{}},{"type":"text-delta","id":"0","delta":"3QC705` and adde","metadata":{}},{"type":"text-delta","id":"0","delta":"d to the chat","metadata":{}},{"type":"text-delta","id":"0","delta":" context.\n\nThe","metadata":{}},{"type":"text-delta","id":"0","delta":" organization","metadata":{}},{"type":"text-delta","id":"0","delta":" is","metadata":{}},{"type":"text-delta","id":"0","delta":" now available in your","metadata":{}},{"type":"text-delta","id":"0","delta":" space","metadata":{}},{"type":"text-delta","id":"0","delta":" and you","metadata":{}},{"type":"text-delta","id":"0","delta":" can:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- Ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d more","metadata":{}},{"type":"text-delta","id":"0","delta":" details","metadata":{}},{"type":"text-delta","id":"0","delta":" like","metadata":{}},{"type":"text-delta","id":"0","delta":" description","metadata":{}},{"type":"text-delta","id":"0","delta":", status","metadata":{}},{"type":"text-delta","id":"0","delta":", website, or","metadata":{}},{"type":"text-delta","id":"0","delta":" location","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- Create people","metadata":{}},{"type":"text-delta","id":"0","delta":" and link","metadata":{}},{"type":"text-delta","id":"0","delta":" them as","metadata":{}},{"type":"text-delta","id":"0","delta":" employees","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- Ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d tags to","metadata":{}},{"type":"text-delta","id":"0","delta":" categorize the organization\n- Create documents","metadata":{}},{"type":"text-delta","id":"0","delta":" or","metadata":{}},{"type":"text-delta","id":"0","delta":" other objects","metadata":{}},{"type":"text-delta","id":"0","delta":" relate","metadata":{}},{"type":"text-delta","id":"0","delta":"d to this","metadata":{}},{"type":"text-delta","id":"0","delta":" organization\n\nWould you like me","metadata":{}},{"type":"text-delta","id":"0","delta":" to add any","metadata":{}},{"type":"text-delta","id":"0","delta":" additional information to","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems?","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":128,"totalTokens":133},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":85},"cache_creation_input_tokens":85,"cache_read_input_tokens":7912,"input_tokens":5,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01EF3AijfVJWcLWnT4oKogrA","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to delete an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization name","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d \"Obsolete Corp\". I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for objects","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" name \"Obsolete Corp\" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the specific","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organization\n2. Once","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I find it","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", delete","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" it using","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the delete","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start by searching for \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Obsolete Corp\".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EroDCkYICxgCKkB0WxnQ5bXFn+I4Ssj8aBhJjUD5zxBTnapiedCqm0sCK9O1vhuMqX3Rtr43tMl2gItjotA1WFqLNmy4UNoGeVz5Egzj0Wur/qh5TUh0BqAaDCaBwSmDIlsrYD6XgyIw81L4cxGpb/uEvlVHIms8ThKZy4AEo5HLU8ssywPqEcTgrdOUpfgS/qSrUEALy3zlKqECeHt8a2PBmyj0tiY8uOoOPuX39JYf9PV88QOAmloWz0B/gXu2bvwZvJaV88+LL8k4NMcuwj2PNTENnJUwrSFO6yqHdX5S+74K9ErFu+8KQ0XEMEdeYS6eB8UY3RH0m8Lwku5r9Fc36pJjRo7xqqm36esC9cWG6b8waqyuA8P8hf1Wps8SJxolpSXVvUqtxyf5xTl8lmDfsouaKQMWdyzmdAjQx3F4e/x1AuVyIW54yK8+/ieXKqUBXCNist+Da/e/ATexgm+NdAWhN0uLJPXnbGS4x/GParPHRhIdlNGI6JVB1J8jIV7gWq2z7H11WHX+2agfcebvwhmcBJkkIkGHD65DDHDZoQE/Vh8pG1clVYtPZJ4n4q5zLVENUWghc9LFxRgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you delete the organization \"","metadata":{}},{"type":"text-delta","id":"1","delta":"Obsolete Corp\". Let me first","metadata":{}},{"type":"text-delta","id":"1","delta":" search for it","metadata":{}},{"type":"text-delta","id":"1","delta":" to get","metadata":{}},{"type":"text-delta","id":"1","delta":" its","metadata":{}},{"type":"text-delta","id":"1","delta":" exact","metadata":{}},{"type":"text-delta","id":"1","delta":" ID","metadata":{}},{"type":"text-delta","id":"1","delta":".","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"{\"text\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":" \"Obsolete C","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"orp\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":", \"include","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"Cont","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"ent\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"true","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":", \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","delta":"limit\": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":194,"totalTokens":204},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4783},"cache_creation_input_tokens":4783,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":6,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to delete an organization named \"Obsolete Corp\". I need to:\n1. First search for objects with the name \"Obsolete Corp\" to find the specific organization\n2. Once I find it, delete it using the delete-object function\n\nLet me start by searching for \"Obsolete Corp\".","options":{}},{"type":"text","text":"I'll help you delete the organization \"Obsolete Corp\". Let me first search for it to get its exact ID.","options":{}},{"type":"tool-call","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","params":{"text":"Obsolete Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGX2HN2KYAM3E5XMGP14X1","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2HN2KYAM3E5XMGP14X1","name":"Obsolete Corp"},{"id":"01KHVGX2JGV0ERV13QPGDY1RVF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2H7TDMJSK5H86EAYK66:01KHVGX2JGV0ERV13QPGDY1RVF","created":"2026-02-19T17:59:27.568Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Delete the organization \"Obsolete Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01CJZsjTSwTMrZdFGTgXwNt6","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I found the organization \"Obsolete","metadata":{}},{"type":"text-delta","id":"0","delta":" Corp\" with ID `","metadata":{}},{"type":"text-delta","id":"0","delta":"01KHVGX2H","metadata":{}},{"type":"text-delta","id":"0","delta":"N2KYAM3E5","metadata":{}},{"type":"text-delta","id":"0","delta":"XMGP14X1","metadata":{}},{"type":"text-delta","id":"0","delta":"`. I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ll now delete it for","metadata":{}},{"type":"text-delta","id":"0","delta":" you.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","name":"delete-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","delta":"{\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","delta":"id\": \"01KHV","metadata":{}},{"type":"tool-params-delta","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","delta":"GX2HN2K","metadata":{}},{"type":"tool-params-delta","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","delta":"YAM3E5XM","metadata":{}},{"type":"tool-params-delta","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","delta":"GP14X1\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":123,"totalTokens":129},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":5219},"cache_creation_input_tokens":5219,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to delete an organization named \"Obsolete Corp\". I need to:\n1. First search for objects with the name \"Obsolete Corp\" to find the specific organization\n2. Once I find it, delete it using the delete-object function\n\nLet me start by searching for \"Obsolete Corp\".","options":{}},{"type":"text","text":"I'll help you delete the organization \"Obsolete Corp\". Let me first search for it to get its exact ID.","options":{}},{"type":"tool-call","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","params":{"text":"Obsolete Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGX2HN2KYAM3E5XMGP14X1","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2HN2KYAM3E5XMGP14X1","name":"Obsolete Corp"},{"id":"01KHVGX2JGV0ERV13QPGDY1RVF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2H7TDMJSK5H86EAYK66:01KHVGX2JGV0ERV13QPGDY1RVF","created":"2026-02-19T17:59:27.568Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Delete the organization \"Obsolete Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"I found the organization \"Obsolete Corp\" with ID `01KHVGX2HN2KYAM3E5XMGP14X1`. I'll now delete it for you.","options":{}},{"type":"tool-call","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","name":"delete-object","params":{"id":"01KHVGX2HN2KYAM3E5XMGP14X1"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","name":"delete-object","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nError: Invalid DXN: 01KHVGX2HN2KYAM3E5XMGP14X1","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01UNs8hZC9GVPzaznNBsbxfc","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Let","metadata":{}},{"type":"text-delta","id":"0","delta":" me use","metadata":{}},{"type":"text-delta","id":"0","delta":" the correct D","metadata":{}},{"type":"text-delta","id":"0","delta":"XN format for the deletion","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","name":"delete-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"{\"id","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"\": \"d","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"xn:echo:BDJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"XMUL","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"PW5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"FB55UZ7KP5H","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"LDHVTXUTHE","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"2U","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":":01KH","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"VGX2","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"HN2KY","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"AM3E5X","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"MGP1","metadata":{}},{"type":"tool-params-delta","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","delta":"4X1\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":124,"totalTokens":130},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":183},"cache_creation_input_tokens":183,"cache_read_input_tokens":5219,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the organization \"Obsolete Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to delete an organization named \"Obsolete Corp\". I need to:\n1. First search for objects with the name \"Obsolete Corp\" to find the specific organization\n2. Once I find it, delete it using the delete-object function\n\nLet me start by searching for \"Obsolete Corp\".","options":{}},{"type":"text","text":"I'll help you delete the organization \"Obsolete Corp\". Let me first search for it to get its exact ID.","options":{}},{"type":"tool-call","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","params":{"text":"Obsolete Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01TAvBnERb9NJHtQosAP5jPd","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGX2HN2KYAM3E5XMGP14X1","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2HN2KYAM3E5XMGP14X1","name":"Obsolete Corp"},{"id":"01KHVGX2JGV0ERV13QPGDY1RVF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2H7TDMJSK5H86EAYK66:01KHVGX2JGV0ERV13QPGDY1RVF","created":"2026-02-19T17:59:27.568Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Delete the organization \"Obsolete Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"I found the organization \"Obsolete Corp\" with ID `01KHVGX2HN2KYAM3E5XMGP14X1`. I'll now delete it for you.","options":{}},{"type":"tool-call","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","name":"delete-object","params":{"id":"01KHVGX2HN2KYAM3E5XMGP14X1"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01UyoVFnXUj1g81jpFviEA1W","name":"delete-object","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nError: Invalid DXN: 01KHVGX2HN2KYAM3E5XMGP14X1","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me use the correct DXN format for the deletion:","options":{}},{"type":"tool-call","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","name":"delete-object","params":{"id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGX2HN2KYAM3E5XMGP14X1"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01549JKnGxWYT8ZHAeDFa1SK","name":"delete-object","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_0124ExCAvTaKMRbkaQdbrRtr","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The organization \"Obsolete Corp\"","metadata":{}},{"type":"text-delta","id":"0","delta":" has been successfully deleted from","metadata":{}},{"type":"text-delta","id":"0","delta":" the system.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":19,"totalTokens":24},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":137},"cache_creation_input_tokens":137,"cache_read_input_tokens":5402,"input_tokens":5,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01V1FcgYUicjhJ8cmncQCP9L","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to update an organization object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d change its name from \"Old Name Inc","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\" to \"New Name Corp\". ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nTo","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" do this, I need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. First find the organization with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the name \"Old Name Inc\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Update its name property","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to \"New Name Corp\"\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" by searching for the organization. I'll","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" use the list","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"objects","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to find organizations with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" text","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"Old Name Inc\".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EpwECkYICxgCKkCgPWZC1mw90uL7jj/MP2fM4tVcWfXzpuUTuTzHsEJAXLc1F/iXiLyhtoeJCsK7v6F5W1YSHtJXpP9RRDuHJQkEEgyhUH64o20MPC/mepYaDArtBEEju/TyWDQAvCIwmYJyHm+evOnPBQLFjTDUmWGgbokrfXfv046cLtOrfSZO42nqmXkwWqg4OOKS+La+KoMD7d0Zbr2JYRF2DI5DAGmtMYwupgWH0R0fRuIi8DpgpYHNamcnbEYwuwuj4hTqU5MdhE3RJZf3gbRqfVumFBC7FnCi5hZ4SH/toPHVLKyzrwl3qOCMbplOabSOFXf56zl+ATgoN95AOh4VoW4JEIUn5iDumAtjfQqq7iE33Ais3C6mjPcUSIzxuGFc0iIP7L4IxjAFgtRHwJgWXLC4e9dfEaNxLALee3X1ncCwK9qaVArGHIKnzWlOjWu8uZXHf1B7SNXsGiwMmlIaEYf4sXz7xh8l592QB7I9qBuggUubGJatTejo62JTLaIBbPnsnW1oMQvRGpVeuW0l94b5ff9awvbkymqYKux/LXaI4QvJsA4OSjy4VU88NWBMLYBRE/Wpwo+mDdiT7rnM0j1Je9yLTpH+FL7UutIZrecLnLJ8OECGQW/Lh0tYX/HAFSy6PmUOUpCKCg6EuACFwwmYPXcJC3N48cAa36Up2XVX2fwAJtxUHuv0dWWOBfUspqB+KI8GiBrwGAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help","metadata":{}},{"type":"text-delta","id":"1","delta":" you update the organization's name.","metadata":{}},{"type":"text-delta","id":"1","delta":" Let me first find the organization \"","metadata":{}},{"type":"text-delta","id":"1","delta":"Old Name Inc\" and then update","metadata":{}},{"type":"text-delta","id":"1","delta":" it","metadata":{}},{"type":"text-delta","id":"1","delta":".","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"{\"text\": \"O","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"ld ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"Name Inc\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":", \"includeC","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"onte","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"nt\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":" true","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":", \"limit\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","delta":"5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":217,"totalTokens":227},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4792},"cache_creation_input_tokens":4792,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to update an organization object and change its name from \"Old Name Inc\" to \"New Name Corp\". \n\nTo do this, I need to:\n1. First find the organization with the name \"Old Name Inc\"\n2. Update its name property to \"New Name Corp\"\n\nLet me start by searching for the organization. I'll use the list-objects function to find organizations with the text \"Old Name Inc\".","options":{}},{"type":"text","text":"I'll help you update the organization's name. Let me first find the organization \"Old Name Inc\" and then update it.","options":{}},{"type":"tool-call","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","params":{"text":"Old Name Inc","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGXHCFD21SGXK89QKJWRAK","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCFD21SGXK89QKJWRAK","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01KHVGXHCFD21SGXK89QKJWRAM","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCFD21SGXK89QKJWRAM","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01KHVGXHCFD21SGXK89QKJWRAK"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01KHVGXHCW6JK328WPAKXEJVVJ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCW6JK328WPAKXEJVVJ","name":"Old Name Inc"},{"id":"01KHVGXHDXBN4JJH5RBWDRS0YQ","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCEX1FVPAAQQKH0TM6P:01KHVGXHDXBN4JJH5RBWDRS0YQ","created":"2026-02-19T17:59:42.781Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_0185Y9wXUjw8Pn1YqrLpwZ2r","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect","metadata":{}},{"type":"text-delta","id":"0","delta":"! I foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d the organization \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Old Name Inc\" with","metadata":{}},{"type":"text-delta","id":"0","delta":" ID `01KHVGX","metadata":{}},{"type":"text-delta","id":"0","delta":"HCW","metadata":{}},{"type":"text-delta","id":"0","delta":"6JK328WPAKX","metadata":{}},{"type":"text-delta","id":"0","delta":"EJVVJ`. Now I'll","metadata":{}},{"type":"text-delta","id":"0","delta":" update its name to \"New Name Corp","metadata":{}},{"type":"text-delta","id":"0","delta":"\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_018svvGM1G3sx2Vc1kknSeak","name":"update-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"{\"id\": \"01K","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"HVGXHCW6JK32","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"8WPAKXEJVV","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"J\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":", \"propertie","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"s\": {\"nam","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"e\":\"New Nam","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"e Cor","metadata":{}},{"type":"tool-params-delta","id":"toolu_018svvGM1G3sx2Vc1kknSeak","delta":"p\"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_018svvGM1G3sx2Vc1kknSeak","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":150,"totalTokens":156},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":6471},"cache_creation_input_tokens":6471,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to update an organization object and change its name from \"Old Name Inc\" to \"New Name Corp\". \n\nTo do this, I need to:\n1. First find the organization with the name \"Old Name Inc\"\n2. Update its name property to \"New Name Corp\"\n\nLet me start by searching for the organization. I'll use the list-objects function to find organizations with the text \"Old Name Inc\".","options":{}},{"type":"text","text":"I'll help you update the organization's name. Let me first find the organization \"Old Name Inc\" and then update it.","options":{}},{"type":"tool-call","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","params":{"text":"Old Name Inc","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGXHCFD21SGXK89QKJWRAK","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCFD21SGXK89QKJWRAK","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01KHVGXHCFD21SGXK89QKJWRAM","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCFD21SGXK89QKJWRAM","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01KHVGXHCFD21SGXK89QKJWRAK"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01KHVGXHCW6JK328WPAKXEJVVJ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCW6JK328WPAKXEJVVJ","name":"Old Name Inc"},{"id":"01KHVGXHDXBN4JJH5RBWDRS0YQ","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCEX1FVPAAQQKH0TM6P:01KHVGXHDXBN4JJH5RBWDRS0YQ","created":"2026-02-19T17:59:42.781Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found the organization \"Old Name Inc\" with ID `01KHVGXHCW6JK328WPAKXEJVVJ`. Now I'll update its name to \"New Name Corp\".","options":{}},{"type":"tool-call","id":"toolu_018svvGM1G3sx2Vc1kknSeak","name":"update-object","params":{"id":"01KHVGXHCW6JK328WPAKXEJVVJ","properties":{"name":"New Name Corp"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_018svvGM1G3sx2Vc1kknSeak","name":"update-object","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nError: Invalid DXN: 01KHVGXHCW6JK328WPAKXEJVVJ","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01M4LxVDoZgZNNB3CsmpCXMh","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Let","metadata":{}},{"type":"text-delta","id":"0","delta":" me try with","metadata":{}},{"type":"text-delta","id":"0","delta":" the full DXN identifier","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","name":"update-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"{\"i","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"d\": \"dxn:e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"cho:BDJXM","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"ULP","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"W5FB55UZ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"7KP5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"HLDH","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"VT","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"XUT","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"HE2U:","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"01KHV","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"GXHC","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"W6JK3","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"28WPAKXEJVVJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":", \"p","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"ro","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"perties\": {","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"\"n","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"ame\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":"\"New Name","metadata":{}},{"type":"tool-params-delta","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","delta":" Corp\"}}","metadata":{}},{"type":"tool-params-end","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":143,"totalTokens":149},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":203},"cache_creation_input_tokens":203,"cache_read_input_tokens":6471,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to update an organization object and change its name from \"Old Name Inc\" to \"New Name Corp\". \n\nTo do this, I need to:\n1. First find the organization with the name \"Old Name Inc\"\n2. Update its name property to \"New Name Corp\"\n\nLet me start by searching for the organization. I'll use the list-objects function to find organizations with the text \"Old Name Inc\".","options":{}},{"type":"text","text":"I'll help you update the organization's name. Let me first find the organization \"Old Name Inc\" and then update it.","options":{}},{"type":"tool-call","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","params":{"text":"Old Name Inc","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01A85TjnxN9XFWJxSEc3AfQD","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGXHCFD21SGXK89QKJWRAK","@type":"dxn:type:dxos.org/type/Text:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCFD21SGXK89QKJWRAK","content":"{{! System Prompt }}\n\n- You are a helpful assistant called Kai. \n- Your name is Kai and you are powered by different language models.\n- You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n- In your initial greeting state your name and make some suggestions based on the current context objects.\n- You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n- Your task is to process user commands and questions and decide how best to respond.\n- In general be concise and direct.\n- Follow all instructions carefully.\n\n## Planning\n\n- Analyze the structure and type of the content in the user's message.\n- Determine if you complete the task using the available blueprint definitions?\n- If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n- Identify which blueprint definitions are relevant to the user's request.\n- Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n- Make a final decision on whether to create an artifact and explain your reasoning.\n- Are the required blueprint definitions already available?\n- If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n- The require'd artifact tools will be available for use after require.\n- If creating an artifact, outline how you will structure it within the response.\n- Decide if the artifact needs to be shown to the user.\n- Call the show tool to show the artifact to the user.\n- Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n\n## Blueprints and Artifacts\n\n- Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n- Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n- If it is ambiguous, query for existing artifacts first and then decide.\n- If you decide to create an artifact, call the associated tool to create the artifact.\n- Artifacts are stored in the database. Tools are used to create and query artifacts.\n- If you are unsure about creating an artifact ask the user for clarification.\n- Artifacts are mutable objects that can change over the course of the conversation.\n- Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n- You must never generate the id of the artifact; only recall the ids that are already in the history.\n- Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n- You can add suggested actions at the end of your response.\n- Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n- Suggested actions must be in the form of a user instruction that you can follow.\n- Suggested actions could include actions that create artifacts.\n- After creating an artifact use a tool to add it to the chat context.\n\n## Context\n\nToday is {{DATETIME}}.\n"},{"id":"01KHVGXHCFD21SGXK89QKJWRAM","@type":"dxn:type:dxos.org/type/Blueprint:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCFD21SGXK89QKJWRAM","instructions":{"inputs":[],"source":{"/":"dxn:echo:@:01KHVGXHCFD21SGXK89QKJWRAK"}},"key":"dxos.org/blueprint/assistant","name":"Assistant","tools":["dxos.org/function/assistant/context-add","dxos.org/function/assistant/context-remove","dxos.org/function/assistant/load","dxos.org/function/assistant/object-create","dxos.org/function/assistant/object-delete","dxos.org/function/assistant/object-update","dxos.org/function/assistant/query","dxos.org/function/assistant/relation-create","dxos.org/function/assistant/relation-delete","dxos.org/function/assistant/schema-add","dxos.org/function/assistant/schema-list","dxos.org/function/assistant/tag-add","dxos.org/function/assistant/tag-remove","open-item"]},{"id":"01KHVGXHCW6JK328WPAKXEJVVJ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCW6JK328WPAKXEJVVJ","name":"Old Name Inc"},{"id":"01KHVGXHDXBN4JJH5RBWDRS0YQ","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCEX1FVPAAQQKH0TM6P:01KHVGXHDXBN4JJH5RBWDRS0YQ","created":"2026-02-19T17:59:42.781Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Update the organization \"Old Name Inc\" and change its name to \"New Name Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found the organization \"Old Name Inc\" with ID `01KHVGXHCW6JK328WPAKXEJVVJ`. Now I'll update its name to \"New Name Corp\".","options":{}},{"type":"tool-call","id":"toolu_018svvGM1G3sx2Vc1kknSeak","name":"update-object","params":{"id":"01KHVGXHCW6JK328WPAKXEJVVJ","properties":{"name":"New Name Corp"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_018svvGM1G3sx2Vc1kknSeak","name":"update-object","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nError: Invalid DXN: 01KHVGXHCW6JK328WPAKXEJVVJ","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try with the full DXN identifier:","options":{}},{"type":"tool-call","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","name":"update-object","params":{"id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCW6JK328WPAKXEJVVJ","properties":{"name":"New Name Corp"}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01LQ4DuYtLs54i29KBoKtuYB","name":"update-object","isFailure":false,"result":{"id":"01KHVGXHCW6JK328WPAKXEJVVJ","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGXHCW6JK328WPAKXEJVVJ","name":"New Name Corp"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01BD96e6t6cx6nVC1WrahGEg","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve successfully updated the organization's","metadata":{}},{"type":"text-delta","id":"0","delta":" name from \"Old Name Inc\" to","metadata":{}},{"type":"text-delta","id":"0","delta":" \"New Name Corp\". The change","metadata":{}},{"type":"text-delta","id":"0","delta":" has been save","metadata":{}},{"type":"text-delta","id":"0","delta":"d and the","metadata":{}},{"type":"text-delta","id":"0","delta":" organization now has the new name.","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n**","metadata":{}},{"type":"text-delta","id":"0","delta":"Suggeste","metadata":{}},{"type":"text-delta","id":"0","delta":"d actions","metadata":{}},{"type":"text-delta","id":"0","delta":":**","metadata":{}},{"type":"text-delta","id":"0","delta":"\n-","metadata":{}},{"type":"text-delta","id":"0","delta":" View","metadata":{}},{"type":"text-delta","id":"0","delta":" all","metadata":{}},{"type":"text-delta","id":"0","delta":" organizations in the system\n- Ad","metadata":{}},{"type":"text-delta","id":"0","delta":"d contact","metadata":{}},{"type":"text-delta","id":"0","delta":" information to New","metadata":{}},{"type":"text-delta","id":"0","delta":" Name Corp","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- Create","metadata":{}},{"type":"text-delta","id":"0","delta":" a","metadata":{}},{"type":"text-delta","id":"0","delta":" new organization","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":68,"totalTokens":74},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":281},"cache_creation_input_tokens":281,"cache_read_input_tokens":6674,"input_tokens":6,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Search for all organizations. How many are there?","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01ToGXYzqYBzsLwHLVddayXf","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants me","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to search for all organizations and count them","metadata":{}},{"type":"reasoning-delta","id":"0","delta":". I should use the list","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"objects","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the typename","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" organizations.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Let me first","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" check","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" what the exact typename is for organizations by","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" listing","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the schemas","metadata":{}},{"type":"reasoning-delta","id":"0","delta":".\n\nActually","metadata":{}},{"type":"reasoning-delta","id":"0","delta":", I","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" can","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" try","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" searching","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" directly","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with the common","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" typename","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" pattern","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"dxos.org/type","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"/Organization","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\" first","metadata":{}},{"type":"reasoning-delta","id":"0","delta":".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" If that doesn't work, I'll","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" list","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the schemas to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the correct typename.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nI","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"'ll search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for organizations with","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" inclu","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"deContent","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"=false","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" since the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" user just wants the count,","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d I'll set","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" higher","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" limit to make","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" sure I get all of","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" them.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"Et0FCkYICxgCKkBHMzPBnZ7dltMqFfgQ3f5J92cGYHLH9Uqve+Lv6oMQ5NKKTSbBwyn+gfZnsZeiIhraxUh+fOiIZQc9TUTeY1iJEgyRuRipW6Z1nCttR4kaDLEDugXbJlVnepmUQCIwB22002OZRjr02dDegW8twgng03GQ6hLCHpeFYtjoPPxQK/v7b12JDKcvLtLocrdaKsQEXswfHo4asCKfB9YjpE5SOWYdVPQFe1bmmnhUe2rZCMg2AtrI9RjoMIRX0NLBXMCxIzN6UdB1u7WR51u9mHjHVKdSsmg015rGCUnXhLKs4lDdFQ4sMqRWq45ugc37v4/XX5OAY3/X0y3Tbnq8xtSYwc46t7r4gJGKiWAki8gmqL/o8hhJIG5ppixBbHNai9qcLnOe6BxwkQNXsFMTsm2HpxhUNBlwHmK1DR/YLKZZMabD4fasajOj4GSCwefm1e1jyzH4A4dPiuxvGKXtHRDssIbDddfRU295KhAvZ9Hllo13biYx+u7KhtgChIgjyl9+8iTWT/eSWr+GkIVyn8rDVzUSuK1dIYoMikx2HSE3iG6YlZa9ZTjKuZxc+fZJyxr2M7sg38tYfmdn0GaqjkQcobgE+ePKIRMDikPML+1cfrEzp4ICUa6tnX+k5Yb97WrBZ2he4kqYUnkr+jjUzCqj6HEi24aqtZAVFYHcGTB4bpbDc5z9QNIsuHmKuA2Z7wulc3KLnCBhZOAKPQTu4tV8/sYg/W3r2EVAzdCq7FJqAsIiHz3mNDDCNa5gKQ8GF2YaUBr4tDmcOR/fBf1PFGFW84Hj4viVax9isWHFXDULMFYLaXh0oOzV4kpGpG5oS4VcUuYOlaHKgijyPbOEy3yCGisIN7finEzELzDv1gRnO68urYpFp3bvHT7k+NUIYnUssreE4/jPInDhIDmpCVeDC2nP36kuWXDjFDu6l4NHjFJ5dCXS6IdR/OlMuqD2SSaC7NuysxgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll search for all organizations","metadata":{}},{"type":"text-delta","id":"1","delta":" in the space","metadata":{}},{"type":"text-delta","id":"1","delta":" for","metadata":{}},{"type":"text-delta","id":"1","delta":" you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_014dvj6gRMB27qExFvaSkdZh","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"{\"typena","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"me\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"\"dxos.org/t","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"ype/Organi","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"zatio","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"n\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":", ","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"\"in","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"cludeContent","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"\": false","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":", \"li","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"mit\": 10","metadata":{}},{"type":"tool-params-delta","id":"toolu_014dvj6gRMB27qExFvaSkdZh","delta":"0}","metadata":{}},{"type":"tool-params-end","id":"toolu_014dvj6gRMB27qExFvaSkdZh","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":240,"totalTokens":250},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4784},"cache_creation_input_tokens":4784,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Search for all organizations. How many are there?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to search for all organizations and count them. I should use the list-objects function with the typename for organizations. Let me first check what the exact typename is for organizations by listing the schemas.\n\nActually, I can try searching directly with the common typename pattern \"dxos.org/type/Organization\" first. If that doesn't work, I'll list the schemas to find the correct typename.\n\nI'll search for organizations with includeContent=false since the user just wants the count, and I'll set a higher limit to make sure I get all of them.","options":{}},{"type":"text","text":"I'll search for all organizations in the space for you.","options":{}},{"type":"tool-call","id":"toolu_014dvj6gRMB27qExFvaSkdZh","name":"list-objects","params":{"typename":"dxos.org/type/Organization","includeContent":false,"limit":100},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014dvj6gRMB27qExFvaSkdZh","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGY2D6088TTRJN28TH4P94","typename":"dxos.org/type/Organization","label":"Acme Corp"},{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGY2D8N3CH34BAFBSJ2MZT","typename":"dxos.org/type/Organization","label":"Globex Industries"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01PgBckhLteZ418p9ySMNJY6","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"I","metadata":{}},{"type":"text-delta","id":"0","delta":" found **","metadata":{}},{"type":"text-delta","id":"0","delta":"2 organizations** in the space:","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\n1. **Acme Corp","metadata":{}},{"type":"text-delta","id":"0","delta":"**","metadata":{}},{"type":"text-delta","id":"0","delta":"\n2. **Globex Industries","metadata":{}},{"type":"text-delta","id":"0","delta":"**","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":32,"totalTokens":38},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":5041},"cache_creation_input_tokens":5041,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_016w96wHLKi3U4SgvxVwp7v1","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to load the full details of a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" specific object with D","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"XN \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"dxn:echo:BDJ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"XMULPW5FB55","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"UZ7KP5HL","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"DHVTXUTHE2U","metadata":{}},{"type":"reasoning-delta","id":"0","delta":":01KHVGYCAS","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"1HX81WARRJ","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"H8VH19\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" and wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" know its description.\n\nI shoul","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d use the loa","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"object function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to retrieve the full details of this object","metadata":{}},{"type":"reasoning-delta","id":"0","delta":". The function takes","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" an array","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" of refs","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" as its parameter.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EuYDCkYICxgCKkDMtzC2N+QuxXR3jM/gMHd019nQ2QQJKqrGZSmATIg1Gn2xyl/lHuvqBxtEeNfWChOLcAH1K44FPqfdAcOemLJ4EgyPKjboKKgc1xnuuT8aDGKmrLUziWPb3Lu/BSIw+YpDfus4URC7mqBwXsn1b6Ztl/IuCinwDm4F1wIT1m1L8LC/d/cBXyDgv0KR3xrdKs0CRUFgtV0l3YdgpIHX5/tUbYHHZLubGumqCHx791FP4zVQkkQ6kv0FviiIILblvRirAT21WOEyukfBOIWGDy0d7vyBTYRDAmU3+Ik7pqZPwsNI+5F2593E4GXA9jnRQGIZCoG2AWdLbB9yDZmYuBVRH6fHR8oWqu2qX2uwVvQjTY70OYReTdNX5VyXfPs+L4bmIouaPMWmVdeVECD28iR/ceqeEs+h/iD5L1OCKrHmsuSIoGeLl0Izaq5Ply7vN2oaQwr/dY6EWR9jzbJX3kBaPgRANRo8ZhL3C5/WmaBQ93wfMXrAze9OlBjxN+siP/x9pWRl+PXTNEOqJQyZKfEVRFUFbNkEgegPB9WGiHSFp6LTwwngK1ZFdPUR1UQo4CPZ4xPNZzURPxqRnTjC8lKWkY9k169yyDDoEiUEkN8I2+mXgjFWDHGC8MjvMLfnGAE="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll load the full details of that","metadata":{}},{"type":"text-delta","id":"1","delta":" object for you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"{\"refs\": [\"d","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"xn:echo:","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"BDJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"XMU","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"LPW5FB55UZ7K","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"P5HLDHV","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"TXU","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"THE2","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"U:01KHVGYCAS","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"1HX81WA","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"RR","metadata":{}},{"type":"tool-params-delta","id":"toolu_014u3jHdzvqdNumiymqquo7x","delta":"JH8VH19\"]}","metadata":{}},{"type":"tool-params-end","id":"toolu_014u3jHdzvqdNumiymqquo7x","metadata":{}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object with DXN \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\" and wants to know its description.\n\nI should use the load-object function to retrieve the full details of this object. The function takes an array of refs as its parameter.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01DCf5XY1ZjjUwdJAYVFsAMC","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Let","metadata":{}},{"type":"text-delta","id":"0","delta":" me try loading","metadata":{}},{"type":"text-delta","id":"0","delta":" the object with a different format","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"{\"refs\": [{","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"\"@","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"typ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"e\":\"dxos","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":".echo.","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"model","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":".do","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"cumen","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"t.","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"DocumentD","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"at","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"a\",\"@id\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":":\"dxn:","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"echo:BDJX","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"MUL","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"PW5FB5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"5UZ7KP5HLDH","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"VTXUTHE2U:0","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"1KHVGYC","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"AS1HX81WARR","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","delta":"JH8VH19\"}]}","metadata":{}},{"type":"tool-params-end","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","metadata":{}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object with DXN \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\" and wants to know its description.\n\nI should use the load-object function to retrieve the full details of this object. The function takes an array of refs as its parameter.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try loading the object with a different format:","options":{}},{"type":"tool-call","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","params":{"refs":[{"@type":"dxos.echo.model.document.DocumentData","@id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"}]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    {\\n      \\\"@type\\\": \\\"dxos.echo.model.document.DocumentData\\\",\\n      \\\"@id\\\": \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n    }\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01EGRJtq6tpysvRYZ6b6mnPc","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Let","metadata":{}},{"type":"text-delta","id":"0","delta":" me search","metadata":{}},{"type":"text-delta","id":"0","delta":" for this object instea","metadata":{}},{"type":"text-delta","id":"0","delta":"d:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"{\"text","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"\": \"d","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"xn:e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"cho:BD","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"JXMULPW","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"5F","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"B55UZ7KP5HL","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"DHVTXUT","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"HE2U:01K","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"HVGYCAS1HX","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"81WA","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"RRJH8VH19","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":", \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"include","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"Content\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":": tr","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"ue","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":", \"limit\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","delta":"1}","metadata":{}},{"type":"tool-params-end","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":151,"totalTokens":157},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":452},"cache_creation_input_tokens":452,"cache_read_input_tokens":5199,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object with DXN \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\" and wants to know its description.\n\nI should use the load-object function to retrieve the full details of this object. The function takes an array of refs as its parameter.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try loading the object with a different format:","options":{}},{"type":"tool-call","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","params":{"refs":[{"@type":"dxos.echo.model.document.DocumentData","@id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"}]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    {\\n      \\\"@type\\\": \\\"dxos.echo.model.document.DocumentData\\\",\\n      \\\"@id\\\": \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n    }\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me search for this object instead:","options":{}},{"type":"tool-call","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","params":{"text":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","includeContent":true,"limit":1},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGYCBMCKYB1DA3X6K8AMEF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCBMCKYB1DA3X6K8AMEF","created":"2026-02-19T18:00:10.356Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?"}]}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_019eLmb1y9sov3YJufcZu65E","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The","metadata":{}},{"type":"text-delta","id":"0","delta":" search","metadata":{}},{"type":"text-delta","id":"0","delta":" is returning the","metadata":{}},{"type":"text-delta","id":"0","delta":" message","metadata":{}},{"type":"text-delta","id":"0","delta":" itself rather","metadata":{}},{"type":"text-delta","id":"0","delta":" than the object reference","metadata":{}},{"type":"text-delta","id":"0","delta":"d. Let me try a different approach an","metadata":{}},{"type":"text-delta","id":"0","delta":"d loa","metadata":{}},{"type":"text-delta","id":"0","delta":"d the object","metadata":{}},{"type":"text-delta","id":"0","delta":" using just","metadata":{}},{"type":"text-delta","id":"0","delta":" its","metadata":{}},{"type":"text-delta","id":"0","delta":" ID portion","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","delta":"{\"refs\": [\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","delta":"01KHVG","metadata":{}},{"type":"tool-params-delta","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","delta":"YCAS1HX","metadata":{}},{"type":"tool-params-delta","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","delta":"81WARRJH8VH","metadata":{}},{"type":"tool-params-delta","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","delta":"19\"]}","metadata":{}},{"type":"tool-params-end","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","metadata":{}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object with DXN \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\" and wants to know its description.\n\nI should use the load-object function to retrieve the full details of this object. The function takes an array of refs as its parameter.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try loading the object with a different format:","options":{}},{"type":"tool-call","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","params":{"refs":[{"@type":"dxos.echo.model.document.DocumentData","@id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"}]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    {\\n      \\\"@type\\\": \\\"dxos.echo.model.document.DocumentData\\\",\\n      \\\"@id\\\": \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n    }\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me search for this object instead:","options":{}},{"type":"tool-call","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","params":{"text":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","includeContent":true,"limit":1},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGYCBMCKYB1DA3X6K8AMEF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCBMCKYB1DA3X6K8AMEF","created":"2026-02-19T18:00:10.356Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?"}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"The search is returning the message itself rather than the object referenced. Let me try a different approach and load the object using just its ID portion:","options":{}},{"type":"tool-call","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","params":{"refs":["01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_019p2zUc9ySTX5Ac57t64w8G","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"It appears there","metadata":{}},{"type":"text-delta","id":"0","delta":" might be an issue with the format","metadata":{}},{"type":"text-delta","id":"0","delta":" of the reference","metadata":{}},{"type":"text-delta","id":"0","delta":". Let me search","metadata":{}},{"type":"text-delta","id":"0","delta":" for","metadata":{}},{"type":"text-delta","id":"0","delta":" all","metadata":{}},{"type":"text-delta","id":"0","delta":" objects to","metadata":{}},{"type":"text-delta","id":"0","delta":" see if","metadata":{}},{"type":"text-delta","id":"0","delta":" I","metadata":{}},{"type":"text-delta","id":"0","delta":" can find it:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":"{\"in","metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":"cludeCon","metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":"tent\": fals","metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":"e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":", \"limit\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","delta":"50}","metadata":{}},{"type":"tool-params-end","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":101,"totalTokens":107},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":334},"cache_creation_input_tokens":334,"cache_read_input_tokens":6064,"input_tokens":6,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object with DXN \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\" and wants to know its description.\n\nI should use the load-object function to retrieve the full details of this object. The function takes an array of refs as its parameter.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try loading the object with a different format:","options":{}},{"type":"tool-call","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","params":{"refs":[{"@type":"dxos.echo.model.document.DocumentData","@id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"}]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    {\\n      \\\"@type\\\": \\\"dxos.echo.model.document.DocumentData\\\",\\n      \\\"@id\\\": \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n    }\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me search for this object instead:","options":{}},{"type":"tool-call","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","params":{"text":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","includeContent":true,"limit":1},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGYCBMCKYB1DA3X6K8AMEF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCBMCKYB1DA3X6K8AMEF","created":"2026-02-19T18:00:10.356Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?"}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"The search is returning the message itself rather than the object referenced. Let me try a different approach and load the object using just its ID portion:","options":{}},{"type":"tool-call","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","params":{"refs":["01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"It appears there might be an issue with the format of the reference. Let me search for all objects to see if I can find it:","options":{}},{"type":"tool-call","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","name":"list-objects","params":{"includeContent":false,"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAEPC7Z416PBKW3PDPQ","typename":"dxos.org/type/Text"},{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAEPC7Z416PBKW3PDPR","typename":"dxos.org/type/Blueprint","label":"Assistant"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCAQG07X10YD41WGSQR0","typename":"dxos.org/type/ContextBinding"},{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","typename":"dxos.org/type/Organization","label":"Detail Corp"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCBMCKYB1DA3X6K8AMEF","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHNS9XMY42CQZGE27BEQ","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHNVD1GEMBC4S3GG9RD0","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHNX319E27JKN6P0S29V","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHP6CHER7TRJGHWTFNCZ","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYNMQ9J36JNG98M238N9P","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYNMT27S3TGS30E4V1EHN","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYNMYWSKY5PZ37SJ3GDXV","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSTTX4JHS6D2EHHESK4R","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSTXY14SJCBS7YVQZJN0","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSTZ9Q5GKMPB0FJ70TVQ","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSV9DPE153HHYWJX9MB3","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYXNXWYRJBY6NV6S9WQ0V","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYXP0S1FWWMGE3E3GEP4B","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYXP3DPJAW610YHZYW95W","typename":"dxos.org/type/Message"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_014KuWQz49VqYqpqQkVG7bLQ","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great","metadata":{}},{"type":"text-delta","id":"0","delta":"! I","metadata":{}},{"type":"text-delta","id":"0","delta":" can see the","metadata":{}},{"type":"text-delta","id":"0","delta":" object","metadata":{}},{"type":"text-delta","id":"0","delta":" exists","metadata":{}},{"type":"text-delta","id":"0","delta":".","metadata":{}},{"type":"text-delta","id":"0","delta":" It","metadata":{}},{"type":"text-delta","id":"0","delta":"'s an","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" object with","metadata":{}},{"type":"text-delta","id":"0","delta":" the label","metadata":{}},{"type":"text-delta","id":"0","delta":" \"Detail","metadata":{}},{"type":"text-delta","id":"0","delta":" Corp","metadata":{}},{"type":"text-delta","id":"0","delta":"\". Now let","metadata":{}},{"type":"text-delta","id":"0","delta":" me loa","metadata":{}},{"type":"text-delta","id":"0","delta":"d its","metadata":{}},{"type":"text-delta","id":"0","delta":" full","metadata":{}},{"type":"text-delta","id":"0","delta":" details","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"{\"ty","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"pename","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"\": \"dxo","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"s.org/typ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"e/Organi","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"zation\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":", \"includ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"eConte","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"nt\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":": true","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":", \"limit\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","delta":"5}","metadata":{}},{"type":"tool-params-end","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":127,"totalTokens":133},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":1886},"cache_creation_input_tokens":1886,"cache_read_input_tokens":6398,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants me to load the full details of a specific object with DXN \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\" and wants to know its description.\n\nI should use the load-object function to retrieve the full details of this object. The function takes an array of refs as its parameter.","options":{}},{"type":"text","text":"I'll load the full details of that object for you.","options":{}},{"type":"tool-call","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","params":{"refs":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_014u3jHdzvqdNumiymqquo7x","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try loading the object with a different format:","options":{}},{"type":"tool-call","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","params":{"refs":[{"@type":"dxos.echo.model.document.DocumentData","@id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19"}]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DAAYCUuzixmoAPotKc3SmR","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    {\\n      \\\"@type\\\": \\\"dxos.echo.model.document.DocumentData\\\",\\n      \\\"@id\\\": \\\"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19\\\"\\n    }\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me search for this object instead:","options":{}},{"type":"tool-call","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","params":{"text":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","includeContent":true,"limit":1},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01DxRvaVcLv9o1xPrZGHqhrS","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGYCBMCKYB1DA3X6K8AMEF","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCBMCKYB1DA3X6K8AMEF","created":"2026-02-19T18:00:10.356Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Load the full details of object dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19. What is its description?"}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"The search is returning the message itself rather than the object referenced. Let me try a different approach and load the object using just its ID portion:","options":{}},{"type":"tool-call","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","params":{"refs":["01KHVGYCAS1HX81WARRJH8VH19"]},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01HhZ6KJLR3R6FgVSG2RjWXK","name":"load-object","isFailure":false,"result":"MalformedOutput: { \"module\": \"Toolkit\", \"method\": \"load-object.handle\", \"description\": \"Failed to decode tool call parameters for tool 'load-object' from:\\n'{\\n  \\\"refs\\\": [\\n    \\\"01KHVGYCAS1HX81WARRJH8VH19\\\"\\n  ]\\n}'\", \"cause\": { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference }\ncaused by:\nParseError: { readonly refs: ReadonlyArray<<declaration schema>> }\n [\"refs\"]\n    ReadonlyArray<<declaration schema>>\n       [0]\n          reference","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"It appears there might be an issue with the format of the reference. Let me search for all objects to see if I can find it:","options":{}},{"type":"tool-call","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","name":"list-objects","params":{"includeContent":false,"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01FLQgauRAM3fbUbMG8NRAnZ","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAEPC7Z416PBKW3PDPQ","typename":"dxos.org/type/Text"},{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAEPC7Z416PBKW3PDPR","typename":"dxos.org/type/Blueprint","label":"Assistant"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCAQG07X10YD41WGSQR0","typename":"dxos.org/type/ContextBinding"},{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","typename":"dxos.org/type/Organization","label":"Detail Corp"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYCBMCKYB1DA3X6K8AMEF","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHNS9XMY42CQZGE27BEQ","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHNVD1GEMBC4S3GG9RD0","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHNX319E27JKN6P0S29V","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYHP6CHER7TRJGHWTFNCZ","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYNMQ9J36JNG98M238N9P","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYNMT27S3TGS30E4V1EHN","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYNMYWSKY5PZ37SJ3GDXV","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSTTX4JHS6D2EHHESK4R","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSTXY14SJCBS7YVQZJN0","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSTZ9Q5GKMPB0FJ70TVQ","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYSV9DPE153HHYWJX9MB3","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYXNXWYRJBY6NV6S9WQ0V","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYXP0S1FWWMGE3E3GEP4B","typename":"dxos.org/type/Message"},{"dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCADSP7Y72JVEG8ATBKC:01KHVGYXP3DPJAW610YHZYW95W","typename":"dxos.org/type/Message"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I can see the object exists. It's an Organization object with the label \"Detail Corp\". Now let me load its full details:","options":{}},{"type":"tool-call","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","name":"list-objects","params":{"typename":"dxos.org/type/Organization","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01EQ4LgBuMJxhqaYcnAFn4ff","name":"list-objects","isFailure":false,"result":[{"id":"01KHVGYCAS1HX81WARRJH8VH19","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGYCAS1HX81WARRJH8VH19","description":"A detailed organization.","name":"Detail Corp"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_019jdxhhdwYTW5uhT6KHummz","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect! I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve","metadata":{}},{"type":"text-delta","id":"0","delta":" successfully loade","metadata":{}},{"type":"text-delta","id":"0","delta":"d the full details of the object","metadata":{}},{"type":"text-delta","id":"0","delta":". ","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\nThe","metadata":{}},{"type":"text-delta","id":"0","delta":" object `","metadata":{}},{"type":"text-delta","id":"0","delta":"dxn","metadata":{}},{"type":"text-delta","id":"0","delta":":echo:BDJXM","metadata":{}},{"type":"text-delta","id":"0","delta":"ULPW5FB55UZ","metadata":{}},{"type":"text-delta","id":"0","delta":"7KP5HLDHV","metadata":{}},{"type":"text-delta","id":"0","delta":"TXUTHE2U:01","metadata":{}},{"type":"text-delta","id":"0","delta":"KHVGYCAS1H","metadata":{}},{"type":"text-delta","id":"0","delta":"X81WARRJH8","metadata":{}},{"type":"text-delta","id":"0","delta":"VH19` is an Organization object","metadata":{}},{"type":"text-delta","id":"0","delta":" with the following details:\n\n- **","metadata":{}},{"type":"text-delta","id":"0","delta":"Type","metadata":{}},{"type":"text-delta","id":"0","delta":"**:","metadata":{}},{"type":"text-delta","id":"0","delta":" `dxos","metadata":{}},{"type":"text-delta","id":"0","delta":".org/type/Organization`","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Name**: Detail","metadata":{}},{"type":"text-delta","id":"0","delta":" Corp","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Description**: \"","metadata":{}},{"type":"text-delta","id":"0","delta":"A detailed organization.\"\n- **ID","metadata":{}},{"type":"text-delta","id":"0","delta":"**: `01KHVGYC","metadata":{}},{"type":"text-delta","id":"0","delta":"AS1HX81WARR","metadata":{}},{"type":"text-delta","id":"0","delta":"JH8VH19`","metadata":{}},{"type":"text-delta","id":"0","delta":"\n\nThe description","metadata":{}},{"type":"text-delta","id":"0","delta":" of","metadata":{}},{"type":"text-delta","id":"0","delta":" this","metadata":{}},{"type":"text-delta","id":"0","delta":" organization","metadata":{}},{"type":"text-delta","id":"0","delta":" is:","metadata":{}},{"type":"text-delta","id":"0","delta":" **","metadata":{}},{"type":"text-delta","id":"0","delta":"\"A detailed organization.\"**","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":160,"totalTokens":166},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":270},"cache_creation_input_tokens":270,"cache_read_input_tokens":8284,"input_tokens":6,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01QJW5jWotSJ4DaYKv5mtV49","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" create an Employer relation between","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"John Connor\" (a","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" person) and \"Cyberdyne","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Systems\" (an organization) with the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" role \"Engineer\". They're","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" asking","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me to list","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas first to find the correct","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" relation typename.\n\nI","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"'ll","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" need to:\n1. List","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas to find the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Employer relation schema","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for the person","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"John Connor\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n3. Search","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" for the organization \"Cyberdyne","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" Systems\"\n4. Create the relation","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" between","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" them with the role \"Engineer\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n\nLet me start by listing the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" schemas.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EocFCkYICxgCKkDejbp2P6Re8Tt+4PRh6r7fEMEeeuyZo16LACJF9sw9pYMG1/lb16E9coBoka3+IiUSpr1r6hzixxbbgJvs/bgQEgxu9PRwc1KAJYQd2h8aDBTI19LrcLomjr968yIwxW72+rGI28qSym+U9Jzji/9SrcLnPPu0v1TG4sK/fudSK9aj2HQOlE/wdQ+/sHhpKu4DPznW8qyp3K3uU9HxTc0I1cRB0EubPE8KFGYZ1MEQGFjL7zWp2tzJQX2eJCIycMmnkP6DfHBg9PdOIOjAGBkfPOXkwpLCo6LUkNHQN6VwgT7Py6P7lHz16l06i8xSVIzPnayhZ2j7Gu3mEkFwsnIAJzc6CtuaGtf3+SiyuACMBz8qpdSXljq1AZT4EgnNAtqu1OpC40x3A/bKy4UHrClVBCump5zJ95IgyHpEy1sv2XAITSwh781Aq734uVYL8u5k99npykkhhpv1rEh5e6NHzcfhTsdnef+kuRFIwg2RI8MHJWmK1SMMhwnjdEmtz1+O1yXGBbrSLvHeQn+dcQUemDx2bw3wdqGRttH3u0dFUzXq9hrIsrmGzo15gxYoGC74CUmWSRFhh7rRPIKpz36zuKW+1saD1GBiDI0CpCvOHfgqcYTKYhS+vaQRCcIqEajjIMuCf5jzgoa2p27BxyJVf7OdyRlJCJAza5rUhmpYvz4xkmlX8Ilbndv0L87YRHJhi2f6+i/d3IXWhKSoQzCNSZiPkMFYv8+ZZ71HpuDv3uDZrnRDW35bGdHBjz5INpCT4mIYR5VzYo7KyivBJl5xjDs3mZL2Zggw/pkJyOT9x6lBKJfTehIU7YllUFsI0u9jPFjp1LD39rxicafsusgYAQ=="}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you create an Employer","metadata":{}},{"type":"text-delta","id":"1","delta":" relation.","metadata":{}},{"type":"text-delta","id":"1","delta":" Let me first list the schemas to fin","metadata":{}},{"type":"text-delta","id":"1","delta":"d the correct typename","metadata":{}},{"type":"text-delta","id":"1","delta":" for the Employer relation.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","delta":"{\"limit\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","delta":": 50}","metadata":{}},{"type":"tool-params-end","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":206,"totalTokens":216},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4808},"cache_creation_input_tokens":4808,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create an Employer relation between \"John Connor\" (a person) and \"Cyberdyne Systems\" (an organization) with the role \"Engineer\". They're asking me to list schemas first to find the correct relation typename.\n\nI'll need to:\n1. List schemas to find the Employer relation schema\n2. Search for the person \"John Connor\"\n3. Search for the organization \"Cyberdyne Systems\"\n4. Create the relation between them with the role \"Engineer\"\n\nLet me start by listing the schemas.","options":{}},{"type":"text","text":"I'll help you create an Employer relation. Let me first list the schemas to find the correct typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","params":{"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01SVRBWjdDFBjPQwyuEp6k2W","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I foun","metadata":{}},{"type":"text-delta","id":"0","delta":"d the","metadata":{}},{"type":"text-delta","id":"0","delta":" Employer","metadata":{}},{"type":"text-delta","id":"0","delta":" relation","metadata":{}},{"type":"text-delta","id":"0","delta":" schema","metadata":{}},{"type":"text-delta","id":"0","delta":". Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I","metadata":{}},{"type":"text-delta","id":"0","delta":" need to find the","metadata":{}},{"type":"text-delta","id":"0","delta":" Person name","metadata":{}},{"type":"text-delta","id":"0","delta":"d \"John","metadata":{}},{"type":"text-delta","id":"0","delta":" Connor","metadata":{}},{"type":"text-delta","id":"0","delta":"\" and the","metadata":{}},{"type":"text-delta","id":"0","delta":" Organization","metadata":{}},{"type":"text-delta","id":"0","delta":" named \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Cyb","metadata":{}},{"type":"text-delta","id":"0","delta":"erdyne Systems\"","metadata":{}},{"type":"text-delta","id":"0","delta":" to create","metadata":{}},{"type":"text-delta","id":"0","delta":" the relation","metadata":{}},{"type":"text-delta","id":"0","delta":" between","metadata":{}},{"type":"text-delta","id":"0","delta":" them.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"{\"typename\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":" \"dxos.org/","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"type/P","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"erson\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":", \"text","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"\": \"John C","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"onnor\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":", \"includeCo","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"ntent","metadata":{}},{"type":"tool-params-delta","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","delta":"\": false}","metadata":{}},{"type":"tool-params-end","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":139,"totalTokens":145},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":7674},"cache_creation_input_tokens":7674,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":4,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create an Employer relation between \"John Connor\" (a person) and \"Cyberdyne Systems\" (an organization) with the role \"Engineer\". They're asking me to list schemas first to find the correct relation typename.\n\nI'll need to:\n1. List schemas to find the Employer relation schema\n2. Search for the person \"John Connor\"\n3. Search for the organization \"Cyberdyne Systems\"\n4. Create the relation between them with the role \"Engineer\"\n\nLet me start by listing the schemas.","options":{}},{"type":"text","text":"I'll help you create an Employer relation. Let me first list the schemas to find the correct typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","params":{"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the Employer relation schema. Now I need to find the Person named \"John Connor\" and the Organization named \"Cyberdyne Systems\" to create the relation between them.","options":{}},{"type":"tool-call","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","params":{"typename":"dxos.org/type/Person","text":"John Connor","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY1MCKEN75PCVXDVM43","typename":"dxos.org/type/Person","label":"John Connor"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01LRZVP1NxUYsdncD524g8mN","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"tool-params-start","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"{\"type","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"name\": \"dxo","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"s.org/","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"type/Org","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"anization\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":", \"text\": \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"Cyberdyne","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":" Sy","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"stems\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":", \"in","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"cludeCont","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"ent","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"\": fa","metadata":{}},{"type":"tool-params-delta","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","delta":"lse}","metadata":{}},{"type":"tool-params-end","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":101,"totalTokens":107},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":228},"cache_creation_input_tokens":228,"cache_read_input_tokens":7674,"input_tokens":6,"output_tokens":24,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create an Employer relation between \"John Connor\" (a person) and \"Cyberdyne Systems\" (an organization) with the role \"Engineer\". They're asking me to list schemas first to find the correct relation typename.\n\nI'll need to:\n1. List schemas to find the Employer relation schema\n2. Search for the person \"John Connor\"\n3. Search for the organization \"Cyberdyne Systems\"\n4. Create the relation between them with the role \"Engineer\"\n\nLet me start by listing the schemas.","options":{}},{"type":"text","text":"I'll help you create an Employer relation. Let me first list the schemas to find the correct typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","params":{"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the Employer relation schema. Now I need to find the Person named \"John Connor\" and the Organization named \"Cyberdyne Systems\" to create the relation between them.","options":{}},{"type":"tool-call","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","params":{"typename":"dxos.org/type/Person","text":"John Connor","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY1MCKEN75PCVXDVM43","typename":"dxos.org/type/Person","label":"John Connor"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"tool-call","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","name":"list-objects","params":{"typename":"dxos.org/type/Organization","text":"Cyberdyne Systems","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY35PSGCKDFM3AEV7XN","typename":"dxos.org/type/Organization","label":"Cyberdyne Systems"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01WbZvtVsJRkCwCe7s2BtNgS","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect! I found both entities. Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I","metadata":{}},{"type":"text-delta","id":"0","delta":" can","metadata":{}},{"type":"text-delta","id":"0","delta":" create the","metadata":{}},{"type":"text-delta","id":"0","delta":" Employer relation connecting","metadata":{}},{"type":"text-delta","id":"0","delta":" John Connor to Cyberdyne Systems","metadata":{}},{"type":"text-delta","id":"0","delta":" with","metadata":{}},{"type":"text-delta","id":"0","delta":" the role","metadata":{}},{"type":"text-delta","id":"0","delta":" \"Engineer","metadata":{}},{"type":"text-delta","id":"0","delta":"\".","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","name":"create-relation","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"{\"typenam","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"e\": \"dxos.o","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"rg/relat","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"ion/Employ","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"er\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":", \"sour","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"ce\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":": \"dxn","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":":e","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"cho:BDJX","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"MULPW5FB55","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"UZ7KP","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"5HLDH","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"VTXUTHE2U","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":":0","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"1KHVG","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"ZAY1M","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"CKEN75PCVXD","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"VM43\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":", \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"target","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"\": \"dxn","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":":ec","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"ho:BDJXMULP","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"W5FB55","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"UZ7KP","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"5HLDH","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"VTXUTHE2U","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":":01KHVGZAY3","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"5PSGCKDFM3A","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"EV7XN\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":", \"data","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"\": {\"role","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"\"Enginee","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"r\",\"acti","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"ve\":tr","metadata":{}},{"type":"tool-params-delta","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","delta":"ue}}","metadata":{}},{"type":"tool-params-end","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":265,"totalTokens":271},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":195},"cache_creation_input_tokens":195,"cache_read_input_tokens":7902,"input_tokens":6,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Create an Employer relation from person \"John Connor\" to organization \"Cyberdyne Systems\" with role \"Engineer\". List schemas first to find the relation typename.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to create an Employer relation between \"John Connor\" (a person) and \"Cyberdyne Systems\" (an organization) with the role \"Engineer\". They're asking me to list schemas first to find the correct relation typename.\n\nI'll need to:\n1. List schemas to find the Employer relation schema\n2. Search for the person \"John Connor\"\n3. Search for the organization \"Cyberdyne Systems\"\n4. Create the relation between them with the role \"Engineer\"\n\nLet me start by listing the schemas.","options":{}},{"type":"text","text":"I'll help you create an Employer relation. Let me first list the schemas to find the correct typename for the Employer relation.","options":{}},{"type":"tool-call","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","params":{"limit":50},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01EXVd6eoCCxujQ2Y8BPERhg","name":"list-schemas","isFailure":false,"result":[{"typename":"dxos.org/relation/Employer","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/relation/Employer","entityKind":"relation","typename":"dxos.org/relation/Employer","version":"0.1.0","relationTarget":{"$ref":"dxn:type:dxos.org/type/Organization"},"relationSource":{"$ref":"dxn:type:dxos.org/type/Person"},"type":"object","properties":{"id":{"type":"string","description":"A Universally Unique Lexicographically Sortable Identifier","pattern":"^[0-7][0-9A-HJKMNP-TV-Z]{25}$"},"role":{"type":"string"},"active":{"type":"boolean"},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["id"],"propertyOrder":["id","role","active","startDate","endDate"],"additionalProperties":false,"description":"An employing organization of a person."},"kind":"relation"},{"typename":"dxos.org/type/Blueprint","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Blueprint","entityKind":"object","typename":"dxos.org/type/Blueprint","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"key":{"type":"string","description":"Unique registration key for the blueprint"},"name":{"type":"string","description":"Human-readable name of the blueprint"},"description":{"type":"string","description":"Description of the blueprint's purpose and functionality"},"instructions":{"type":"object","required":["source"],"properties":{"source":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Text"},"schemaVersion":"0.1.0"}}],"description":"Handlebars template source"},"inputs":{"type":"array","items":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"kind":{"type":"string","enum":["value","pass-through","retriever","function","query","resolver","context","schema"]},"default":{"$id":"/schemas/any","title":"any"},"function":{"type":"string"}},"additionalProperties":false,"propertyOrder":["name","kind","default","function"]}}},"additionalProperties":false,"description":"Instructions that guide the AI assistant's behavior and responses","propertyOrder":["source","inputs"]},"tools":{"type":"array","items":{"$ref":"#/$defs/ToolId"},"description":"Array of tools that the AI assistant can use when this blueprint is active"}},"required":["key","name","instructions","tools","id"],"propertyOrder":["key","name","description","instructions","tools","id"],"additionalProperties":false,"annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Organization","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Organization","entityKind":"object","typename":"dxos.org/type/Organization","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","title":"Name","annotations":{"generator":{"generator":"company.name","probability":1}}},"description":{"type":"string","title":"Description","annotations":{"generator":{"generator":"lorem.paragraphs","args":[{"min":1,"max":3}]}}},"status":{"type":"string","enum":["prospect","qualified","active","commit","reject"],"title":"Status","annotations":{"meta":{"singleSelect":{"options":[{"id":"prospect","title":"Prospect","color":"indigo"},{"id":"qualified","title":"Qualified","color":"purple"},{"id":"active","title":"Active","color":"amber"},{"id":"commit","title":"Commit","color":"emerald"},{"id":"reject","title":"Reject","color":"red"}]}},"generator":{"generator":"helpers.arrayElement","args":[["prospect","qualified","active","commit","reject"]]}},"format":"single-select"},"image":{"type":"string","title":"Image","annotations":{"generator":"image.url"}},"website":{"type":"string","title":"Website","annotations":{"generator":"internet.url"}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["name","description","status","image","website","location","id"],"additionalProperties":false,"description":"An organization.","title":"Organization","annotations":{"labelProp":["name"]}},"kind":"record"},{"typename":"dxos.org/type/Person","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Person","entityKind":"object","typename":"dxos.org/type/Person","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"fullName":{"type":"string","title":"Full Name","annotations":{"generator":{"generator":"person.fullName","probability":1}}},"preferredName":{"type":"string","title":"Preferred Name"},"nickname":{"type":"string","title":"Nickname"},"image":{"type":"string","title":"Image"},"organization":{"allOf":[{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/type/Organization"},"schemaVersion":"0.1.0"}}],"description":"Current employer","title":"Employer","annotations":{"meta":{"referenceProperty":"name"}}},"jobTitle":{"type":"string","title":"Job Title"},"department":{"type":"string","title":"Department"},"notes":{"type":"string","title":"Notes"},"emails":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"Email address","title":"Email","default":"hello@email.com","pattern":"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$","annotations":{"generator":"internet.email"},"format":"email"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"identities":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"phoneNumbers":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["label","value"]},"title":"Phone Numbers"},"addresses":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"object","required":[],"properties":{"street":{"type":"string","description":"The street address.","examples":["1600 Amphitheatre Pkwy"]},"extended":{"type":"string","description":"An address extension such as an apartment number, C/O or alternative name.","examples":["Apt 1","Suite 2"]},"locality":{"type":"string","description":"The locality in which the street address is, and which is in the region.","examples":["Mountain View","Bangkok"]},"region":{"type":"string","description":"The region in which the locality is, and which is in the country.","examples":["CA","NY"]},"postalCode":{"type":"string","description":"The postal code.","examples":["12345","A1A 1A1"]},"postOfficeBoxNumber":{"type":"string","description":"The post office box number for PO Box addresses."},"country":{"type":"string","description":"The country in 2-letter ISO 3166-1 alpha-2 format.","examples":["US","SG"]}},"additionalProperties":false,"propertyOrder":["street","extended","locality","region","postalCode","postOfficeBoxNumber","country"]}},"additionalProperties":false,"propertyOrder":["label","value"]}},"urls":{"type":"array","items":{"type":"object","required":["value"],"properties":{"label":{"type":"string"},"value":{"type":"string","description":"URL","title":"URL","default":"https://example.com","pattern":"^(\\w+?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$","annotations":{"generator":"internet.url"},"format":"url"}},"additionalProperties":false,"propertyOrder":["label","value"]}},"birthday":{"type":"string","title":"Birthday","annotations":{"generator":"date.iso8601"}},"fields":{"type":"array","items":{"type":"object","required":["label","value"],"properties":{"category":{"type":"string"},"label":{"type":"string"},"value":{"type":"string"}},"additionalProperties":false,"propertyOrder":["category","label","value"]}},"location":{"type":"array","minItems":2,"items":[{"type":"number","title":"Longitude"},{"type":"number","title":"Latitude"},{"type":"number","title":"Height ASL (m)"}],"additionalItems":false,"description":"GeoJSON Position","title":"Location","format":"lnglat"}},"required":["id"],"propertyOrder":["fullName","preferredName","nickname","image","organization","jobTitle","department","notes","emails","identities","phoneNumbers","addresses","urls","birthday","fields","location","id"],"additionalProperties":false,"title":"Person","annotations":{"labelProp":["preferredName","fullName","nickname"]}},"kind":"record"},{"typename":"dxos.org/type/Tag","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:dxos.org/type/Tag","entityKind":"object","typename":"dxos.org/type/Tag","version":"0.1.0","type":"object","properties":{"id":{"type":"string"},"label":{"type":"string"},"hue":{"type":"string"}},"required":["label","id"],"propertyOrder":["label","hue","id"],"additionalProperties":false,"annotations":{"labelProp":["label"]}},"kind":"record"},{"typename":"example.com/type/Expando","jsonSchema":{"$schema":"http://json-schema.org/draft-07/schema#","$id":"dxn:type:example.com/type/Expando","entityKind":"object","typename":"example.com/type/Expando","version":"0.1.0","type":"object","properties":{"id":{"type":"string"}},"required":["id"],"propertyOrder":["id"],"additionalProperties":{"$id":"/schemas/any","title":"any"}},"kind":"record"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Great! I found the Employer relation schema. Now I need to find the Person named \"John Connor\" and the Organization named \"Cyberdyne Systems\" to create the relation between them.","options":{}},{"type":"tool-call","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","params":{"typename":"dxos.org/type/Person","text":"John Connor","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01AgwagWd1z4UtUAKZQV1S8S","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY1MCKEN75PCVXDVM43","typename":"dxos.org/type/Person","label":"John Connor"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"tool-call","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","name":"list-objects","params":{"typename":"dxos.org/type/Organization","text":"Cyberdyne Systems","includeContent":false},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011NVaFGjKDcpDjjFRd99R9T","name":"list-objects","isFailure":false,"result":[{"dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY35PSGCKDFM3AEV7XN","typename":"dxos.org/type/Organization","label":"Cyberdyne Systems"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found both entities. Now I can create the Employer relation connecting John Connor to Cyberdyne Systems with the role \"Engineer\".","options":{}},{"type":"tool-call","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","name":"create-relation","params":{"typename":"dxos.org/relation/Employer","source":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY1MCKEN75PCVXDVM43","target":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZAY35PSGCKDFM3AEV7XN","data":{"role":"Engineer","active":true}},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_016t3AMg6BguHxbw5tmj6AJX","name":"create-relation","isFailure":false,"result":{"id":"01KHVGZY7TS0YFN2EV1NT9MVY5","@type":"dxn:type:dxos.org/relation/Employer:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVGZY7TS0YFN2EV1NT9MVY5","@relationSource":"dxn:echo:@:01KHVGZAY1MCKEN75PCVXDVM43","@relationTarget":"dxn:echo:@:01KHVGZAY35PSGCKDFM3AEV7XN","active":true,"role":"Engineer"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Jj8JC8SiwhjmU5LeA7rin4","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Successfully","metadata":{}},{"type":"text-delta","id":"0","delta":" created the Employer relation! Here","metadata":{}},{"type":"text-delta","id":"0","delta":"'s a summary of what was create","metadata":{}},{"type":"text-delta","id":"0","delta":"d:\n\n-","metadata":{}},{"type":"text-delta","id":"0","delta":" **Relation Type","metadata":{}},{"type":"text-delta","id":"0","delta":"**: ","metadata":{}},{"type":"text-delta","id":"0","delta":"dxos.org/relation/","metadata":{}},{"type":"text-delta","id":"0","delta":"Employer\n- **Person","metadata":{}},{"type":"text-delta","id":"0","delta":" (","metadata":{}},{"type":"text-delta","id":"0","delta":"Source","metadata":{}},{"type":"text-delta","id":"0","delta":")**: John Connor","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **Organization (Target)**:","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems  \n- **","metadata":{}},{"type":"text-delta","id":"0","delta":"Role**: Engineer\n- **Status**:","metadata":{}},{"type":"text-delta","id":"0","delta":" Active","metadata":{}},{"type":"text-delta","id":"0","delta":"\n- **","metadata":{}},{"type":"text-delta","id":"0","delta":"Relation","metadata":{}},{"type":"text-delta","id":"0","delta":" ID**: 01KHVG","metadata":{}},{"type":"text-delta","id":"0","delta":"ZY7TS0YFN","metadata":{}},{"type":"text-delta","id":"0","delta":"2EV1NT9MVY","metadata":{}},{"type":"text-delta","id":"0","delta":"5\n\nThe relation now","metadata":{}},{"type":"text-delta","id":"0","delta":" formally","metadata":{}},{"type":"text-delta","id":"0","delta":" establ","metadata":{}},{"type":"text-delta","id":"0","delta":"ishes that John Connor is employe","metadata":{}},{"type":"text-delta","id":"0","delta":"d as","metadata":{}},{"type":"text-delta","id":"0","delta":" an Engineer at","metadata":{}},{"type":"text-delta","id":"0","delta":" Cyberdyne Systems.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":124,"totalTokens":130},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":468},"cache_creation_input_tokens":468,"cache_read_input_tokens":8097,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the relation dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH02FD6ZH5KMDKWG3WQ0Q9.","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01C8YtSeih7kmYfGi4JbsM1f","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to delete a relation with the ID","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"dxn:echo:B","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"DJXMULPW5FB","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"55UZ7KP5","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"HLDHVTXUTHE2","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"U:01KHVH02","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"FD6ZH5K","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"MDKWG3WQ0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"Q9\". This is","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" a straight","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"forward request -","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" I need to use the delete-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"relation function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" with this","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" ID","metadata":{}},{"type":"reasoning-delta","id":"0","delta":".","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"Ev4CCkYICxgCKkAh6hPshKIz/8aBW1oG1ZwnFmgTsycW5rxR1UyMrXrHU4rQVDmeuATTPheNsiBUOiidCXf1GL72PxBEgvqTgPZtEgwUT/VwlsSoXh5uGw0aDEoOjRIN1AZcP3dsbyIwaau12NzSXTz47vnvhFmLJEbn2m6shbVU/zYgo+3mA2kQtzLTyqVeLrbuXWdMnqKdKuUBYC4sdk+aTc5UoDD0CxsIff6zSw+eWuhmz3zfxUmrs9SK+jhf1ZwUSXgR4nxRIF/o3oD2gn9e+7QPS3DJFB4SYRQ/gmSYHl0wA+GUxtvP3Ptn8a83AaglLf495rYQ4QVN0bPd9V2qHi48b+wcB+mWzxBr0AX/U9PFSj41r8lxxNqvv1+MpOp2i+aqmAOtIhHBKTQIkXxO0a0xBX5CDzUUVcJtdcjBRYUR/C6ruL53eAU1Lrwcy9hTnS/6Ku/SELhTO628R5i9RoyCPVEYIrbaIbB9SaTSanjqqlQL1sP8VuDjMG7K7RgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I","metadata":{}},{"type":"text-delta","id":"1","delta":"'ll delete the relation with that","metadata":{}},{"type":"text-delta","id":"1","delta":" ID","metadata":{}},{"type":"text-delta","id":"1","delta":" for","metadata":{}},{"type":"text-delta","id":"1","delta":" you.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","name":"delete-relation","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"{\"i","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"d\": \"dxn:e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"cho:B","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"DJXMULPW5FB5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"5UZ7KP","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"5HLDHVTXU","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"THE2U:01KHVH","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"02","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"FD6ZH5KMDK","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"WG3","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"WQ0","metadata":{}},{"type":"tool-params-delta","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","delta":"Q9\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":220,"totalTokens":230},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4836},"cache_creation_input_tokens":4836,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Delete the relation dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH02FD6ZH5KMDKWG3WQ0Q9.","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to delete a relation with the ID \"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH02FD6ZH5KMDKWG3WQ0Q9\". This is a straightforward request - I need to use the delete-relation function with this ID.","options":{}},{"type":"text","text":"I'll delete the relation with that ID for you.","options":{}},{"type":"tool-call","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","name":"delete-relation","params":{"id":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH02FD6ZH5KMDKWG3WQ0Q9"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01SMtUXEz1rH4Q86EFyus6dn","name":"delete-relation","isFailure":false,"result":{},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01BMTbLFywo8r9Bbcgwvjuxr","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"The relation has been successfully deleted.","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":5,"outputTokens":10,"totalTokens":15},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4945},"cache_creation_input_tokens":4945,"cache_read_input_tokens":0,"input_tokens":5,"output_tokens":7,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01U3LnvL6FCrt8VKDXHY2jNy","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"reasoning-start","id":"0","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"The user wants to add a tag \"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"important\" to an organization called \"Tagge","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d Corp\". \n\nTo","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" do this, I need to:","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n1. First","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d the organization \"Tagged Corp\"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"\n2. Fin","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d or","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" create a tag with label","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" \"important\"\n3. Use","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" the ad","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d-","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"tag function","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" to add the","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" tag to the organization\n\nLet","metadata":{}},{"type":"reasoning-delta","id":"0","delta":" me start by searching for the organization an","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"d tag.","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{}},{"type":"reasoning-delta","id":"0","delta":"","metadata":{"anthropic":{"type":"thinking","signature":"EuQDCkYICxgCKkBQWgtTPhyL+52Pgab1ndzHeYLd/fS898E8sKTM/r4IKFLp8Y0q1mlU8nnjBaaF8Xzftqel7p8RztdFz5Q4QtTWEgyFG3Yw05FikX4xKqAaDOjarvyRh2qpOK1fByIw+j4Q3g/j6hmMMn8PMbbTAqcxzhml3bYLn9Dn9BNy5XlRXX7JJ7+OU4gxII8/n2n+KssCvo0IUntB1lLIdW5YqrEVWnp4YxVhU8Tz2afsisi4XclNq00bjWQZL+DoOt4j/aUlvAyGOb11NG+gZjmbr7usA6PvwlApDhXKFqEBNjT5aJ1eK12BOdIiYVgNfqPL4izJG3I2rXLxC396Tm20LpL4ShVc8/HOYG3qgLptlju/wMEorNhARuAahHamwE/kcpsap5a1rJJQFW69ScPNJ8Ckf186UbOtv31PT07kRxGO0zxqFCwVRNVG2b/leqlfTxv7r/UECHmq5i7+xiA6FQkwb6ZRSCSXzVFR4WskBTwwIzUvYf9IQRqSRQCRgHKd4d8S3cSHhXd1GUZyc/qS48ztl9LbDswiNM3v9cfMpF9u5uv+pdzNkrgQxWWaiIdbxcVPIpPgA2t4AAMVeGyn7ADlJj5dAx0rZicmrVaoDJ0yG0RME7VWJHZ5rJ9+BhgB"}}},{"type":"reasoning-end","id":"0","metadata":{}},{"type":"text-start","id":"1","metadata":{}},{"type":"text-delta","id":"1","delta":"I'll help you add the","metadata":{}},{"type":"text-delta","id":"1","delta":" \"important\" tag to \"Tagged Corp","metadata":{}},{"type":"text-delta","id":"1","delta":"\". Let me first find both","metadata":{}},{"type":"text-delta","id":"1","delta":" the organization and the tag.","metadata":{}},{"type":"text-end","id":"1","metadata":{}},{"type":"tool-params-start","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"{\"text\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":" \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"Tagged C","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"or","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"p\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":", \"inclu","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"deContent","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":"\": true","metadata":{}},{"type":"tool-params-delta","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","delta":", \"limit\": 5}","metadata":{}},{"type":"tool-params-end","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":10,"outputTokens":205,"totalTokens":215},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":4786},"cache_creation_input_tokens":4786,"cache_read_input_tokens":0,"input_tokens":10,"output_tokens":8,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag \"important\" to an organization called \"Tagged Corp\". \n\nTo do this, I need to:\n1. First find the organization \"Tagged Corp\"\n2. Find or create a tag with label \"important\"\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization and tag.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to \"Tagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ERZSDJNNB926NF3FYW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ERZSDJNNB926NF3FYW","name":"Tagged Corp"},{"id":"01KHVH09FKW7XFHACAGDSJ7FFK","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09EERCGBW0JAAHB6S0N7:01KHVH09FKW7XFHACAGDSJ7FFK","created":"2026-02-19T18:01:12.947Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Add tag \"important\" to the organization \"Tagged Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01PjpoiZyQ7kmkXYRWjRo5hT","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Now","metadata":{}},{"type":"text-delta","id":"0","delta":" let me search","metadata":{}},{"type":"text-delta","id":"0","delta":" for the \"important\" tag:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"{\"typename\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":" \"dxos","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":".org/ty","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"pe/Tag\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":", ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"\"tex","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"t\": \"import","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"ant\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":", \"in","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"clud","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"eConten","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"t\": tru","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":"e","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":", \"limit\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","delta":" 10}","metadata":{}},{"type":"tool-params-end","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":126,"totalTokens":132},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":5208},"cache_creation_input_tokens":5208,"cache_read_input_tokens":0,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag \"important\" to an organization called \"Tagged Corp\". \n\nTo do this, I need to:\n1. First find the organization \"Tagged Corp\"\n2. Find or create a tag with label \"important\"\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization and tag.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to \"Tagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ERZSDJNNB926NF3FYW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ERZSDJNNB926NF3FYW","name":"Tagged Corp"},{"id":"01KHVH09FKW7XFHACAGDSJ7FFK","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09EERCGBW0JAAHB6S0N7:01KHVH09FKW7XFHACAGDSJ7FFK","created":"2026-02-19T18:01:12.947Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Add tag \"important\" to the organization \"Tagged Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for the \"important\" tag:","options":{}},{"type":"tool-call","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","params":{"typename":"dxos.org/type/Tag","text":"important","includeContent":true,"limit":10},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ETZ6J2RZ774WQC7Y14","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ETZ6J2RZ774WQC7Y14","label":"important"}],"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01Hp9LxMULJddu7Wc5J2z3d1","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Perfect! I found both","metadata":{}},{"type":"text-delta","id":"0","delta":" the organization \"","metadata":{}},{"type":"text-delta","id":"0","delta":"Tagged Corp\" and the \"","metadata":{}},{"type":"text-delta","id":"0","delta":"important\" tag. Now","metadata":{}},{"type":"text-delta","id":"0","delta":" I'll add the tag to the organization","metadata":{}},{"type":"text-delta","id":"0","delta":":","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","name":"add-tag","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"{\"objectId\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":" \"01KHVH","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"09ERZSDJNN","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"B926NF","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"3FYW","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":", \"tagId","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"\":","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":" \"01KHVH09","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"ETZ6J2","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"RZ774WQC","metadata":{}},{"type":"tool-params-delta","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","delta":"7Y14\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":138,"totalTokens":144},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":261},"cache_creation_input_tokens":261,"cache_read_input_tokens":5208,"input_tokens":6,"output_tokens":5,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag \"important\" to an organization called \"Tagged Corp\". \n\nTo do this, I need to:\n1. First find the organization \"Tagged Corp\"\n2. Find or create a tag with label \"important\"\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization and tag.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to \"Tagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ERZSDJNNB926NF3FYW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ERZSDJNNB926NF3FYW","name":"Tagged Corp"},{"id":"01KHVH09FKW7XFHACAGDSJ7FFK","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09EERCGBW0JAAHB6S0N7:01KHVH09FKW7XFHACAGDSJ7FFK","created":"2026-02-19T18:01:12.947Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Add tag \"important\" to the organization \"Tagged Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for the \"important\" tag:","options":{}},{"type":"tool-call","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","params":{"typename":"dxos.org/type/Tag","text":"important","includeContent":true,"limit":10},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ETZ6J2RZ774WQC7Y14","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ETZ6J2RZ774WQC7Y14","label":"important"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found both the organization \"Tagged Corp\" and the \"important\" tag. Now I'll add the tag to the organization:","options":{}},{"type":"tool-call","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","name":"add-tag","params":{"objectId":"01KHVH09ERZSDJNNB926NF3FYW","tagId":"01KHVH09ETZ6J2RZ774WQC7Y14"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","name":"add-tag","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nError: Invalid DXN: 01KHVH09ERZSDJNNB926NF3FYW","providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_0136k2cSFrMPFayDbePJsAue","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Let","metadata":{}},{"type":"text-delta","id":"0","delta":" me try","metadata":{}},{"type":"text-delta","id":"0","delta":" with","metadata":{}},{"type":"text-delta","id":"0","delta":" the full","metadata":{}},{"type":"text-delta","id":"0","delta":" DXN format:","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"tool-params-start","id":"toolu_01MC986K8doDqTy7M8jjCmqt","name":"add-tag","providerExecuted":false,"metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"{\"objectId\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":": \"dxn:ec","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"ho","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":":BDJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"XMULPW5FB55","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"UZ7KP5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"HL","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"DHVTXUTHE2U","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":":01KHVH0","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"9ERZSDJ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"NNB926NF3F","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"YW\"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":", \"","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"tagId\": ","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"\"dxn:ec","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"ho:B","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"DJXMULPW5","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"FB55","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"UZ7","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"KP5HLDHVTXUT","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"HE2U:","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"01KH","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"VH09ETZ6J2R","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"Z774W","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"QC7Y1","metadata":{}},{"type":"tool-params-delta","id":"toolu_01MC986K8doDqTy7M8jjCmqt","delta":"4\"}","metadata":{}},{"type":"tool-params-end","id":"toolu_01MC986K8doDqTy7M8jjCmqt","metadata":{}},{"type":"finish","reason":"tool-calls","usage":{"inputTokens":6,"outputTokens":189,"totalTokens":195},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":193},"cache_creation_input_tokens":193,"cache_read_input_tokens":5469,"input_tokens":6,"output_tokens":1,"server_tool_use":null,"service_tier":"standard"}}}}]},{"parameters":{"model":"@anthropic/claude-opus-4-0","stream":true,"tools":[{"name":"add-to-context","description":"Adds the object to the chat context.\nUse this it for objects that are useful long-term for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to add to the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-from-context","description":"Removes the object from the chat context.\nUse this it for objects that are no longer useful for the conversation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"Object to remove from the chat context.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"load-object","description":"Loads the object or relation content.\nCan load multiple objects at at time.\nUse the to read the data when you have a DXN.\nCall this tool with an array of one or more DXNs or object IDs.\nWhen use see a reference ({ '/': 'dxn:...' }), you can call this function to load the object.\nNote that returned data is only a snapshot in time, and might have changed since the object was last loaded.","inputSchema":{"type":"object","required":["refs"],"properties":{"refs":{"type":"array","items":{"$id":"/schemas/echo/ref","$ref":"/schemas/echo/ref","reference":{"schema":{"$ref":"dxn:type:dxos.org/schema/AnyObject"},"schemaVersion":"0.0.0"}}}},"additionalProperties":false}},{"name":"create-object","description":"Creates a new object and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","data"],"properties":{"typename":{"type":"string"},"data":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"delete-object","description":"Deletes the object.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"update-object","description":"Updates the object properties.","inputSchema":{"type":"object","required":["id","properties"],"properties":{"id":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"properties":{"type":"object","required":[],"properties":{},"additionalProperties":{"$id":"/schemas/any","title":"any"}}},"additionalProperties":false}},{"name":"list-objects","description":"Query for objects in ECHO.\nUse this tool when searching for information in the space (both automerge and queues).\nCurrently, two types of queries are supported:\n  - Full-text search - terms may appear anywhere in the object.\n  - Type-based search - objects of a specific type.\nYou can use them together, for example, to search for objects of a specific type that match a full-text query.\nImportant: Whem querying by typename, make sure to list the schema first, to get the exact typename.\n\nOmit both typename and text to search for all objects.\n\n<output_format>\n  You can choose to either return the full object data, or just the DXN, type and label.\n  When expecting a lot of results, run with includeContent=false to not pollute the context, and then load specific objects using the load tool.\n\n  You can choose to get the content right away, if you don't expect a lot of results.\n  To load content right away, run with includeContent=true.\n  When loading content, set an appropriate limit on the number of results to avoid overwhelming the context.\n</output_format>\n\n<example description=\"All tasks related to Cyberdyne and Bob\">\n  {\n    \"typename\": \"dxos.org/type/Task\",\n    \"text\": \"cyberdyne bob\",\n  }\n</example>\n\n<example description=\"Financial report Q1 2026\">\n  {\n    \"typename\": \"dxos.org/type/Document\",\n    \"text\": \"financial report Q1 2026\",\n    \"includeContent\": true\n    \"limit\": 3\n  }\n</example>","inputSchema":{"type":"object","required":[],"properties":{"typename":{"type":"string","description":"The typename of the objects to list."},"text":{"type":"string","description":"Full text search query."},"includeContent":{"type":"boolean","description":"Include the full object data in the response.","default":false},"limit":{"type":"number","description":"The maximum number of results to return.","default":10}},"additionalProperties":false}},{"name":"create-relation","description":"Creates a new relation and adds it to the current space.\nGet the schema from the schema-list tool and ensure that the data matches the corresponding schema.","inputSchema":{"type":"object","required":["typename","source","target","data"],"properties":{"typename":{"type":"string"},"source":{"type":"string","description":"The ID of the source object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"target":{"type":"string","description":"The ID of the target object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"data":{"$id":"/schemas/any","description":"The data to be stored in the relation.","title":"any"}},"additionalProperties":false}},{"name":"delete-relation","description":"Deletes the relation.","inputSchema":{"type":"object","required":["id"],"properties":{"id":{"type":"string","description":"The ID of the relation.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"add-schema","description":"Adds a schema to the space.\nThe name will be used when displayed to the user.","inputSchema":{"type":"object","required":["name","typename","jsonSchema"],"properties":{"name":{"type":"string"},"typename":{"type":"string","description":"The typename of the schema in the format of \"example.com/type/Type\"."},"jsonSchema":{"$id":"/schemas/any","title":"any"}},"additionalProperties":false}},{"name":"list-schemas","description":"Lists schemas definitions.","inputSchema":{"type":"object","required":[],"properties":{"limit":{"type":"number"}},"additionalProperties":false}},{"name":"add-tag","description":"Adds a tag to an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}},{"name":"remove-tag","description":"Removes a tag from an object.\nTags are objects of type dxos.org/type/Tag.","inputSchema":{"type":"object","required":["tagId","objectId"],"properties":{"tagId":{"type":"string","description":"The ID of the tag.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]},"objectId":{"type":"string","description":"The ID of the object.","examples":["dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","@dxn:echo:@:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","BM3FSHFOMJCHCG5QW7JTVKGYABD2GAA7G:01KG7R1ZXWFMWQ4DA1Q6TN1DG4","01KG7R1ZXWFMWQ4DA1Q6TN1DG4"]}},"additionalProperties":false}}]},"prompt":{"content":[{"role":"system","content":"## Blueprints Definitions\n\n<blueprint>\n  - You are a helpful assistant called Kai. \n  - Your name is Kai and you are powered by different language models.\n  - You were created by DXOS and operate inside of Composer and on the DXOS EDGE network.\n  - In your initial greeting state your name and make some suggestions based on the current context objects.\n  - You are an advanced AI assistant capable of creating and managing artifacts from provided data and tools.\n  - Your task is to process user commands and questions and decide how best to respond.\n  - In general be concise and direct.\n  - Follow all instructions carefully.\n  \n  ## Planning\n  \n  - Analyze the structure and type of the content in the user's message.\n  - Determine if you complete the task using the available blueprint definitions?\n  - If you can't complete the task using the available blueprint definitions, query the list of available blueprint definitions using the appropriate tool.\n  - Identify which blueprint definitions are relevant to the user's request.\n  - Evaluate the potential benefits of creating an artifact vs. normal processing for each identified element.\n  - Make a final decision on whether to create an artifact and explain your reasoning.\n  - Are the required blueprint definitions already available?\n  - If not, select which blueprint definition(s) will be the most relevant and require them using the require_artifact_definitions tool.\n  - The require'd artifact tools will be available for use after require.\n  - If creating an artifact, outline how you will structure it within the response.\n  - Decide if the artifact needs to be shown to the user.\n  - Call the show tool to show the artifact to the user.\n  - Your reasoning must include: whether to use artifacts or not, to create one or query, whether to show the artifact to the user, and how to structure the response.\n  \n  ## Blueprints and Artifacts\n  \n  - Determine if the interaction involves an artifact. Prefer artifacts for tables, lists, spreadsheets, kanbans, games, images, and other structured data.\n  - Determine if the user is explicitly talking about creating a new artifact, or wants to use an existing artifact.\n  - If it is ambiguous, query for existing artifacts first and then decide.\n  - If you decide to create an artifact, call the associated tool to create the artifact.\n  - Artifacts are stored in the database. Tools are used to create and query artifacts.\n  - If you are unsure about creating an artifact ask the user for clarification.\n  - Artifacts are mutable objects that can change over the course of the conversation.\n  - Always re-query the artifact using the tool (like query or inspect) to get the latest state of the artifact before answering the user.\n  - You must never generate the id of the artifact; only recall the ids that are already in the history.\n  - Artifacts are created by requiring the specific artifact using the require_artifact tool and creating it by calling the associated tool.\n  - You can add suggested actions at the end of your response.\n  - Suggested actions should be very concise and start with a verb and be phrased as a command to an agent -- not a question to the user.\n  - Suggested actions must be in the form of a user instruction that you can follow.\n  - Suggested actions could include actions that create artifacts.\n  - After creating an artifact use a tool to add it to the chat context.\n  \n  ## Context\n  \n  Today is .\n</blueprint>","options":{}},{"role":"user","content":"Add tag \"important\" to the organization \"Tagged Corp\".","options":{}},{"role":"assistant","content":[{"type":"reasoning","text":"The user wants to add a tag \"important\" to an organization called \"Tagged Corp\". \n\nTo do this, I need to:\n1. First find the organization \"Tagged Corp\"\n2. Find or create a tag with label \"important\"\n3. Use the add-tag function to add the tag to the organization\n\nLet me start by searching for the organization and tag.","options":{}},{"type":"text","text":"I'll help you add the \"important\" tag to \"Tagged Corp\". Let me first find both the organization and the tag.","options":{}},{"type":"tool-call","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","params":{"text":"Tagged Corp","includeContent":true,"limit":5},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_011LrX9FrbvuQSeSS8fwJyf3","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ERZSDJNNB926NF3FYW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ERZSDJNNB926NF3FYW","name":"Tagged Corp"},{"id":"01KHVH09FKW7XFHACAGDSJ7FFK","@type":"dxn:type:dxos.org/type/Message:0.2.0","@meta":{"keys":[]},"@dxn":"dxn:queue:data:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09EERCGBW0JAAHB6S0N7:01KHVH09FKW7XFHACAGDSJ7FFK","created":"2026-02-19T18:01:12.947Z","sender":{"role":"user"},"blocks":[{"_tag":"text","text":"Add tag \"important\" to the organization \"Tagged Corp\"."}]}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Now let me search for the \"important\" tag:","options":{}},{"type":"tool-call","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","params":{"typename":"dxos.org/type/Tag","text":"important","includeContent":true,"limit":10},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01Px8H1Tbnt5isMafCouRJWj","name":"list-objects","isFailure":false,"result":[{"id":"01KHVH09ETZ6J2RZ774WQC7Y14","@type":"dxn:type:dxos.org/type/Tag:0.1.0","@meta":{"keys":[]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ETZ6J2RZ774WQC7Y14","label":"important"}],"providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Perfect! I found both the organization \"Tagged Corp\" and the \"important\" tag. Now I'll add the tag to the organization:","options":{}},{"type":"tool-call","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","name":"add-tag","params":{"objectId":"01KHVH09ERZSDJNNB926NF3FYW","tagId":"01KHVH09ETZ6J2RZ774WQC7Y14"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_0165yVZtsYvVQ24TWuj7KoMF","name":"add-tag","isFailure":false,"result":"FunctionError: Function invocation error\ncaused by:\nError: Invalid DXN: 01KHVH09ERZSDJNNB926NF3FYW","providerExecuted":false,"options":{}}],"options":{}},{"role":"assistant","content":[{"type":"text","text":"Let me try with the full DXN format:","options":{}},{"type":"tool-call","id":"toolu_01MC986K8doDqTy7M8jjCmqt","name":"add-tag","params":{"objectId":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ERZSDJNNB926NF3FYW","tagId":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ETZ6J2RZ774WQC7Y14"},"providerExecuted":false,"options":{}}],"options":{}},{"role":"tool","content":[{"type":"tool-result","id":"toolu_01MC986K8doDqTy7M8jjCmqt","name":"add-tag","isFailure":false,"result":{"id":"01KHVH09ERZSDJNNB926NF3FYW","@type":"dxn:type:dxos.org/type/Organization:0.1.0","@meta":{"keys":[],"tags":["dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ETZ6J2RZ774WQC7Y14"]},"@dxn":"dxn:echo:BDJXMULPW5FB55UZ7KP5HLDHVTXUTHE2U:01KHVH09ERZSDJNNB926NF3FYW","name":"Tagged Corp"},"providerExecuted":false,"options":{}}],"options":{"anthropic":{"cacheControl":{"ttl":"5m","type":"ephemeral"}}}}]},"response":[{"type":"response-metadata","id":"msg_01GsgbgocKcY8qaxpjqDGHrK","modelId":"claude-opus-4-20250514","timestamp":"1970-01-01T00:00:00.000Z","metadata":{}},{"type":"text-start","id":"0","metadata":{}},{"type":"text-delta","id":"0","delta":"Great! I","metadata":{}},{"type":"text-delta","id":"0","delta":"'ve","metadata":{}},{"type":"text-delta","id":"0","delta":" successfully added the \"important\" tag to","metadata":{}},{"type":"text-delta","id":"0","delta":" the organization \"Tagged Corp\". You","metadata":{}},{"type":"text-delta","id":"0","delta":" can see","metadata":{}},{"type":"text-delta","id":"0","delta":" in the response that the organization","metadata":{}},{"type":"text-delta","id":"0","delta":" now has the tag in","metadata":{}},{"type":"text-delta","id":"0","delta":" its metadata (`","metadata":{}},{"type":"text-delta","id":"0","delta":"@meta.tags`).","metadata":{}},{"type":"text-end","id":"0","metadata":{}},{"type":"finish","reason":"stop","usage":{"inputTokens":6,"outputTokens":44,"totalTokens":50},"metadata":{"anthropic":{"usage":{"cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":381},"cache_creation_input_tokens":381,"cache_read_input_tokens":5662,"input_tokens":6,"output_tokens":3,"server_tool_use":null,"service_tier":"standard"}}}}]}]}