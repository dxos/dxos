type: library
language: typescript
tags:
  - ts-build
  - ts-test
  - pack
  - storybook
tasks:
  compile:
    args:
      - '--entryPoint=src/index.ts'
      - '--entryPoint=src/types/index.ts'
      - '--entryPoint=src/templates/index.ts'
      - '--preactSignalTracking'
  test:
    inputs:
      - .storybook/*

  e2e-node:
    env:
      DX_TEST_TAGS: functions-e2e
    command: vitest run -c vitest.config.ts --reporter=verbose src/e2e/*.test.ts
    deps:
      - ^:build
      - ^:compile
    inputs:
      - src/e2e/**
      - vitest.config.ts
