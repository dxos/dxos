type: library
language: typescript
workspace:
  inheritedTasks:
    exclude:
      - compile
      - test
tasks:
  build:
    deps:
      - prebuild
      - ^:build
    inputs:
      - bin/main.js
    options:
      mergeOutputs: replace
    outputs:
      - dist/
  prebuild:
    command: pnpm run prebuild
    deps:
      - ^:compile
    inputs:
      - test/proto/example/
    outputs:
      - test/proto/gen/
  test:
    command: pnpm run test
    deps:
      - prebuild
