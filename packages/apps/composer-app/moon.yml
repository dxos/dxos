layer: application
language: typescript
tags:
  - e2e
  - tauri
  - typecheck
  - vite
  - ts-test
  - storybook
tasks:
  bundle:
    deps:
      - prebuild
  compile:
    deps:
      - prebuild
  prebuild:
    script: pnpm run --silent copy:assets && pnpm run --silent build:functions
    deps:
      - ^:prebuild
    inputs:
      - package.json
      - moon.yml
      - src/functions/_worker.ts
    outputs:
      - public/assets/plugin-sketch
      - out/composer/_worker.js
  serve:
    deps:
      - prebuild
  test:
    inputs:
      - .storybook/*
      - /tools/storybook-react/.storybook/main.ts
      - vite.config.ts
