{"resolvedId":"/home/jdw/Code/dxos/dxos/node_modules/.pnpm/@headlessui+react@1.7.4_biqbaboplfbrettd7655fr4n2y/node_modules/@headlessui/react/dist/components/popover/popover.js","transforms":[{"name":"vite:load-fallback","result":"import F,{createContext as $,createRef as pe,useContext as Y,useEffect as U,useMemo as h,useReducer as Pe,useRef as q,useState as de}from\"react\";import{match as G}from'../../utils/match.js';import{forwardRefWithAs as W,render as j,Features as z}from'../../utils/render.js';import{optionalRef as ve,useSyncRefs as k}from'../../hooks/use-sync-refs.js';import{useId as _}from'../../hooks/use-id.js';import{Keys as x}from'../keyboard.js';import{isDisabledReactIssue7711 as se}from'../../utils/bugs.js';import{getFocusableElements as ie,Focus as w,focusIn as N,isFocusableElement as Te,FocusableMode as me}from'../../utils/focus-management.js';import{OpenClosedProvider as ye,State as J,useOpenClosed as ue}from'../../internal/open-closed.js';import{useResolveButtonType as Ee}from'../../hooks/use-resolve-button-type.js';import{useOutsideClick as Se}from'../../hooks/use-outside-click.js';import{getOwnerDocument as be}from'../../utils/owner.js';import{useOwnerDocument as X}from'../../hooks/use-owner.js';import{useEventListener as ge}from'../../hooks/use-event-listener.js';import{Hidden as Z,Features as ee}from'../../internal/hidden.js';import{useEvent as b}from'../../hooks/use-event.js';import{useTabDirection as fe,Direction as K}from'../../hooks/use-tab-direction.js';import'../../utils/micro-task.js';var Ae=(f=>(f[f.Open=0]=\"Open\",f[f.Closed=1]=\"Closed\",f))(Ae||{}),Ce=(n=>(n[n.TogglePopover=0]=\"TogglePopover\",n[n.ClosePopover=1]=\"ClosePopover\",n[n.SetButton=2]=\"SetButton\",n[n.SetButtonId=3]=\"SetButtonId\",n[n.SetPanel=4]=\"SetPanel\",n[n.SetPanelId=5]=\"SetPanelId\",n))(Ce||{});let Re={[0]:r=>({...r,popoverState:G(r.popoverState,{[0]:1,[1]:0})}),[1](r){return r.popoverState===1?r:{...r,popoverState:1}},[2](r,t){return r.button===t.button?r:{...r,button:t.button}},[3](r,t){return r.buttonId===t.buttonId?r:{...r,buttonId:t.buttonId}},[4](r,t){return r.panel===t.panel?r:{...r,panel:t.panel}},[5](r,t){return r.panelId===t.panelId?r:{...r,panelId:t.panelId}}},te=$(null);te.displayName=\"PopoverContext\";function Q(r){let t=Y(te);if(t===null){let f=new Error(`<${r} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,Q),f}return t}let oe=$(null);oe.displayName=\"PopoverAPIContext\";function re(r){let t=Y(oe);if(t===null){let f=new Error(`<${r} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(f,re),f}return t}let ne=$(null);ne.displayName=\"PopoverGroupContext\";function ce(){return Y(ne)}let le=$(null);le.displayName=\"PopoverPanelContext\";function Oe(){return Y(le)}function Me(r,t){return G(t.type,Re,r,t)}let Le=\"div\",Ie=W(function(t,f){var O;let o=`headlessui-popover-button-${_()}`,v=`headlessui-popover-panel-${_()}`,a=q(null),n=k(f,ve(e=>{a.current=e})),g=Pe(Me,{popoverState:1,button:null,buttonId:o,panel:null,panelId:v,beforePanelSentinel:pe(),afterPanelSentinel:pe()}),[{popoverState:y,button:l,panel:P,beforePanelSentinel:s,afterPanelSentinel:B},i]=g,T=X((O=a.current)!=null?O:l);U(()=>i({type:3,buttonId:o}),[o,i]),U(()=>i({type:5,panelId:v}),[v,i]);let c=h(()=>{if(!l||!P)return!1;for(let M of document.querySelectorAll(\"body > *\"))if(Number(M==null?void 0:M.contains(l))^Number(M==null?void 0:M.contains(P)))return!0;let e=ie(),p=e.indexOf(l),m=(p+e.length-1)%e.length,C=(p+1)%e.length,D=e[m],V=e[C];return!P.contains(D)&&!P.contains(V)},[l,P]),d=h(()=>({buttonId:o,panelId:v,close:()=>i({type:1})}),[o,v,i]),E=ce(),A=E==null?void 0:E.registerPopover,L=b(()=>{var e;return(e=E==null?void 0:E.isFocusWithinPopoverGroup())!=null?e:(T==null?void 0:T.activeElement)&&((l==null?void 0:l.contains(T.activeElement))||(P==null?void 0:P.contains(T.activeElement)))});U(()=>A==null?void 0:A(d),[A,d]),ge(T==null?void 0:T.defaultView,\"focus\",e=>{var p,m,C,D;y===0&&(L()||!l||!P||(m=(p=s.current)==null?void 0:p.contains)!=null&&m.call(p,e.target)||(D=(C=B.current)==null?void 0:C.contains)!=null&&D.call(C,e.target)||i({type:1}))},!0),Se([l,P],(e,p)=>{i({type:1}),Te(p,me.Loose)||(e.preventDefault(),l==null||l.focus())},y===0);let I=b(e=>{i({type:1});let p=(()=>e?e instanceof HTMLElement?e:\"current\"in e&&e.current instanceof HTMLElement?e.current:l:l)();p==null||p.focus()}),H=h(()=>({close:I,isPortalled:c}),[I,c]),u=h(()=>({open:y===0,close:I}),[y,I]),S=t,R={ref:n};return F.createElement(te.Provider,{value:g},F.createElement(oe.Provider,{value:H},F.createElement(ye,{value:G(y,{[0]:J.Open,[1]:J.Closed})},j({ourProps:R,theirProps:S,slot:u,defaultTag:Le,name:\"Popover\"}))))}),Fe=\"button\",he=W(function(t,f){let[o,v]=Q(\"Popover.Button\"),{isPortalled:a}=re(\"Popover.Button\"),n=q(null),g=`headlessui-focus-sentinel-${_()}`,y=ce(),l=y==null?void 0:y.closeOthers,P=Oe(),s=P===null?!1:P===o.panelId,B=k(n,f,s?null:e=>e&&v({type:2,button:e})),i=k(n,f),T=X(n),c=b(e=>{var p,m,C;if(s){if(o.popoverState===1)return;switch(e.key){case x.Space:case x.Enter:e.preventDefault(),(m=(p=e.target).click)==null||m.call(p),v({type:1}),(C=o.button)==null||C.focus();break}}else switch(e.key){case x.Space:case x.Enter:e.preventDefault(),e.stopPropagation(),o.popoverState===1&&(l==null||l(o.buttonId)),v({type:0});break;case x.Escape:if(o.popoverState!==0)return l==null?void 0:l(o.buttonId);if(!n.current||(T==null?void 0:T.activeElement)&&!n.current.contains(T.activeElement))return;e.preventDefault(),e.stopPropagation(),v({type:1});break}}),d=b(e=>{s||e.key===x.Space&&e.preventDefault()}),E=b(e=>{var p,m;se(e.currentTarget)||t.disabled||(s?(v({type:1}),(p=o.button)==null||p.focus()):(e.preventDefault(),e.stopPropagation(),o.popoverState===1&&(l==null||l(o.buttonId)),v({type:0}),(m=o.button)==null||m.focus()))}),A=b(e=>{e.preventDefault(),e.stopPropagation()}),L=o.popoverState===0,I=h(()=>({open:L}),[L]),H=Ee(t,n),u=t,S=s?{ref:i,type:H,onKeyDown:c,onClick:E}:{ref:B,id:o.buttonId,type:H,\"aria-expanded\":t.disabled?void 0:o.popoverState===0,\"aria-controls\":o.panel?o.panelId:void 0,onKeyDown:c,onKeyUp:d,onClick:E,onMouseDown:A},R=fe(),O=b(()=>{let e=o.panel;if(!e)return;function p(){G(R.current,{[K.Forwards]:()=>N(e,w.First),[K.Backwards]:()=>N(e,w.Last)})}p()});return F.createElement(F.Fragment,null,j({ourProps:S,theirProps:u,slot:I,defaultTag:Fe,name:\"Popover.Button\"}),L&&!s&&a&&F.createElement(Z,{id:g,features:ee.Focusable,as:\"button\",type:\"button\",onFocus:O}))}),Be=\"div\",De=z.RenderStrategy|z.Static,xe=W(function(t,f){let[{popoverState:o},v]=Q(\"Popover.Overlay\"),a=k(f),n=`headlessui-popover-overlay-${_()}`,g=ue(),y=(()=>g!==null?g===J.Open:o===0)(),l=b(i=>{if(se(i.currentTarget))return i.preventDefault();v({type:1})}),P=h(()=>({open:o===0}),[o]);return j({ourProps:{ref:a,id:n,\"aria-hidden\":!0,onClick:l},theirProps:t,slot:P,defaultTag:Be,features:De,visible:y,name:\"Popover.Overlay\"})}),He=\"div\",Ge=z.RenderStrategy|z.Static,ke=W(function(t,f){let{focus:o=!1,...v}=t,[a,n]=Q(\"Popover.Panel\"),{close:g,isPortalled:y}=re(\"Popover.Panel\"),l=`headlessui-focus-sentinel-before-${_()}`,P=`headlessui-focus-sentinel-after-${_()}`,s=q(null),B=k(s,f,u=>{n({type:4,panel:u})}),i=X(s),T=ue(),c=(()=>T!==null?T===J.Open:a.popoverState===0)(),d=b(u=>{var S;switch(u.key){case x.Escape:if(a.popoverState!==0||!s.current||(i==null?void 0:i.activeElement)&&!s.current.contains(i.activeElement))return;u.preventDefault(),u.stopPropagation(),n({type:1}),(S=a.button)==null||S.focus();break}});U(()=>{var u;t.static||a.popoverState===1&&((u=t.unmount)!=null?u:!0)&&n({type:4,panel:null})},[a.popoverState,t.unmount,t.static,n]),U(()=>{if(!o||a.popoverState!==0||!s.current)return;let u=i==null?void 0:i.activeElement;s.current.contains(u)||N(s.current,w.First)},[o,s,a.popoverState]);let E=h(()=>({open:a.popoverState===0,close:g}),[a,g]),A={ref:B,id:a.panelId,onKeyDown:d,onBlur:o&&a.popoverState===0?u=>{var R,O,e,p,m;let S=u.relatedTarget;!S||!s.current||(R=s.current)!=null&&R.contains(S)||(n({type:1}),(((e=(O=a.beforePanelSentinel.current)==null?void 0:O.contains)==null?void 0:e.call(O,S))||((m=(p=a.afterPanelSentinel.current)==null?void 0:p.contains)==null?void 0:m.call(p,S)))&&S.focus({preventScroll:!0}))}:void 0,tabIndex:-1},L=fe(),I=b(()=>{let u=s.current;if(!u)return;function S(){G(L.current,{[K.Forwards]:()=>{N(u,w.First)},[K.Backwards]:()=>{var R;(R=a.button)==null||R.focus({preventScroll:!0})}})}S()}),H=b(()=>{let u=s.current;if(!u)return;function S(){G(L.current,{[K.Forwards]:()=>{var C,D,V;if(!a.button)return;let R=ie(),O=R.indexOf(a.button),e=R.slice(0,O+1),m=[...R.slice(O+1),...e];for(let M of m.slice())if(((D=(C=M==null?void 0:M.id)==null?void 0:C.startsWith)==null?void 0:D.call(C,\"headlessui-focus-sentinel-\"))||((V=a.panel)==null?void 0:V.contains(M))){let ae=m.indexOf(M);ae!==-1&&m.splice(ae,1)}N(m,w.First,!1)},[K.Backwards]:()=>N(u,w.Last)})}S()});return F.createElement(le.Provider,{value:a.panelId},c&&y&&F.createElement(Z,{id:l,ref:a.beforePanelSentinel,features:ee.Focusable,as:\"button\",type:\"button\",onFocus:I}),j({ourProps:A,theirProps:v,slot:E,defaultTag:He,features:Ge,visible:c,name:\"Popover.Panel\"}),c&&y&&F.createElement(Z,{id:P,ref:a.afterPanelSentinel,features:ee.Focusable,as:\"button\",type:\"button\",onFocus:H}))}),_e=\"div\",we=W(function(t,f){let o=q(null),v=k(o,f),[a,n]=de([]),g=b(c=>{n(d=>{let E=d.indexOf(c);if(E!==-1){let A=d.slice();return A.splice(E,1),A}return d})}),y=b(c=>(n(d=>[...d,c]),()=>g(c))),l=b(()=>{var E;let c=be(o);if(!c)return!1;let d=c.activeElement;return(E=o.current)!=null&&E.contains(d)?!0:a.some(A=>{var L,I;return((L=c.getElementById(A.buttonId))==null?void 0:L.contains(d))||((I=c.getElementById(A.panelId))==null?void 0:I.contains(d))})}),P=b(c=>{for(let d of a)d.buttonId!==c&&d.close()}),s=h(()=>({registerPopover:y,unregisterPopover:g,isFocusWithinPopoverGroup:l,closeOthers:P}),[y,g,l,P]),B=h(()=>({}),[]),i=t,T={ref:v};return F.createElement(ne.Provider,{value:s},j({ourProps:T,theirProps:i,slot:B,defaultTag:_e,name:\"Popover.Group\"}))}),mt=Object.assign(Ie,{Button:he,Overlay:xe,Panel:ke,Group:we});export{mt as Popover};\n","start":1670465467593,"end":1670465467892},{"name":"vite:react-babel","result":"import F, { createContext as $, createRef as pe, useContext as Y, useEffect as U, useMemo as h, useReducer as Pe, useRef as q, useState as de } from \"react\";\nimport { match as G } from '../../utils/match.js';\nimport { forwardRefWithAs as W, render as j, Features as z } from '../../utils/render.js';\nimport { optionalRef as ve, useSyncRefs as k } from '../../hooks/use-sync-refs.js';\nimport { useId as _ } from '../../hooks/use-id.js';\nimport { Keys as x } from '../keyboard.js';\nimport { isDisabledReactIssue7711 as se } from '../../utils/bugs.js';\nimport { getFocusableElements as ie, Focus as w, focusIn as N, isFocusableElement as Te, FocusableMode as me } from '../../utils/focus-management.js';\nimport { OpenClosedProvider as ye, State as J, useOpenClosed as ue } from '../../internal/open-closed.js';\nimport { useResolveButtonType as Ee } from '../../hooks/use-resolve-button-type.js';\nimport { useOutsideClick as Se } from '../../hooks/use-outside-click.js';\nimport { getOwnerDocument as be } from '../../utils/owner.js';\nimport { useOwnerDocument as X } from '../../hooks/use-owner.js';\nimport { useEventListener as ge } from '../../hooks/use-event-listener.js';\nimport { Hidden as Z, Features as ee } from '../../internal/hidden.js';\nimport { useEvent as b } from '../../hooks/use-event.js';\nimport { useTabDirection as fe, Direction as K } from '../../hooks/use-tab-direction.js';\nimport '../../utils/micro-task.js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Ae = (f => (f[f.Open = 0] = \"Open\", f[f.Closed = 1] = \"Closed\", f))(Ae || {}),\n  Ce = (n => (n[n.TogglePopover = 0] = \"TogglePopover\", n[n.ClosePopover = 1] = \"ClosePopover\", n[n.SetButton = 2] = \"SetButton\", n[n.SetButtonId = 3] = \"SetButtonId\", n[n.SetPanel = 4] = \"SetPanel\", n[n.SetPanelId = 5] = \"SetPanelId\", n))(Ce || {});\nlet Re = {\n    [0]: r => ({\n      ...r,\n      popoverState: G(r.popoverState, {\n        [0]: 1,\n        [1]: 0\n      })\n    }),\n    [1](r) {\n      return r.popoverState === 1 ? r : {\n        ...r,\n        popoverState: 1\n      };\n    },\n    [2](r, t) {\n      return r.button === t.button ? r : {\n        ...r,\n        button: t.button\n      };\n    },\n    [3](r, t) {\n      return r.buttonId === t.buttonId ? r : {\n        ...r,\n        buttonId: t.buttonId\n      };\n    },\n    [4](r, t) {\n      return r.panel === t.panel ? r : {\n        ...r,\n        panel: t.panel\n      };\n    },\n    [5](r, t) {\n      return r.panelId === t.panelId ? r : {\n        ...r,\n        panelId: t.panelId\n      };\n    }\n  },\n  te = $(null);\nte.displayName = \"PopoverContext\";\nfunction Q(r) {\n  let t = Y(te);\n  if (t === null) {\n    let f = new Error(`<${r} /> is missing a parent <Popover /> component.`);\n    throw Error.captureStackTrace && Error.captureStackTrace(f, Q), f;\n  }\n  return t;\n}\nlet oe = $(null);\noe.displayName = \"PopoverAPIContext\";\nfunction re(r) {\n  let t = Y(oe);\n  if (t === null) {\n    let f = new Error(`<${r} /> is missing a parent <Popover /> component.`);\n    throw Error.captureStackTrace && Error.captureStackTrace(f, re), f;\n  }\n  return t;\n}\nlet ne = $(null);\nne.displayName = \"PopoverGroupContext\";\nfunction ce() {\n  return Y(ne);\n}\nlet le = $(null);\nle.displayName = \"PopoverPanelContext\";\nfunction Oe() {\n  return Y(le);\n}\nfunction Me(r, t) {\n  return G(t.type, Re, r, t);\n}\nlet Le = \"div\",\n  Ie = W(function (t, f) {\n    var O;\n    let o = `headlessui-popover-button-${_()}`,\n      v = `headlessui-popover-panel-${_()}`,\n      a = q(null),\n      n = k(f, ve(e => {\n        a.current = e;\n      })),\n      g = Pe(Me, {\n        popoverState: 1,\n        button: null,\n        buttonId: o,\n        panel: null,\n        panelId: v,\n        beforePanelSentinel: pe(),\n        afterPanelSentinel: pe()\n      }),\n      [{\n        popoverState: y,\n        button: l,\n        panel: P,\n        beforePanelSentinel: s,\n        afterPanelSentinel: B\n      }, i] = g,\n      T = X((O = a.current) != null ? O : l);\n    U(() => i({\n      type: 3,\n      buttonId: o\n    }), [o, i]), U(() => i({\n      type: 5,\n      panelId: v\n    }), [v, i]);\n    let c = h(() => {\n        if (!l || !P) return !1;\n        for (let M of document.querySelectorAll(\"body > *\")) if (Number(M == null ? void 0 : M.contains(l)) ^ Number(M == null ? void 0 : M.contains(P))) return !0;\n        let e = ie(),\n          p = e.indexOf(l),\n          m = (p + e.length - 1) % e.length,\n          C = (p + 1) % e.length,\n          D = e[m],\n          V = e[C];\n        return !P.contains(D) && !P.contains(V);\n      }, [l, P]),\n      d = h(() => ({\n        buttonId: o,\n        panelId: v,\n        close: () => i({\n          type: 1\n        })\n      }), [o, v, i]),\n      E = ce(),\n      A = E == null ? void 0 : E.registerPopover,\n      L = b(() => {\n        var e;\n        return (e = E == null ? void 0 : E.isFocusWithinPopoverGroup()) != null ? e : (T == null ? void 0 : T.activeElement) && ((l == null ? void 0 : l.contains(T.activeElement)) || (P == null ? void 0 : P.contains(T.activeElement)));\n      });\n    U(() => A == null ? void 0 : A(d), [A, d]), ge(T == null ? void 0 : T.defaultView, \"focus\", e => {\n      var p, m, C, D;\n      y === 0 && (L() || !l || !P || (m = (p = s.current) == null ? void 0 : p.contains) != null && m.call(p, e.target) || (D = (C = B.current) == null ? void 0 : C.contains) != null && D.call(C, e.target) || i({\n        type: 1\n      }));\n    }, !0), Se([l, P], (e, p) => {\n      i({\n        type: 1\n      }), Te(p, me.Loose) || (e.preventDefault(), l == null || l.focus());\n    }, y === 0);\n    let I = b(e => {\n        i({\n          type: 1\n        });\n        let p = (() => e ? e instanceof HTMLElement ? e : \"current\" in e && e.current instanceof HTMLElement ? e.current : l : l)();\n        p == null || p.focus();\n      }),\n      H = h(() => ({\n        close: I,\n        isPortalled: c\n      }), [I, c]),\n      u = h(() => ({\n        open: y === 0,\n        close: I\n      }), [y, I]),\n      S = t,\n      R = {\n        ref: n\n      };\n    return F.createElement(te.Provider, {\n      value: g\n    }, F.createElement(oe.Provider, {\n      value: H\n    }, F.createElement(ye, {\n      value: G(y, {\n        [0]: J.Open,\n        [1]: J.Closed\n      })\n    }, j({\n      ourProps: R,\n      theirProps: S,\n      slot: u,\n      defaultTag: Le,\n      name: \"Popover\"\n    }))));\n  }),\n  Fe = \"button\",\n  he = W(function (t, f) {\n    let [o, v] = Q(\"Popover.Button\"),\n      {\n        isPortalled: a\n      } = re(\"Popover.Button\"),\n      n = q(null),\n      g = `headlessui-focus-sentinel-${_()}`,\n      y = ce(),\n      l = y == null ? void 0 : y.closeOthers,\n      P = Oe(),\n      s = P === null ? !1 : P === o.panelId,\n      B = k(n, f, s ? null : e => e && v({\n        type: 2,\n        button: e\n      })),\n      i = k(n, f),\n      T = X(n),\n      c = b(e => {\n        var p, m, C;\n        if (s) {\n          if (o.popoverState === 1) return;\n          switch (e.key) {\n            case x.Space:\n            case x.Enter:\n              e.preventDefault(), (m = (p = e.target).click) == null || m.call(p), v({\n                type: 1\n              }), (C = o.button) == null || C.focus();\n              break;\n          }\n        } else switch (e.key) {\n          case x.Space:\n          case x.Enter:\n            e.preventDefault(), e.stopPropagation(), o.popoverState === 1 && (l == null || l(o.buttonId)), v({\n              type: 0\n            });\n            break;\n          case x.Escape:\n            if (o.popoverState !== 0) return l == null ? void 0 : l(o.buttonId);\n            if (!n.current || (T == null ? void 0 : T.activeElement) && !n.current.contains(T.activeElement)) return;\n            e.preventDefault(), e.stopPropagation(), v({\n              type: 1\n            });\n            break;\n        }\n      }),\n      d = b(e => {\n        s || e.key === x.Space && e.preventDefault();\n      }),\n      E = b(e => {\n        var p, m;\n        se(e.currentTarget) || t.disabled || (s ? (v({\n          type: 1\n        }), (p = o.button) == null || p.focus()) : (e.preventDefault(), e.stopPropagation(), o.popoverState === 1 && (l == null || l(o.buttonId)), v({\n          type: 0\n        }), (m = o.button) == null || m.focus()));\n      }),\n      A = b(e => {\n        e.preventDefault(), e.stopPropagation();\n      }),\n      L = o.popoverState === 0,\n      I = h(() => ({\n        open: L\n      }), [L]),\n      H = Ee(t, n),\n      u = t,\n      S = s ? {\n        ref: i,\n        type: H,\n        onKeyDown: c,\n        onClick: E\n      } : {\n        ref: B,\n        id: o.buttonId,\n        type: H,\n        \"aria-expanded\": t.disabled ? void 0 : o.popoverState === 0,\n        \"aria-controls\": o.panel ? o.panelId : void 0,\n        onKeyDown: c,\n        onKeyUp: d,\n        onClick: E,\n        onMouseDown: A\n      },\n      R = fe(),\n      O = b(() => {\n        let e = o.panel;\n        if (!e) return;\n        function p() {\n          G(R.current, {\n            [K.Forwards]: () => N(e, w.First),\n            [K.Backwards]: () => N(e, w.Last)\n          });\n        }\n        p();\n      });\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [j({\n        ourProps: S,\n        theirProps: u,\n        slot: I,\n        defaultTag: Fe,\n        name: \"Popover.Button\"\n      }), L && !s && a && /*#__PURE__*/_jsx(Z, {\n        id: g,\n        features: ee.Focusable,\n        as: \"button\",\n        type: \"button\",\n        onFocus: O\n      })]\n    });\n  }),\n  Be = \"div\",\n  De = z.RenderStrategy | z.Static,\n  xe = W(function (t, f) {\n    let [{\n        popoverState: o\n      }, v] = Q(\"Popover.Overlay\"),\n      a = k(f),\n      n = `headlessui-popover-overlay-${_()}`,\n      g = ue(),\n      y = (() => g !== null ? g === J.Open : o === 0)(),\n      l = b(i => {\n        if (se(i.currentTarget)) return i.preventDefault();\n        v({\n          type: 1\n        });\n      }),\n      P = h(() => ({\n        open: o === 0\n      }), [o]);\n    return j({\n      ourProps: {\n        ref: a,\n        id: n,\n        \"aria-hidden\": !0,\n        onClick: l\n      },\n      theirProps: t,\n      slot: P,\n      defaultTag: Be,\n      features: De,\n      visible: y,\n      name: \"Popover.Overlay\"\n    });\n  }),\n  He = \"div\",\n  Ge = z.RenderStrategy | z.Static,\n  ke = W(function (t, f) {\n    let {\n        focus: o = !1,\n        ...v\n      } = t,\n      [a, n] = Q(\"Popover.Panel\"),\n      {\n        close: g,\n        isPortalled: y\n      } = re(\"Popover.Panel\"),\n      l = `headlessui-focus-sentinel-before-${_()}`,\n      P = `headlessui-focus-sentinel-after-${_()}`,\n      s = q(null),\n      B = k(s, f, u => {\n        n({\n          type: 4,\n          panel: u\n        });\n      }),\n      i = X(s),\n      T = ue(),\n      c = (() => T !== null ? T === J.Open : a.popoverState === 0)(),\n      d = b(u => {\n        var S;\n        switch (u.key) {\n          case x.Escape:\n            if (a.popoverState !== 0 || !s.current || (i == null ? void 0 : i.activeElement) && !s.current.contains(i.activeElement)) return;\n            u.preventDefault(), u.stopPropagation(), n({\n              type: 1\n            }), (S = a.button) == null || S.focus();\n            break;\n        }\n      });\n    U(() => {\n      var u;\n      t.static || a.popoverState === 1 && ((u = t.unmount) != null ? u : !0) && n({\n        type: 4,\n        panel: null\n      });\n    }, [a.popoverState, t.unmount, t.static, n]), U(() => {\n      if (!o || a.popoverState !== 0 || !s.current) return;\n      let u = i == null ? void 0 : i.activeElement;\n      s.current.contains(u) || N(s.current, w.First);\n    }, [o, s, a.popoverState]);\n    let E = h(() => ({\n        open: a.popoverState === 0,\n        close: g\n      }), [a, g]),\n      A = {\n        ref: B,\n        id: a.panelId,\n        onKeyDown: d,\n        onBlur: o && a.popoverState === 0 ? u => {\n          var R, O, e, p, m;\n          let S = u.relatedTarget;\n          !S || !s.current || (R = s.current) != null && R.contains(S) || (n({\n            type: 1\n          }), (((e = (O = a.beforePanelSentinel.current) == null ? void 0 : O.contains) == null ? void 0 : e.call(O, S)) || ((m = (p = a.afterPanelSentinel.current) == null ? void 0 : p.contains) == null ? void 0 : m.call(p, S))) && S.focus({\n            preventScroll: !0\n          }));\n        } : void 0,\n        tabIndex: -1\n      },\n      L = fe(),\n      I = b(() => {\n        let u = s.current;\n        if (!u) return;\n        function S() {\n          G(L.current, {\n            [K.Forwards]: () => {\n              N(u, w.First);\n            },\n            [K.Backwards]: () => {\n              var R;\n              (R = a.button) == null || R.focus({\n                preventScroll: !0\n              });\n            }\n          });\n        }\n        S();\n      }),\n      H = b(() => {\n        let u = s.current;\n        if (!u) return;\n        function S() {\n          G(L.current, {\n            [K.Forwards]: () => {\n              var C, D, V;\n              if (!a.button) return;\n              let R = ie(),\n                O = R.indexOf(a.button),\n                e = R.slice(0, O + 1),\n                m = [...R.slice(O + 1), ...e];\n              for (let M of m.slice()) if (((D = (C = M == null ? void 0 : M.id) == null ? void 0 : C.startsWith) == null ? void 0 : D.call(C, \"headlessui-focus-sentinel-\")) || ((V = a.panel) == null ? void 0 : V.contains(M))) {\n                let ae = m.indexOf(M);\n                ae !== -1 && m.splice(ae, 1);\n              }\n              N(m, w.First, !1);\n            },\n            [K.Backwards]: () => N(u, w.Last)\n          });\n        }\n        S();\n      });\n    return F.createElement(le.Provider, {\n      value: a.panelId\n    }, c && y && /*#__PURE__*/_jsx(Z, {\n      id: l,\n      ref: a.beforePanelSentinel,\n      features: ee.Focusable,\n      as: \"button\",\n      type: \"button\",\n      onFocus: I\n    }), j({\n      ourProps: A,\n      theirProps: v,\n      slot: E,\n      defaultTag: He,\n      features: Ge,\n      visible: c,\n      name: \"Popover.Panel\"\n    }), c && y && /*#__PURE__*/_jsx(Z, {\n      id: P,\n      ref: a.afterPanelSentinel,\n      features: ee.Focusable,\n      as: \"button\",\n      type: \"button\",\n      onFocus: H\n    }));\n  }),\n  _e = \"div\",\n  we = W(function (t, f) {\n    let o = q(null),\n      v = k(o, f),\n      [a, n] = de([]),\n      g = b(c => {\n        n(d => {\n          let E = d.indexOf(c);\n          if (E !== -1) {\n            let A = d.slice();\n            return A.splice(E, 1), A;\n          }\n          return d;\n        });\n      }),\n      y = b(c => (n(d => [...d, c]), () => g(c))),\n      l = b(() => {\n        var E;\n        let c = be(o);\n        if (!c) return !1;\n        let d = c.activeElement;\n        return (E = o.current) != null && E.contains(d) ? !0 : a.some(A => {\n          var L, I;\n          return ((L = c.getElementById(A.buttonId)) == null ? void 0 : L.contains(d)) || ((I = c.getElementById(A.panelId)) == null ? void 0 : I.contains(d));\n        });\n      }),\n      P = b(c => {\n        for (let d of a) d.buttonId !== c && d.close();\n      }),\n      s = h(() => ({\n        registerPopover: y,\n        unregisterPopover: g,\n        isFocusWithinPopoverGroup: l,\n        closeOthers: P\n      }), [y, g, l, P]),\n      B = h(() => ({}), []),\n      i = t,\n      T = {\n        ref: v\n      };\n    return F.createElement(ne.Provider, {\n      value: s\n    }, j({\n      ourProps: T,\n      theirProps: i,\n      slot: B,\n      defaultTag: _e,\n      name: \"Popover.Group\"\n    }));\n  }),\n  mt = Object.assign(Ie, {\n    Button: he,\n    Overlay: xe,\n    Panel: ke,\n    Group: we\n  });\nexport { mt as Popover };","start":1670465467892,"end":1670465467929,"order":"pre"}]}
