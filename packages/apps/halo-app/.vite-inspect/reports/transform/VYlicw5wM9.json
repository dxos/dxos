{"resolvedId":"/home/jdw/Code/dxos/dxos/packages/apps/halo-app/src/pages/LockPage.tsx","transforms":[{"name":"vite:load-fallback","result":"//\n// Copyright 2021 DXOS.org\n//\n\nimport React, { useCallback } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\n\nimport { Client, Space } from '@dxos/client';\nimport { useIdentity } from '@dxos/react-client';\nimport {\n  AuthChoices,\n  Avatar,\n  Button,\n  defaultGroup,\n  Heading,\n  useTranslation,\n  Trans,\n  getSize,\n  mx\n} from '@dxos/react-uikit';\nimport { humanize } from '@dxos/util';\n\nimport lightThemeLogo from '../assets/icon-halo-black.png';\nimport darkThemeLogo from '../assets/icon-halo-white.png';\n\nexport interface RegistrationPageProps {\n  onRegister?: (client: Client) => Promise<Space>;\n}\n\n/**\n * Allows user to create an identity, join an existing identity or unlock their current identity.\n */\nconst LockPage = () => {\n  const { t } = useTranslation('halo');\n  const profile = useIdentity();\n\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const redirect = encodeURIComponent(searchParams.get('redirect') ?? '');\n\n  const handleUnlock = useCallback(() => {\n    navigate('/devices');\n  }, []);\n\n  return (\n    <main className='max-is-lg mli-auto pli-7 mbs-7 space-b-6'>\n      {profile ? (\n        <div role='none' className='flex flex-col gap-2 items-center'>\n          <Avatar\n            size={32}\n            variant='circle'\n            fallbackValue={profile.identityKey.toHex()}\n            label={profile.displayName ?? humanize(profile.identityKey)}\n            slots={{ root: { className: defaultGroup({ elevation: 3, spacing: 'p-1', rounding: 'rounded-full' }) } }}\n          />\n          <Heading>{t('current app name')}</Heading>\n          <p className='text-center'>\n            <Trans\n              {...{\n                t,\n                i18nKey: 'using halo as message',\n                values: { displayName: profile.displayName ?? humanize(profile.identityKey.toHex()) },\n                components: { nameStyle: <span className='text-success-600 dark:text-success-300'>_</span> }\n              }}\n            />\n          </p>\n        </div>\n      ) : (\n        <div role='none' className='flex flex-col gap-2 items-center'>\n          <img\n            className={mx(getSize(32), 'block dark:hidden mli-auto')}\n            alt={t('halo logo alt')}\n            src={lightThemeLogo}\n          />\n          <img className={mx(getSize(32), 'hidden dark:block mli-auto')} alt={t('halo logo alt')} src={darkThemeLogo} />\n          <Heading className='text-center'>{t('current app name')}</Heading>\n          <p className='text-center'>{t('identities empty message')}</p>\n          <AuthChoices\n            {...{\n              onJoin: () => navigate(`/identity/join?redirect=${redirect}`),\n              onCreate: () => navigate(`/identity/create?redirect=${redirect}`),\n              onRecover: () => navigate(`/identity/recover?redirect=${redirect}`)\n            }}\n          />\n        </div>\n      )}\n\n      <div role='none' className='text-center px-2 space-b-2'>\n        {profile && (\n          <Button className='w-full' variant='primary' onClick={handleUnlock}>\n            {t('unlock label')}\n          </Button>\n        )}\n        <Button\n          variant='outline'\n          className='w-full'\n          onClick={() => window.open('https://github.com/dxos/dxos', '_blank')}\n        >\n          {t('generic help label', { ns: 'uikit' })}\n        </Button>\n      </div>\n    </main>\n  );\n};\n\nexport default LockPage;\n","start":1670465438377,"end":1670465438579},{"name":"vite:react-babel","result":"//\n// Copyright 2021 DXOS.org\n//\n\nimport React, { useCallback } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { Client, Space } from '@dxos/client';\nimport { useIdentity } from '@dxos/react-client';\nimport { AuthChoices, Avatar, Button, defaultGroup, Heading, useTranslation, Trans, getSize, mx } from '@dxos/react-uikit';\nimport { humanize } from '@dxos/util';\nimport lightThemeLogo from '../assets/icon-halo-black.png';\nimport darkThemeLogo from '../assets/icon-halo-white.png';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport interface RegistrationPageProps {\n  onRegister?: (client: Client) => Promise<Space>;\n}\n\n/**\n * Allows user to create an identity, join an existing identity or unlock their current identity.\n */\nconst LockPage = () => {\n  const {\n    t\n  } = useTranslation('halo');\n  const profile = useIdentity();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const redirect = encodeURIComponent(searchParams.get('redirect') ?? '');\n  const handleUnlock = useCallback(() => {\n    navigate('/devices');\n  }, []);\n  return /*#__PURE__*/_jsxs(\"main\", {\n    className: \"max-is-lg mli-auto pli-7 mbs-7 space-b-6\",\n    children: [profile ? /*#__PURE__*/_jsxs(\"div\", {\n      role: \"none\",\n      className: \"flex flex-col gap-2 items-center\",\n      children: [/*#__PURE__*/_jsx(Avatar, {\n        size: 32,\n        variant: \"circle\",\n        fallbackValue: profile.identityKey.toHex(),\n        label: profile.displayName ?? humanize(profile.identityKey),\n        slots: {\n          root: {\n            className: defaultGroup({\n              elevation: 3,\n              spacing: 'p-1',\n              rounding: 'rounded-full'\n            })\n          }\n        }\n      }), /*#__PURE__*/_jsx(Heading, {\n        children: t('current app name')\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsx(Trans, {\n          t,\n          i18nKey: 'using halo as message',\n          values: {\n            displayName: profile.displayName ?? humanize(profile.identityKey.toHex())\n          },\n          components: {\n            nameStyle: /*#__PURE__*/_jsx(\"span\", {\n              className: \"text-success-600 dark:text-success-300\",\n              children: \"_\"\n            })\n          }\n        })\n      })]\n    }) : /*#__PURE__*/_jsxs(\"div\", {\n      role: \"none\",\n      className: \"flex flex-col gap-2 items-center\",\n      children: [/*#__PURE__*/_jsx(\"img\", {\n        className: mx(getSize(32), 'block dark:hidden mli-auto'),\n        alt: t('halo logo alt'),\n        src: lightThemeLogo\n      }), /*#__PURE__*/_jsx(\"img\", {\n        className: mx(getSize(32), 'hidden dark:block mli-auto'),\n        alt: t('halo logo alt'),\n        src: darkThemeLogo\n      }), /*#__PURE__*/_jsx(Heading, {\n        className: \"text-center\",\n        children: t('current app name')\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"text-center\",\n        children: t('identities empty message')\n      }), /*#__PURE__*/_jsx(AuthChoices, {\n        onJoin: () => navigate(`/identity/join?redirect=${redirect}`),\n        onCreate: () => navigate(`/identity/create?redirect=${redirect}`),\n        onRecover: () => navigate(`/identity/recover?redirect=${redirect}`)\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      role: \"none\",\n      className: \"text-center px-2 space-b-2\",\n      children: [profile && /*#__PURE__*/_jsx(Button, {\n        className: \"w-full\",\n        variant: \"primary\",\n        onClick: handleUnlock,\n        children: t('unlock label')\n      }), /*#__PURE__*/_jsx(Button, {\n        variant: \"outline\",\n        className: \"w-full\",\n        onClick: () => window.open('https://github.com/dxos/dxos', '_blank'),\n        children: t('generic help label', {\n          ns: 'uikit'\n        })\n      })]\n    })]\n  });\n};\nexport default LockPage;","start":1670465438579,"end":1670465438605,"order":"pre"},{"name":"vite:esbuild","result":"import { useCallback } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { useIdentity } from \"@dxos/react-client\";\nimport { AuthChoices, Avatar, Button, defaultGroup, Heading, useTranslation, Trans, getSize, mx } from \"@dxos/react-uikit\";\nimport { humanize } from \"@dxos/util\";\nimport lightThemeLogo from \"../assets/icon-halo-black.png\";\nimport darkThemeLogo from \"../assets/icon-halo-white.png\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst LockPage = () => {\n  const {\n    t\n  } = useTranslation(\"halo\");\n  const profile = useIdentity();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const redirect = encodeURIComponent(searchParams.get(\"redirect\") ?? \"\");\n  const handleUnlock = useCallback(() => {\n    navigate(\"/devices\");\n  }, []);\n  return /* @__PURE__ */ _jsxs(\"main\", {\n    className: \"max-is-lg mli-auto pli-7 mbs-7 space-b-6\",\n    children: [profile ? /* @__PURE__ */ _jsxs(\"div\", {\n      role: \"none\",\n      className: \"flex flex-col gap-2 items-center\",\n      children: [/* @__PURE__ */ _jsx(Avatar, {\n        size: 32,\n        variant: \"circle\",\n        fallbackValue: profile.identityKey.toHex(),\n        label: profile.displayName ?? humanize(profile.identityKey),\n        slots: {\n          root: {\n            className: defaultGroup({\n              elevation: 3,\n              spacing: \"p-1\",\n              rounding: \"rounded-full\"\n            })\n          }\n        }\n      }), /* @__PURE__ */ _jsx(Heading, {\n        children: t(\"current app name\")\n      }), /* @__PURE__ */ _jsx(\"p\", {\n        className: \"text-center\",\n        children: /* @__PURE__ */ _jsx(Trans, {\n          t,\n          i18nKey: \"using halo as message\",\n          values: {\n            displayName: profile.displayName ?? humanize(profile.identityKey.toHex())\n          },\n          components: {\n            nameStyle: /* @__PURE__ */ _jsx(\"span\", {\n              className: \"text-success-600 dark:text-success-300\",\n              children: \"_\"\n            })\n          }\n        })\n      })]\n    }) : /* @__PURE__ */ _jsxs(\"div\", {\n      role: \"none\",\n      className: \"flex flex-col gap-2 items-center\",\n      children: [/* @__PURE__ */ _jsx(\"img\", {\n        className: mx(getSize(32), \"block dark:hidden mli-auto\"),\n        alt: t(\"halo logo alt\"),\n        src: lightThemeLogo\n      }), /* @__PURE__ */ _jsx(\"img\", {\n        className: mx(getSize(32), \"hidden dark:block mli-auto\"),\n        alt: t(\"halo logo alt\"),\n        src: darkThemeLogo\n      }), /* @__PURE__ */ _jsx(Heading, {\n        className: \"text-center\",\n        children: t(\"current app name\")\n      }), /* @__PURE__ */ _jsx(\"p\", {\n        className: \"text-center\",\n        children: t(\"identities empty message\")\n      }), /* @__PURE__ */ _jsx(AuthChoices, {\n        onJoin: () => navigate(`/identity/join?redirect=${redirect}`),\n        onCreate: () => navigate(`/identity/create?redirect=${redirect}`),\n        onRecover: () => navigate(`/identity/recover?redirect=${redirect}`)\n      })]\n    }), /* @__PURE__ */ _jsxs(\"div\", {\n      role: \"none\",\n      className: \"text-center px-2 space-b-2\",\n      children: [profile && /* @__PURE__ */ _jsx(Button, {\n        className: \"w-full\",\n        variant: \"primary\",\n        onClick: handleUnlock,\n        children: t(\"unlock label\")\n      }), /* @__PURE__ */ _jsx(Button, {\n        variant: \"outline\",\n        className: \"w-full\",\n        onClick: () => window.open(\"https://github.com/dxos/dxos\", \"_blank\"),\n        children: t(\"generic help label\", {\n          ns: \"uikit\"\n        })\n      })]\n    })]\n  });\n};\nexport default LockPage;\n","start":1670465438606,"end":1670465438904,"order":"normal"}]}
