{"resolvedId":"/home/jdw/Code/dxos/dxos/packages/sdk/react-uikit/dist/lib/browser/index.mjs","transforms":[{"name":"vite:load-fallback","result":"var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// packages/sdk/react-uikit/src/index.ts\nimport { useTranslation as useTranslation11, Trans } from \"react-i18next\";\nexport * from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/components/AuthChoices/AuthChoices.tsx\nimport { CaretRight, Plus, QrCode, Textbox } from \"phosphor-react\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CompoundButton } from \"@dxos/react-ui\";\nvar AuthChoices = ({ onCreate, onJoin, onRecover }) => {\n  const { t } = useTranslation();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    role: \"none\",\n    className: \"flex flex-col gap-2 mt-4 px-2\"\n  }, onCreate && /* @__PURE__ */ React.createElement(CompoundButton, {\n    description: t(\"create identity description\"),\n    before: /* @__PURE__ */ React.createElement(Plus, {\n      className: \"w-6 h-6\"\n    }),\n    after: /* @__PURE__ */ React.createElement(CaretRight, {\n      className: \"w-4 h-4\",\n      weight: \"bold\"\n    }),\n    className: \"text-lg w-full\",\n    onClick: onCreate\n  }, t(\"create identity label\")), onJoin && /* @__PURE__ */ React.createElement(CompoundButton, {\n    description: t(\"join identity description\"),\n    before: /* @__PURE__ */ React.createElement(QrCode, {\n      className: \"w-6 h-6\"\n    }),\n    after: /* @__PURE__ */ React.createElement(CaretRight, {\n      className: \"w-4 h-4\",\n      weight: \"bold\"\n    }),\n    className: \"text-lg w-full\",\n    onClick: onJoin\n  }, t(\"join identity label\")), onRecover && /* @__PURE__ */ React.createElement(CompoundButton, {\n    description: t(\"recover identity description\"),\n    before: /* @__PURE__ */ React.createElement(Textbox, {\n      className: \"w-6 h-6\"\n    }),\n    after: /* @__PURE__ */ React.createElement(CaretRight, {\n      className: \"w-4 h-4\",\n      weight: \"bold\"\n    }),\n    className: \"text-lg w-full\",\n    onClick: onRecover\n  }, t(\"recover identity label\")));\n};\n\n// packages/sdk/react-uikit/src/components/InvitationStatus/InvitationStatus.tsx\nimport React2, { useMemo } from \"react\";\nimport { useTranslation as useTranslation2 } from \"react-i18next\";\nimport { Invitation } from \"@dxos/client\";\nimport { strongShimmer, getSize, mx } from \"@dxos/react-ui\";\nfunction _extends() {\n  _extends = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nvar pip = mx(\"rounded-full flex-none\", getSize(2));\nvar stripe = mx(\"rounded-full grow\", getSize(2));\nvar inactiveColor = \"bg-neutral-100 dark:bg-neutral-600\";\nvar activeColor = \"bg-primary-500 dark:bg-primary-400\";\nvar successColor = \"bg-success-500 dark:bg-success-400\";\nvar errorColor = \"bg-error-500 dark:bg-error-400\";\nvar cancelledColor = \"bg-warning-500 dark:bg-warning-400\";\nvar statusValueMap = /* @__PURE__ */ new Map([\n  [\n    Invitation.State.ERROR,\n    -3\n  ],\n  [\n    Invitation.State.TIMEOUT,\n    -2\n  ],\n  [\n    Invitation.State.CANCELLED,\n    -1\n  ],\n  [\n    Invitation.State.INIT,\n    0\n  ],\n  [\n    Invitation.State.CONNECTING,\n    1\n  ],\n  [\n    Invitation.State.CONNECTED,\n    2\n  ],\n  [\n    Invitation.State.AUTHENTICATING,\n    3\n  ],\n  [\n    Invitation.State.SUCCESS,\n    4\n  ]\n]);\nvar InvitationStatus = ({ status, haltedAt, ...rootProps }) => {\n  const { t } = useTranslation2();\n  const statusLabelMap = useMemo(() => /* @__PURE__ */ new Map([\n    [\n      Invitation.State.ERROR,\n      t(\"error status label\")\n    ],\n    [\n      Invitation.State.TIMEOUT,\n      t(\"timeout status label\")\n    ],\n    [\n      Invitation.State.CANCELLED,\n      t(\"cancelled status label\")\n    ],\n    [\n      Invitation.State.INIT,\n      t(\"init status label\")\n    ],\n    [\n      Invitation.State.CONNECTING,\n      t(\"connecting status label\")\n    ],\n    [\n      Invitation.State.CONNECTED,\n      t(\"connected status label\")\n    ],\n    [\n      Invitation.State.AUTHENTICATING,\n      t(\"authenticating status label\")\n    ],\n    [\n      Invitation.State.SUCCESS,\n      t(\"success status label\")\n    ]\n  ]), [\n    t\n  ]);\n  const halted = status === Invitation.State.CANCELLED || status === Invitation.State.TIMEOUT || status === Invitation.State.ERROR;\n  const cursor = statusValueMap.get(halted ? haltedAt : status);\n  const resolvedColor = status === Invitation.State.ERROR ? errorColor : status === Invitation.State.CANCELLED || status === Invitation.State.TIMEOUT ? cancelledColor : successColor;\n  return /* @__PURE__ */ React2.createElement(\"div\", _extends({\n    role: \"status\",\n    \"aria-label\": statusLabelMap.get(status)\n  }, rootProps, {\n    className: mx(\"flex gap-2 items-center\", rootProps.className)\n  }), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\")\n  }, /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"absolute\", !halted && cursor === 0 ? \"animate-ping block\" : \"hidden\", activeColor)\n  }), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\", cursor === 0 ? halted ? resolvedColor : activeColor : cursor > 0 ? resolvedColor : inactiveColor)\n  })), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(stripe, !halted && cursor === 1 && strongShimmer, cursor === 1 ? halted ? resolvedColor : activeColor : cursor > 1 ? resolvedColor : inactiveColor)\n  }), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\")\n  }, /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"absolute\", !halted && cursor === 2 ? \"animate-ping block\" : \"hidden\", activeColor)\n  }), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\", cursor === 2 ? halted ? resolvedColor : activeColor : cursor > 2 ? resolvedColor : inactiveColor)\n  })), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(stripe, !halted && cursor === 3 && strongShimmer, cursor === 3 ? activeColor : cursor > 3 ? halted ? resolvedColor : resolvedColor : inactiveColor)\n  }), /* @__PURE__ */ React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, cursor >= 4 ? resolvedColor : inactiveColor)\n  }));\n};\n\n// packages/sdk/react-uikit/src/components/Join/JoinDialog.tsx\nimport React5 from \"react\";\nimport { useTranslation as useTranslation5 } from \"react-i18next\";\nimport { Dialog } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/components/Join/JoinPanel.tsx\nimport React4, { useCallback as useCallback2, useEffect, useState } from \"react\";\nimport { useTranslation as useTranslation4 } from \"react-i18next\";\nimport { Invitation as Invitation2, InvitationEncoder } from \"@dxos/client\";\nimport { useInvitationStatus } from \"@dxos/react-client\";\n\n// packages/sdk/react-uikit/src/components/SingleInputStep/SingleInputStep.tsx\nimport React3, { useCallback, useMemo as useMemo2 } from \"react\";\nimport { useTranslation as useTranslation3 } from \"react-i18next\";\nimport { Button, Input, Loading, mx as mx2 } from \"@dxos/react-ui\";\nfunction _extends2() {\n  _extends2 = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends2.apply(this, arguments);\n}\nvar SingleInputStep = ({ inputLabel, onChange, pending, onBack, backLabel, onNext, nextLabel, onCancelPending, cancelPendingLabel, loadingLabel, inputPlaceholder, inputProps }) => {\n  const { t } = useTranslation3();\n  const onKeyUp = useCallback((e) => e.key === \"Enter\" && onNext(), [\n    onNext\n  ]);\n  const inputSlots = useMemo2(() => ({\n    input: {\n      onKeyUp,\n      autoFocus: true\n    }\n  }), [\n    onKeyUp\n  ]);\n  return /* @__PURE__ */ React3.createElement(React3.Fragment, null, /* @__PURE__ */ React3.createElement(Input, _extends2({\n    size: \"lg\",\n    label: t(inputLabel)\n  }, inputProps, inputPlaceholder && {\n    placeholder: t(inputPlaceholder)\n  }, pending && {\n    disabled: true\n  }, {\n    onChange,\n    slots: inputSlots\n  })), /* @__PURE__ */ React3.createElement(\"div\", {\n    role: \"none\",\n    \"aria-live\": \"polite\",\n    className: \"flex gap-4 justify-end items-center\"\n  }, /* @__PURE__ */ React3.createElement(Button, _extends2({\n    variant: \"primary\",\n    onClick: onNext\n  }, pending && {\n    disabled: true\n  }, {\n    className: \"order-last\"\n  }), nextLabel != null ? nextLabel : t(\"next label\")), onBack && /* @__PURE__ */ React3.createElement(Button, _extends2({\n    onClick: onBack\n  }, pending && {\n    disabled: true\n  }), backLabel != null ? backLabel : t(\"back label\")), /* @__PURE__ */ React3.createElement(\"div\", {\n    role: \"none\",\n    className: \"grow\"\n  }), /* @__PURE__ */ React3.createElement(\"div\", {\n    role: \"none\",\n    className: mx2(!pending && \"hidden\")\n  }, /* @__PURE__ */ React3.createElement(Loading, {\n    label: loadingLabel || t(\"generic loading label\"),\n    slots: {\n      root: {\n        className: \"p-0 mis-0\"\n      }\n    }\n  })), onCancelPending && /* @__PURE__ */ React3.createElement(Button, _extends2({\n    onClick: onCancelPending\n  }, !pending && {\n    disabled: true\n  }), cancelPendingLabel != null ? cancelPendingLabel : t(\"cancel label\"))));\n};\n\n// packages/sdk/react-uikit/src/components/Join/JoinPanel.tsx\nfunction _extends3() {\n  _extends3 = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends3.apply(this, arguments);\n}\nvar pinLength = 6;\nvar JoinStep1 = ({ connect, status, cancel, error, parseInvitation = (code) => code, initialInvitationCode, acceptInvitation }) => {\n  const { t } = useTranslation4();\n  const [invitationCode, setInvitationCode] = useState(initialInvitationCode != null ? initialInvitationCode : \"\");\n  const onConnectNext = useCallback2(async () => {\n    const invitation = acceptInvitation(InvitationEncoder.decode(parseInvitation(invitationCode)));\n    connect(invitation);\n  }, [\n    invitationCode\n  ]);\n  useEffect(() => {\n    if (initialInvitationCode) {\n      void onConnectNext();\n    }\n  }, []);\n  return /* @__PURE__ */ React4.createElement(SingleInputStep, _extends3({}, {\n    pending: status === Invitation2.State.CONNECTING,\n    inputLabel: t(\"invitation code label\", {\n      ns: \"uikit\"\n    }),\n    inputPlaceholder: t(\"invitation code placeholder\", {\n      ns: \"uikit\"\n    }),\n    inputProps: {\n      initialValue: invitationCode,\n      slots: {\n        input: {\n          autoFocus: true,\n          className: \"text-center\"\n        }\n      },\n      ...error && {\n        validationMessage: `Untranslated error code: ${error}`,\n        validationValence: \"error\"\n      }\n    },\n    onChange: setInvitationCode,\n    onNext: onConnectNext,\n    onCancelPending: cancel\n  }));\n};\nvar JoinStep2 = ({ status, error, cancel, authenticate }) => {\n  const { t } = useTranslation4();\n  const [invitationSecret, setInvitationSecret] = useState(\"\");\n  const [pending, setPending] = useState(false);\n  const onAuthenticateNext = useCallback2((secret) => {\n    setPending(true);\n    authenticate(secret).finally(() => setPending(false));\n  }, []);\n  const onChange = useCallback2((value) => {\n    setInvitationSecret(value);\n    value.length === pinLength && onAuthenticateNext(value);\n  }, [\n    onAuthenticateNext\n  ]);\n  return /* @__PURE__ */ React4.createElement(SingleInputStep, _extends3({}, {\n    pending,\n    inputLabel: t(\"invitation secret label\", {\n      ns: \"uikit\"\n    }),\n    inputProps: {\n      size: \"pin\",\n      length: pinLength,\n      initialValue: \"\",\n      slots: {\n        input: {\n          autoFocus: true,\n          className: \"text-center\"\n        }\n      },\n      ...error && {\n        validationMessage: `Untranslated error code: ${error}`,\n        validationValence: \"error\"\n      }\n    },\n    onChange,\n    onNext: () => onAuthenticateNext(invitationSecret),\n    onCancelPending: cancel\n  }));\n};\nvar JoinPanel = (props) => {\n  const { status, cancel, error, connect, authenticate, result, haltedAt } = useInvitationStatus();\n  useEffect(() => {\n    var _a;\n    if (status === Invitation2.State.SUCCESS && result) {\n      (_a = props.onJoin) == null ? void 0 : _a.call(props, result);\n    }\n  }, [\n    status,\n    result\n  ]);\n  const cursor = status === Invitation2.State.ERROR || status === Invitation2.State.TIMEOUT || status === Invitation2.State.CANCELLED ? haltedAt : status;\n  return /* @__PURE__ */ React4.createElement(React4.Fragment, null, /* @__PURE__ */ React4.createElement(InvitationStatus, _extends3({}, {\n    status,\n    haltedAt\n  }, {\n    className: \"mbs-3\"\n  })), cursor < Invitation2.State.CONNECTED ? /* @__PURE__ */ React4.createElement(JoinStep1, _extends3({}, props, {\n    connect,\n    status,\n    cancel,\n    error\n  })) : /* @__PURE__ */ React4.createElement(JoinStep2, _extends3({}, props, {\n    connect,\n    authenticate,\n    status,\n    cancel,\n    error\n  })));\n};\n\n// packages/sdk/react-uikit/src/components/Join/JoinDialog.tsx\nfunction _extends4() {\n  _extends4 = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends4.apply(this, arguments);\n}\nvar JoinDialog = ({ dialogProps, ...props }) => {\n  const { t } = useTranslation5();\n  return /* @__PURE__ */ React5.createElement(Dialog, _extends4({\n    title: t(\"join space label\")\n  }, dialogProps), /* @__PURE__ */ React5.createElement(JoinPanel, _extends4({}, props)));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/Menubar.tsx\nimport * as ToolbarPrimitive from \"@radix-ui/react-toolbar\";\nimport throttle from \"lodash.throttle\";\nimport React10, { useCallback as useCallback3, useEffect as useEffect2, useMemo as useMemo3, useState as useState2 } from \"react\";\nimport { mx as mx4 } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/components/Menubar/ProfileMenu.tsx\nimport { UserCircleGear } from \"phosphor-react\";\nimport React6 from \"react\";\nimport { useTranslation as useTranslation6 } from \"react-i18next\";\nimport { Avatar, Button as Button2, getSize as getSize2, Popover } from \"@dxos/react-ui\";\nimport { humanize } from \"@dxos/util\";\nvar ProfileMenu = (props) => {\n  var _a, _b;\n  const { profile, onClickManageProfile } = props;\n  const { t } = useTranslation6(\"uikit\");\n  return /* @__PURE__ */ React6.createElement(Popover, {\n    openTrigger: /* @__PURE__ */ React6.createElement(Avatar, {\n      size: 10,\n      variant: \"circle\",\n      fallbackValue: profile.identityKey.toHex(),\n      label: (_a = profile.displayName) != null ? _a : humanize(profile.identityKey.toHex())\n    }),\n    slots: {\n      content: {\n        collisionPadding: 8,\n        sideOffset: 4,\n        className: \"flex flex-col gap-4 items-center z-[2]\"\n      },\n      trigger: {\n        className: \"flex justify-self-end pointer-events-auto bg-white dark:bg-neutral-700 p-0.5 button-elevation rounded-full\"\n      }\n    },\n    triggerIsInToolbar: true\n  }, /* @__PURE__ */ React6.createElement(\"p\", null, (_b = profile.displayName) != null ? _b : humanize(profile.identityKey.toHex())), onClickManageProfile && /* @__PURE__ */ React6.createElement(Button2, {\n    className: \"flex w-full gap-2\",\n    onClick: onClickManageProfile\n  }, /* @__PURE__ */ React6.createElement(UserCircleGear, {\n    className: getSize2(5)\n  }), /* @__PURE__ */ React6.createElement(\"span\", null, t(\"manage profile label\"))));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/SpaceLink.tsx\nimport { Button as ToolbarButtonItem } from \"@radix-ui/react-toolbar\";\nimport { Check } from \"phosphor-react\";\nimport React7 from \"react\";\nimport { useTranslation as useTranslation7 } from \"react-i18next\";\nimport { Button as Button3, getSize as getSize3 } from \"@dxos/react-ui\";\nvar SpaceLink = ({ onClickGoToSpace }) => {\n  const { t } = useTranslation7(\"uikit\");\n  return /* @__PURE__ */ React7.createElement(ToolbarButtonItem, {\n    asChild: true\n  }, /* @__PURE__ */ React7.createElement(Button3, {\n    compact: true,\n    className: \"pointer-events-auto flex gap-1 pli-2\",\n    onClick: onClickGoToSpace\n  }, /* @__PURE__ */ React7.createElement(\"span\", {\n    className: \"text-xs\"\n  }, t(\"go to space label\")), /* @__PURE__ */ React7.createElement(Check, {\n    className: getSize3(4)\n  })));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/SpaceMenu.tsx\nimport { Gear, UserPlus, UsersThree } from \"phosphor-react\";\nimport React8 from \"react\";\nimport { useTranslation as useTranslation8 } from \"react-i18next\";\nimport { useMembers } from \"@dxos/react-client\";\nimport { Button as Button4, defaultInlineSeparator, getSize as getSize4, Popover as Popover2, mx as mx3, buttonStyles } from \"@dxos/react-ui\";\nvar SpaceMenu = ({ space, onClickManageSpace }) => {\n  const { t } = useTranslation8(\"uikit\");\n  const members = useMembers(space.key);\n  return /* @__PURE__ */ React8.createElement(Popover2, {\n    openTrigger: /* @__PURE__ */ React8.createElement(React8.Fragment, null, /* @__PURE__ */ React8.createElement(UsersThree, {\n      className: getSize4(4)\n    }), /* @__PURE__ */ React8.createElement(\"span\", {\n      className: \"leading-none\"\n    }, members.length), /* @__PURE__ */ React8.createElement(\"span\", {\n      role: \"none\",\n      className: mx3(defaultInlineSeparator, \"bs-3\")\n    }), /* @__PURE__ */ React8.createElement(UserPlus, {\n      className: getSize4(4)\n    })),\n    slots: {\n      content: {\n        collisionPadding: 8,\n        sideOffset: 4,\n        className: \"flex flex-col gap-4 items-center z-[2]\"\n      },\n      trigger: {\n        className: mx3(buttonStyles({\n          compact: true\n        }), \"pointer-events-auto flex items-center gap-1\")\n      }\n    },\n    triggerIsInToolbar: true\n  }, onClickManageSpace && /* @__PURE__ */ React8.createElement(Button4, {\n    className: \"flex w-full gap-2\",\n    onClick: onClickManageSpace\n  }, /* @__PURE__ */ React8.createElement(Gear, {\n    className: getSize4(5)\n  }), /* @__PURE__ */ React8.createElement(\"span\", null, t(\"manage space label\"))));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/SpacesLink.tsx\nimport { CaretLeft, Planet } from \"phosphor-react\";\nimport React9 from \"react\";\nimport { useTranslation as useTranslation9 } from \"react-i18next\";\nimport { Button as Button5, getSize as getSize5, Tooltip } from \"@dxos/react-ui\";\nvar SpacesLink = ({ onClickGoToSpaces }) => {\n  const { t } = useTranslation9(\"uikit\");\n  return /* @__PURE__ */ React9.createElement(Tooltip, {\n    content: t(\"back to spaces label\"),\n    side: \"right\",\n    tooltipLabelsTrigger: true,\n    triggerIsInToolbar: true\n  }, /* @__PURE__ */ React9.createElement(Button5, {\n    compact: true,\n    onClick: onClickGoToSpaces,\n    className: \"pointer-events-auto flex gap-1\"\n  }, /* @__PURE__ */ React9.createElement(CaretLeft, {\n    className: getSize5(4)\n  }), /* @__PURE__ */ React9.createElement(Planet, {\n    className: getSize5(4)\n  })));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/Menubar.tsx\nfunction _extends5() {\n  _extends5 = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends5.apply(this, arguments);\n}\nvar Menubar = ({ children, profile, space, onClickManageProfile, onClickGoToSpaces, onClickGoToSpace, onClickManageSpace }) => {\n  const [atTop, setAtTop] = useState2(true);\n  const handleScroll = useCallback3(() => {\n    var _a, _b;\n    const scrollY = (_b = (_a = document.defaultView) == null ? void 0 : _a.scrollY) != null ? _b : 0;\n    setAtTop(scrollY < 8);\n  }, []);\n  const throttledHandleScroll = useMemo3(() => throttle(handleScroll, 100), [\n    handleScroll\n  ]);\n  useEffect2(() => {\n    var _a;\n    throttledHandleScroll();\n    (_a = document.defaultView) == null ? void 0 : _a.addEventListener(\"scroll\", throttledHandleScroll);\n    return () => {\n      var _a2;\n      return (_a2 = document.defaultView) == null ? void 0 : _a2.removeEventListener(\"scroll\", throttledHandleScroll);\n    };\n  }, [\n    throttledHandleScroll\n  ]);\n  return /* @__PURE__ */ React10.createElement(React10.Fragment, null, /* @__PURE__ */ React10.createElement(ToolbarPrimitive.Root, {\n    className: mx4(\"fixed inset-inline-0 block-start-0 z-[2] transition-[backdrop-filter,background-color]\", \"flex items-center gap-x-2 gap-y-4 pli-4 bs-16\", atTop ? \"pointer-events-none\" : \"backdrop-blur-md bg-white/20 dark:bg-neutral-700/20\")\n  }, onClickGoToSpaces && /* @__PURE__ */ React10.createElement(SpacesLink, _extends5({}, {\n    onClickGoToSpaces\n  })), /* @__PURE__ */ React10.createElement(ToolbarPrimitive.Separator, {\n    className: \"grow\"\n  }), space && (onClickGoToSpace ? /* @__PURE__ */ React10.createElement(SpaceLink, _extends5({}, {\n    onClickGoToSpace\n  })) : onClickManageSpace && /* @__PURE__ */ React10.createElement(SpaceMenu, _extends5({}, {\n    space,\n    onClickManageSpace\n  }))), /* @__PURE__ */ React10.createElement(ProfileMenu, _extends5({}, {\n    profile,\n    onClickManageProfile\n  }))), children && /* @__PURE__ */ React10.createElement(\"div\", {\n    role: \"none\",\n    className: \"fixed inset-inline-0 block-start-0 z-[2] bs-16 flex items-center justify-center pointer-events-none\"\n  }, children));\n};\n\n// packages/sdk/react-uikit/src/components/UiKitProvider/UiKitProvider.tsx\nimport React12 from \"react\";\nimport { UiProvider } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/translations/TranslationsProvider.tsx\nimport i18Next from \"i18next\";\nimport React11, { Suspense, useEffect as useEffect3, createContext, useContext } from \"react\";\nimport { initReactI18next, useTranslation as useTranslation10 } from \"react-i18next\";\nimport { Loading as Loading2 } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/translations/locales/en-US.ts\nvar en_US_exports = {};\n__export(en_US_exports, {\n  uikit: () => uikit\n});\nvar uikit = {\n  \"current app name\": \"This app\",\n  \"loading translations\": \"Loading translations\\u2026\",\n  \"generic loading label\": \"Loading\\u2026\",\n  \"auth choices label\": \"Choose an identity\",\n  \"create identity label\": \"Create an identity\",\n  \"create identity description\": \"Create a new identity.\",\n  \"recover identity label\": \"Use a seed phrase\",\n  \"recover identity description\": \"Enter your seed phrase to log in manually.\",\n  \"join identity label\": \"Use an authed device\",\n  \"join identity description\": \"Add this device to an identity you\\u2019re already logged into on another device.\",\n  \"join space label\": \"Join a space\",\n  \"create space label\": \"Create a space\",\n  \"share space label\": \"Share space\",\n  \"displayName label\": \"Display name\",\n  \"displayName placeholder\": \"Enter your preferred display name here\",\n  \"invitation code label\": \"Invitation code or URL\",\n  \"invitation code placeholder\": \"Paste the invitation code or URL here\",\n  \"invitation secret label\": \"Authentication code\",\n  \"seed phrase label\": \"Seed phrase (space separated)\",\n  \"seed phrase placeholder\": \"Enter your seed phrase here\",\n  \"back label\": \"Back\",\n  \"next label\": \"Next\",\n  \"redeem invitation label\": \"Redeem invitation\",\n  \"cancel label\": \"Cancel\",\n  \"remove label\": \"Remove\",\n  \"confirm label\": \"Okay\",\n  \"validate seed phrase label\": \"Validate seed phrase\",\n  \"fatal error label\": \"Runtime error\",\n  \"fatal error message\": \"Something went wrong that requires the app to be reloaded.\",\n  \"caught error message\": \"Something went wrong; check the console for details.\",\n  \"copy error label\": \"Copy this error\",\n  \"reload page label\": \"Reload\",\n  \"generic copy label\": \"Copy\",\n  \"generic help label\": \"Help\",\n  \"manage profile label\": \"Manage identity\",\n  \"manage space label\": \"Manage space\",\n  \"copy halo invite code label\": \"Scan to authenticate a device, click to copy URL\",\n  \"copy space invite code label\": \"Scan to join, click to copy URL\",\n  \"copy space invite code short label\": \"Copy invitation\",\n  \"display space invite qr code label\": \"Show QR\",\n  \"add contact label\": \"Add a contact\",\n  \"open apps directory label\": \"Open apps directory\",\n  \"pending label\": \"Pending\",\n  \"more options label\": \"More options\",\n  \"empty space message\": \"Nobody else is in this space\\u2026 yet.\",\n  \"space members label\": \"Members\",\n  \"go to space label\": \"Done\",\n  \"halo logo alt\": \"Halo logo\",\n  \"close label\": \"Close\",\n  \"error status label\": \"Error accepting invitation\",\n  \"cancelled status label\": \"Cancelled\",\n  \"timeout status label\": \"Timed out\",\n  \"init status label\": \"Enter an invitation code to start\",\n  \"connecting status label\": \"Connecting\\u2026\",\n  \"connected status label\": \"Enter the PIN for this invitation to continue\",\n  \"authenticating status label\": \"Checking PIN\\u2026\",\n  \"success status label\": \"Successfully accepted invitation\",\n  \"back to spaces label\": \"Back to spaces\"\n};\n\n// packages/sdk/react-uikit/src/translations/TranslationsProvider.tsx\nvar basicNS = \"uikit\";\nvar resources = {\n  \"en-US\": en_US_exports\n};\nvoid i18Next.use(initReactI18next).init({\n  resources,\n  lng: \"en-US\",\n  defaultNS: basicNS,\n  interpolation: {\n    escapeValue: false\n  }\n});\nvar TranslationsProviderLoaded = ({ children }) => {\n  const { t: _t } = useTranslation10(basicNS);\n  return /* @__PURE__ */ React11.createElement(React11.Fragment, null, children);\n};\nvar TranslationsContext = /* @__PURE__ */ createContext({\n  appNs: basicNS\n});\nvar useTranslationsContext = () => useContext(TranslationsContext);\nvar TranslationsProvider = ({ fallback, resourceExtensions, children, appNs }) => {\n  useEffect3(() => {\n    if (resourceExtensions && resourceExtensions.length) {\n      resourceExtensions.forEach((resource) => {\n        Object.keys(resource).forEach((language) => {\n          Object.keys(resource[language]).forEach((ns) => {\n            i18Next.addResourceBundle(language, ns, resource[language][ns]);\n          });\n        });\n      });\n    }\n  }, [\n    resourceExtensions\n  ]);\n  return /* @__PURE__ */ React11.createElement(TranslationsContext.Provider, {\n    value: {\n      appNs: appNs != null ? appNs : basicNS\n    }\n  }, /* @__PURE__ */ React11.createElement(Suspense, {\n    fallback: fallback != null ? fallback : /* @__PURE__ */ React11.createElement(Loading2, {\n      label: en_US_exports[basicNS][\"loading translations\"]\n    })\n  }, /* @__PURE__ */ React11.createElement(TranslationsProviderLoaded, null, children)));\n};\n\n// packages/sdk/react-uikit/src/components/UiKitProvider/UiKitProvider.tsx\nfunction _extends6() {\n  _extends6 = Object.assign || function(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends6.apply(this, arguments);\n}\nvar UiKitProvider = ({ children, fallback, resourceExtensions, ...uiProviderProps }) => {\n  return /* @__PURE__ */ React12.createElement(UiProvider, _extends6({}, uiProviderProps), /* @__PURE__ */ React12.createElement(TranslationsProvider, _extends6({}, {\n    fallback,\n    resourceExtensions\n  }), children));\n};\nexport {\n  AuthChoices,\n  InvitationStatus,\n  JoinDialog,\n  JoinPanel,\n  Menubar,\n  SingleInputStep,\n  Trans,\n  UiKitProvider,\n  useTranslation11 as useTranslation,\n  useTranslationsContext\n};\n//# sourceMappingURL=index.mjs.map\n","start":1670465438903,"end":1670465440407},{"name":"vite:react-babel","result":"var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\n\n// packages/sdk/react-uikit/src/index.ts\nimport { useTranslation as useTranslation11, Trans } from \"react-i18next\";\nexport * from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/components/AuthChoices/AuthChoices.tsx\nimport { CaretRight, Plus, QrCode, Textbox } from \"phosphor-react\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CompoundButton } from \"@dxos/react-ui\";\nvar AuthChoices = ({\n  onCreate,\n  onJoin,\n  onRecover\n}) => {\n  const {\n    t\n  } = useTranslation();\n  return (\n    /*#__PURE__*/\n    /* @__PURE__ */\n    _jsxs(\"div\", {\n      role: \"none\",\n      className: \"flex flex-col gap-2 mt-4 px-2\",\n      children: [onCreate &&\n      /*#__PURE__*/\n      /* @__PURE__ */\n      _jsx(CompoundButton, {\n        description: t(\"create identity description\"),\n        before:\n        /*#__PURE__*/\n        /* @__PURE__ */\n        _jsx(Plus, {\n          className: \"w-6 h-6\"\n        }),\n        after:\n        /*#__PURE__*/\n        /* @__PURE__ */\n        _jsx(CaretRight, {\n          className: \"w-4 h-4\",\n          weight: \"bold\"\n        }),\n        className: \"text-lg w-full\",\n        onClick: onCreate,\n        children: t(\"create identity label\")\n      }), onJoin &&\n      /*#__PURE__*/\n      /* @__PURE__ */\n      _jsx(CompoundButton, {\n        description: t(\"join identity description\"),\n        before:\n        /*#__PURE__*/\n        /* @__PURE__ */\n        _jsx(QrCode, {\n          className: \"w-6 h-6\"\n        }),\n        after:\n        /*#__PURE__*/\n        /* @__PURE__ */\n        _jsx(CaretRight, {\n          className: \"w-4 h-4\",\n          weight: \"bold\"\n        }),\n        className: \"text-lg w-full\",\n        onClick: onJoin,\n        children: t(\"join identity label\")\n      }), onRecover &&\n      /*#__PURE__*/\n      /* @__PURE__ */\n      _jsx(CompoundButton, {\n        description: t(\"recover identity description\"),\n        before:\n        /*#__PURE__*/\n        /* @__PURE__ */\n        _jsx(Textbox, {\n          className: \"w-6 h-6\"\n        }),\n        after:\n        /*#__PURE__*/\n        /* @__PURE__ */\n        _jsx(CaretRight, {\n          className: \"w-4 h-4\",\n          weight: \"bold\"\n        }),\n        className: \"text-lg w-full\",\n        onClick: onRecover,\n        children: t(\"recover identity label\")\n      })]\n    })\n  );\n};\n\n// packages/sdk/react-uikit/src/components/InvitationStatus/InvitationStatus.tsx\nimport React2, { useMemo } from \"react\";\nimport { useTranslation as useTranslation2 } from \"react-i18next\";\nimport { Invitation } from \"@dxos/client\";\nimport { strongShimmer, getSize, mx } from \"@dxos/react-ui\";\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nvar pip = mx(\"rounded-full flex-none\", getSize(2));\nvar stripe = mx(\"rounded-full grow\", getSize(2));\nvar inactiveColor = \"bg-neutral-100 dark:bg-neutral-600\";\nvar activeColor = \"bg-primary-500 dark:bg-primary-400\";\nvar successColor = \"bg-success-500 dark:bg-success-400\";\nvar errorColor = \"bg-error-500 dark:bg-error-400\";\nvar cancelledColor = \"bg-warning-500 dark:bg-warning-400\";\nvar statusValueMap = /* @__PURE__ */new Map([[Invitation.State.ERROR, -3], [Invitation.State.TIMEOUT, -2], [Invitation.State.CANCELLED, -1], [Invitation.State.INIT, 0], [Invitation.State.CONNECTING, 1], [Invitation.State.CONNECTED, 2], [Invitation.State.AUTHENTICATING, 3], [Invitation.State.SUCCESS, 4]]);\nvar InvitationStatus = ({\n  status,\n  haltedAt,\n  ...rootProps\n}) => {\n  const {\n    t\n  } = useTranslation2();\n  const statusLabelMap = useMemo(() => /* @__PURE__ */new Map([[Invitation.State.ERROR, t(\"error status label\")], [Invitation.State.TIMEOUT, t(\"timeout status label\")], [Invitation.State.CANCELLED, t(\"cancelled status label\")], [Invitation.State.INIT, t(\"init status label\")], [Invitation.State.CONNECTING, t(\"connecting status label\")], [Invitation.State.CONNECTED, t(\"connected status label\")], [Invitation.State.AUTHENTICATING, t(\"authenticating status label\")], [Invitation.State.SUCCESS, t(\"success status label\")]]), [t]);\n  const halted = status === Invitation.State.CANCELLED || status === Invitation.State.TIMEOUT || status === Invitation.State.ERROR;\n  const cursor = statusValueMap.get(halted ? haltedAt : status);\n  const resolvedColor = status === Invitation.State.ERROR ? errorColor : status === Invitation.State.CANCELLED || status === Invitation.State.TIMEOUT ? cancelledColor : successColor;\n  return /* @__PURE__ */React2.createElement(\"div\", _extends({\n    role: \"status\",\n    \"aria-label\": statusLabelMap.get(status)\n  }, rootProps, {\n    className: mx(\"flex gap-2 items-center\", rootProps.className)\n  }), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\")\n  }, /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"absolute\", !halted && cursor === 0 ? \"animate-ping block\" : \"hidden\", activeColor)\n  }), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\", cursor === 0 ? halted ? resolvedColor : activeColor : cursor > 0 ? resolvedColor : inactiveColor)\n  })), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(stripe, !halted && cursor === 1 && strongShimmer, cursor === 1 ? halted ? resolvedColor : activeColor : cursor > 1 ? resolvedColor : inactiveColor)\n  }), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\")\n  }, /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"absolute\", !halted && cursor === 2 ? \"animate-ping block\" : \"hidden\", activeColor)\n  }), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, \"relative\", cursor === 2 ? halted ? resolvedColor : activeColor : cursor > 2 ? resolvedColor : inactiveColor)\n  })), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(stripe, !halted && cursor === 3 && strongShimmer, cursor === 3 ? activeColor : cursor > 3 ? halted ? resolvedColor : resolvedColor : inactiveColor)\n  }), /* @__PURE__ */React2.createElement(\"div\", {\n    role: \"none\",\n    className: mx(pip, cursor >= 4 ? resolvedColor : inactiveColor)\n  }));\n};\n\n// packages/sdk/react-uikit/src/components/Join/JoinDialog.tsx\nimport React5 from \"react\";\nimport { useTranslation as useTranslation5 } from \"react-i18next\";\nimport { Dialog } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/components/Join/JoinPanel.tsx\nimport React4, { useCallback as useCallback2, useEffect, useState } from \"react\";\nimport { useTranslation as useTranslation4 } from \"react-i18next\";\nimport { Invitation as Invitation2, InvitationEncoder } from \"@dxos/client\";\nimport { useInvitationStatus } from \"@dxos/react-client\";\n\n// packages/sdk/react-uikit/src/components/SingleInputStep/SingleInputStep.tsx\nimport React3, { useCallback, useMemo as useMemo2 } from \"react\";\nimport { useTranslation as useTranslation3 } from \"react-i18next\";\nimport { Button, Input, Loading, mx as mx2 } from \"@dxos/react-ui\";\nfunction _extends2() {\n  _extends2 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends2.apply(this, arguments);\n}\nvar SingleInputStep = ({\n  inputLabel,\n  onChange,\n  pending,\n  onBack,\n  backLabel,\n  onNext,\n  nextLabel,\n  onCancelPending,\n  cancelPendingLabel,\n  loadingLabel,\n  inputPlaceholder,\n  inputProps\n}) => {\n  const {\n    t\n  } = useTranslation3();\n  const onKeyUp = useCallback(e => e.key === \"Enter\" && onNext(), [onNext]);\n  const inputSlots = useMemo2(() => ({\n    input: {\n      onKeyUp,\n      autoFocus: true\n    }\n  }), [onKeyUp]);\n  return /* @__PURE__ */React3.createElement(React3.Fragment, null, /* @__PURE__ */React3.createElement(Input, _extends2({\n    size: \"lg\",\n    label: t(inputLabel)\n  }, inputProps, inputPlaceholder && {\n    placeholder: t(inputPlaceholder)\n  }, pending && {\n    disabled: true\n  }, {\n    onChange,\n    slots: inputSlots\n  })), /* @__PURE__ */React3.createElement(\"div\", {\n    role: \"none\",\n    \"aria-live\": \"polite\",\n    className: \"flex gap-4 justify-end items-center\"\n  }, /* @__PURE__ */React3.createElement(Button, _extends2({\n    variant: \"primary\",\n    onClick: onNext\n  }, pending && {\n    disabled: true\n  }, {\n    className: \"order-last\"\n  }), nextLabel != null ? nextLabel : t(\"next label\")), onBack && /* @__PURE__ */React3.createElement(Button, _extends2({\n    onClick: onBack\n  }, pending && {\n    disabled: true\n  }), backLabel != null ? backLabel : t(\"back label\")), /* @__PURE__ */React3.createElement(\"div\", {\n    role: \"none\",\n    className: \"grow\"\n  }), /* @__PURE__ */React3.createElement(\"div\", {\n    role: \"none\",\n    className: mx2(!pending && \"hidden\")\n  }, /* @__PURE__ */React3.createElement(Loading, {\n    label: loadingLabel || t(\"generic loading label\"),\n    slots: {\n      root: {\n        className: \"p-0 mis-0\"\n      }\n    }\n  })), onCancelPending && /* @__PURE__ */React3.createElement(Button, _extends2({\n    onClick: onCancelPending\n  }, !pending && {\n    disabled: true\n  }), cancelPendingLabel != null ? cancelPendingLabel : t(\"cancel label\"))));\n};\n\n// packages/sdk/react-uikit/src/components/Join/JoinPanel.tsx\nfunction _extends3() {\n  _extends3 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends3.apply(this, arguments);\n}\nvar pinLength = 6;\nvar JoinStep1 = ({\n  connect,\n  status,\n  cancel,\n  error,\n  parseInvitation = code => code,\n  initialInvitationCode,\n  acceptInvitation\n}) => {\n  const {\n    t\n  } = useTranslation4();\n  const [invitationCode, setInvitationCode] = useState(initialInvitationCode != null ? initialInvitationCode : \"\");\n  const onConnectNext = useCallback2(async () => {\n    const invitation = acceptInvitation(InvitationEncoder.decode(parseInvitation(invitationCode)));\n    connect(invitation);\n  }, [invitationCode]);\n  useEffect(() => {\n    if (initialInvitationCode) {\n      void onConnectNext();\n    }\n  }, []);\n  return /* @__PURE__ */React4.createElement(SingleInputStep, _extends3({}, {\n    pending: status === Invitation2.State.CONNECTING,\n    inputLabel: t(\"invitation code label\", {\n      ns: \"uikit\"\n    }),\n    inputPlaceholder: t(\"invitation code placeholder\", {\n      ns: \"uikit\"\n    }),\n    inputProps: {\n      initialValue: invitationCode,\n      slots: {\n        input: {\n          autoFocus: true,\n          className: \"text-center\"\n        }\n      },\n      ...(error && {\n        validationMessage: `Untranslated error code: ${error}`,\n        validationValence: \"error\"\n      })\n    },\n    onChange: setInvitationCode,\n    onNext: onConnectNext,\n    onCancelPending: cancel\n  }));\n};\nvar JoinStep2 = ({\n  status,\n  error,\n  cancel,\n  authenticate\n}) => {\n  const {\n    t\n  } = useTranslation4();\n  const [invitationSecret, setInvitationSecret] = useState(\"\");\n  const [pending, setPending] = useState(false);\n  const onAuthenticateNext = useCallback2(secret => {\n    setPending(true);\n    authenticate(secret).finally(() => setPending(false));\n  }, []);\n  const onChange = useCallback2(value => {\n    setInvitationSecret(value);\n    value.length === pinLength && onAuthenticateNext(value);\n  }, [onAuthenticateNext]);\n  return /* @__PURE__ */React4.createElement(SingleInputStep, _extends3({}, {\n    pending,\n    inputLabel: t(\"invitation secret label\", {\n      ns: \"uikit\"\n    }),\n    inputProps: {\n      size: \"pin\",\n      length: pinLength,\n      initialValue: \"\",\n      slots: {\n        input: {\n          autoFocus: true,\n          className: \"text-center\"\n        }\n      },\n      ...(error && {\n        validationMessage: `Untranslated error code: ${error}`,\n        validationValence: \"error\"\n      })\n    },\n    onChange,\n    onNext: () => onAuthenticateNext(invitationSecret),\n    onCancelPending: cancel\n  }));\n};\nvar JoinPanel = props => {\n  const {\n    status,\n    cancel,\n    error,\n    connect,\n    authenticate,\n    result,\n    haltedAt\n  } = useInvitationStatus();\n  useEffect(() => {\n    var _a;\n    if (status === Invitation2.State.SUCCESS && result) {\n      (_a = props.onJoin) == null ? void 0 : _a.call(props, result);\n    }\n  }, [status, result]);\n  const cursor = status === Invitation2.State.ERROR || status === Invitation2.State.TIMEOUT || status === Invitation2.State.CANCELLED ? haltedAt : status;\n  return /* @__PURE__ */React4.createElement(React4.Fragment, null, /* @__PURE__ */React4.createElement(InvitationStatus, _extends3({}, {\n    status,\n    haltedAt\n  }, {\n    className: \"mbs-3\"\n  })), cursor < Invitation2.State.CONNECTED ? /* @__PURE__ */React4.createElement(JoinStep1, _extends3({}, props, {\n    connect,\n    status,\n    cancel,\n    error\n  })) : /* @__PURE__ */React4.createElement(JoinStep2, _extends3({}, props, {\n    connect,\n    authenticate,\n    status,\n    cancel,\n    error\n  })));\n};\n\n// packages/sdk/react-uikit/src/components/Join/JoinDialog.tsx\nfunction _extends4() {\n  _extends4 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends4.apply(this, arguments);\n}\nvar JoinDialog = ({\n  dialogProps,\n  ...props\n}) => {\n  const {\n    t\n  } = useTranslation5();\n  return /* @__PURE__ */React5.createElement(Dialog, _extends4({\n    title: t(\"join space label\")\n  }, dialogProps), /* @__PURE__ */React5.createElement(JoinPanel, _extends4({}, props)));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/Menubar.tsx\nimport * as ToolbarPrimitive from \"@radix-ui/react-toolbar\";\nimport throttle from \"lodash.throttle\";\nimport React10, { useCallback as useCallback3, useEffect as useEffect2, useMemo as useMemo3, useState as useState2 } from \"react\";\nimport { mx as mx4 } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/components/Menubar/ProfileMenu.tsx\nimport { UserCircleGear } from \"phosphor-react\";\nimport React6 from \"react\";\nimport { useTranslation as useTranslation6 } from \"react-i18next\";\nimport { Avatar, Button as Button2, getSize as getSize2, Popover } from \"@dxos/react-ui\";\nimport { humanize } from \"@dxos/util\";\nvar ProfileMenu = props => {\n  var _a, _b;\n  const {\n    profile,\n    onClickManageProfile\n  } = props;\n  const {\n    t\n  } = useTranslation6(\"uikit\");\n  return /* @__PURE__ */React6.createElement(Popover, {\n    openTrigger: /* @__PURE__ */React6.createElement(Avatar, {\n      size: 10,\n      variant: \"circle\",\n      fallbackValue: profile.identityKey.toHex(),\n      label: (_a = profile.displayName) != null ? _a : humanize(profile.identityKey.toHex())\n    }),\n    slots: {\n      content: {\n        collisionPadding: 8,\n        sideOffset: 4,\n        className: \"flex flex-col gap-4 items-center z-[2]\"\n      },\n      trigger: {\n        className: \"flex justify-self-end pointer-events-auto bg-white dark:bg-neutral-700 p-0.5 button-elevation rounded-full\"\n      }\n    },\n    triggerIsInToolbar: true\n  }, /* @__PURE__ */React6.createElement(\"p\", null, (_b = profile.displayName) != null ? _b : humanize(profile.identityKey.toHex())), onClickManageProfile && /* @__PURE__ */React6.createElement(Button2, {\n    className: \"flex w-full gap-2\",\n    onClick: onClickManageProfile\n  }, /* @__PURE__ */React6.createElement(UserCircleGear, {\n    className: getSize2(5)\n  }), /* @__PURE__ */React6.createElement(\"span\", null, t(\"manage profile label\"))));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/SpaceLink.tsx\nimport { Button as ToolbarButtonItem } from \"@radix-ui/react-toolbar\";\nimport { Check } from \"phosphor-react\";\nimport React7 from \"react\";\nimport { useTranslation as useTranslation7 } from \"react-i18next\";\nimport { Button as Button3, getSize as getSize3 } from \"@dxos/react-ui\";\nvar SpaceLink = ({\n  onClickGoToSpace\n}) => {\n  const {\n    t\n  } = useTranslation7(\"uikit\");\n  return /* @__PURE__ */React7.createElement(ToolbarButtonItem, {\n    asChild: true\n  }, /* @__PURE__ */React7.createElement(Button3, {\n    compact: true,\n    className: \"pointer-events-auto flex gap-1 pli-2\",\n    onClick: onClickGoToSpace\n  }, /* @__PURE__ */React7.createElement(\"span\", {\n    className: \"text-xs\"\n  }, t(\"go to space label\")), /* @__PURE__ */React7.createElement(Check, {\n    className: getSize3(4)\n  })));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/SpaceMenu.tsx\nimport { Gear, UserPlus, UsersThree } from \"phosphor-react\";\nimport React8 from \"react\";\nimport { useTranslation as useTranslation8 } from \"react-i18next\";\nimport { useMembers } from \"@dxos/react-client\";\nimport { Button as Button4, defaultInlineSeparator, getSize as getSize4, Popover as Popover2, mx as mx3, buttonStyles } from \"@dxos/react-ui\";\nvar SpaceMenu = ({\n  space,\n  onClickManageSpace\n}) => {\n  const {\n    t\n  } = useTranslation8(\"uikit\");\n  const members = useMembers(space.key);\n  return /* @__PURE__ */React8.createElement(Popover2, {\n    openTrigger: /* @__PURE__ */React8.createElement(React8.Fragment, null, /* @__PURE__ */React8.createElement(UsersThree, {\n      className: getSize4(4)\n    }), /* @__PURE__ */React8.createElement(\"span\", {\n      className: \"leading-none\"\n    }, members.length), /* @__PURE__ */React8.createElement(\"span\", {\n      role: \"none\",\n      className: mx3(defaultInlineSeparator, \"bs-3\")\n    }), /* @__PURE__ */React8.createElement(UserPlus, {\n      className: getSize4(4)\n    })),\n    slots: {\n      content: {\n        collisionPadding: 8,\n        sideOffset: 4,\n        className: \"flex flex-col gap-4 items-center z-[2]\"\n      },\n      trigger: {\n        className: mx3(buttonStyles({\n          compact: true\n        }), \"pointer-events-auto flex items-center gap-1\")\n      }\n    },\n    triggerIsInToolbar: true\n  }, onClickManageSpace && /* @__PURE__ */React8.createElement(Button4, {\n    className: \"flex w-full gap-2\",\n    onClick: onClickManageSpace\n  }, /* @__PURE__ */React8.createElement(Gear, {\n    className: getSize4(5)\n  }), /* @__PURE__ */React8.createElement(\"span\", null, t(\"manage space label\"))));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/SpacesLink.tsx\nimport { CaretLeft, Planet } from \"phosphor-react\";\nimport React9 from \"react\";\nimport { useTranslation as useTranslation9 } from \"react-i18next\";\nimport { Button as Button5, getSize as getSize5, Tooltip } from \"@dxos/react-ui\";\nvar SpacesLink = ({\n  onClickGoToSpaces\n}) => {\n  const {\n    t\n  } = useTranslation9(\"uikit\");\n  return /* @__PURE__ */React9.createElement(Tooltip, {\n    content: t(\"back to spaces label\"),\n    side: \"right\",\n    tooltipLabelsTrigger: true,\n    triggerIsInToolbar: true\n  }, /* @__PURE__ */React9.createElement(Button5, {\n    compact: true,\n    onClick: onClickGoToSpaces,\n    className: \"pointer-events-auto flex gap-1\"\n  }, /* @__PURE__ */React9.createElement(CaretLeft, {\n    className: getSize5(4)\n  }), /* @__PURE__ */React9.createElement(Planet, {\n    className: getSize5(4)\n  })));\n};\n\n// packages/sdk/react-uikit/src/components/Menubar/Menubar.tsx\nfunction _extends5() {\n  _extends5 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends5.apply(this, arguments);\n}\nvar Menubar = ({\n  children,\n  profile,\n  space,\n  onClickManageProfile,\n  onClickGoToSpaces,\n  onClickGoToSpace,\n  onClickManageSpace\n}) => {\n  const [atTop, setAtTop] = useState2(true);\n  const handleScroll = useCallback3(() => {\n    var _a, _b;\n    const scrollY = (_b = (_a = document.defaultView) == null ? void 0 : _a.scrollY) != null ? _b : 0;\n    setAtTop(scrollY < 8);\n  }, []);\n  const throttledHandleScroll = useMemo3(() => throttle(handleScroll, 100), [handleScroll]);\n  useEffect2(() => {\n    var _a;\n    throttledHandleScroll();\n    (_a = document.defaultView) == null ? void 0 : _a.addEventListener(\"scroll\", throttledHandleScroll);\n    return () => {\n      var _a2;\n      return (_a2 = document.defaultView) == null ? void 0 : _a2.removeEventListener(\"scroll\", throttledHandleScroll);\n    };\n  }, [throttledHandleScroll]);\n  return /* @__PURE__ */React10.createElement(React10.Fragment, null, /* @__PURE__ */React10.createElement(ToolbarPrimitive.Root, {\n    className: mx4(\"fixed inset-inline-0 block-start-0 z-[2] transition-[backdrop-filter,background-color]\", \"flex items-center gap-x-2 gap-y-4 pli-4 bs-16\", atTop ? \"pointer-events-none\" : \"backdrop-blur-md bg-white/20 dark:bg-neutral-700/20\")\n  }, onClickGoToSpaces && /* @__PURE__ */React10.createElement(SpacesLink, _extends5({}, {\n    onClickGoToSpaces\n  })), /* @__PURE__ */React10.createElement(ToolbarPrimitive.Separator, {\n    className: \"grow\"\n  }), space && (onClickGoToSpace ? /* @__PURE__ */React10.createElement(SpaceLink, _extends5({}, {\n    onClickGoToSpace\n  })) : onClickManageSpace && /* @__PURE__ */React10.createElement(SpaceMenu, _extends5({}, {\n    space,\n    onClickManageSpace\n  }))), /* @__PURE__ */React10.createElement(ProfileMenu, _extends5({}, {\n    profile,\n    onClickManageProfile\n  }))), children && /* @__PURE__ */React10.createElement(\"div\", {\n    role: \"none\",\n    className: \"fixed inset-inline-0 block-start-0 z-[2] bs-16 flex items-center justify-center pointer-events-none\"\n  }, children));\n};\n\n// packages/sdk/react-uikit/src/components/UiKitProvider/UiKitProvider.tsx\nimport React12 from \"react\";\nimport { UiProvider } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/translations/TranslationsProvider.tsx\nimport i18Next from \"i18next\";\nimport React11, { Suspense, useEffect as useEffect3, createContext, useContext } from \"react\";\nimport { initReactI18next, useTranslation as useTranslation10 } from \"react-i18next\";\nimport { Loading as Loading2 } from \"@dxos/react-ui\";\n\n// packages/sdk/react-uikit/src/translations/locales/en-US.ts\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar en_US_exports = {};\n__export(en_US_exports, {\n  uikit: () => uikit\n});\nvar uikit = {\n  \"current app name\": \"This app\",\n  \"loading translations\": \"Loading translations\\u2026\",\n  \"generic loading label\": \"Loading\\u2026\",\n  \"auth choices label\": \"Choose an identity\",\n  \"create identity label\": \"Create an identity\",\n  \"create identity description\": \"Create a new identity.\",\n  \"recover identity label\": \"Use a seed phrase\",\n  \"recover identity description\": \"Enter your seed phrase to log in manually.\",\n  \"join identity label\": \"Use an authed device\",\n  \"join identity description\": \"Add this device to an identity you\\u2019re already logged into on another device.\",\n  \"join space label\": \"Join a space\",\n  \"create space label\": \"Create a space\",\n  \"share space label\": \"Share space\",\n  \"displayName label\": \"Display name\",\n  \"displayName placeholder\": \"Enter your preferred display name here\",\n  \"invitation code label\": \"Invitation code or URL\",\n  \"invitation code placeholder\": \"Paste the invitation code or URL here\",\n  \"invitation secret label\": \"Authentication code\",\n  \"seed phrase label\": \"Seed phrase (space separated)\",\n  \"seed phrase placeholder\": \"Enter your seed phrase here\",\n  \"back label\": \"Back\",\n  \"next label\": \"Next\",\n  \"redeem invitation label\": \"Redeem invitation\",\n  \"cancel label\": \"Cancel\",\n  \"remove label\": \"Remove\",\n  \"confirm label\": \"Okay\",\n  \"validate seed phrase label\": \"Validate seed phrase\",\n  \"fatal error label\": \"Runtime error\",\n  \"fatal error message\": \"Something went wrong that requires the app to be reloaded.\",\n  \"caught error message\": \"Something went wrong; check the console for details.\",\n  \"copy error label\": \"Copy this error\",\n  \"reload page label\": \"Reload\",\n  \"generic copy label\": \"Copy\",\n  \"generic help label\": \"Help\",\n  \"manage profile label\": \"Manage identity\",\n  \"manage space label\": \"Manage space\",\n  \"copy halo invite code label\": \"Scan to authenticate a device, click to copy URL\",\n  \"copy space invite code label\": \"Scan to join, click to copy URL\",\n  \"copy space invite code short label\": \"Copy invitation\",\n  \"display space invite qr code label\": \"Show QR\",\n  \"add contact label\": \"Add a contact\",\n  \"open apps directory label\": \"Open apps directory\",\n  \"pending label\": \"Pending\",\n  \"more options label\": \"More options\",\n  \"empty space message\": \"Nobody else is in this space\\u2026 yet.\",\n  \"space members label\": \"Members\",\n  \"go to space label\": \"Done\",\n  \"halo logo alt\": \"Halo logo\",\n  \"close label\": \"Close\",\n  \"error status label\": \"Error accepting invitation\",\n  \"cancelled status label\": \"Cancelled\",\n  \"timeout status label\": \"Timed out\",\n  \"init status label\": \"Enter an invitation code to start\",\n  \"connecting status label\": \"Connecting\\u2026\",\n  \"connected status label\": \"Enter the PIN for this invitation to continue\",\n  \"authenticating status label\": \"Checking PIN\\u2026\",\n  \"success status label\": \"Successfully accepted invitation\",\n  \"back to spaces label\": \"Back to spaces\"\n};\n\n// packages/sdk/react-uikit/src/translations/TranslationsProvider.tsx\nvar basicNS = \"uikit\";\nvar resources = {\n  \"en-US\": en_US_exports\n};\nvoid i18Next.use(initReactI18next).init({\n  resources,\n  lng: \"en-US\",\n  defaultNS: basicNS,\n  interpolation: {\n    escapeValue: false\n  }\n});\nvar TranslationsProviderLoaded = ({\n  children\n}) => {\n  const {\n    t: _t\n  } = useTranslation10(basicNS);\n  return /* @__PURE__ */React11.createElement(React11.Fragment, null, children);\n};\nvar TranslationsContext = /* @__PURE__ */createContext({\n  appNs: basicNS\n});\nvar useTranslationsContext = () => useContext(TranslationsContext);\nvar TranslationsProvider = ({\n  fallback,\n  resourceExtensions,\n  children,\n  appNs\n}) => {\n  useEffect3(() => {\n    if (resourceExtensions && resourceExtensions.length) {\n      resourceExtensions.forEach(resource => {\n        Object.keys(resource).forEach(language => {\n          Object.keys(resource[language]).forEach(ns => {\n            i18Next.addResourceBundle(language, ns, resource[language][ns]);\n          });\n        });\n      });\n    }\n  }, [resourceExtensions]);\n  return /* @__PURE__ */React11.createElement(TranslationsContext.Provider, {\n    value: {\n      appNs: appNs != null ? appNs : basicNS\n    }\n  }, /* @__PURE__ */React11.createElement(Suspense, {\n    fallback: fallback != null ? fallback : /* @__PURE__ */React11.createElement(Loading2, {\n      label: en_US_exports[basicNS][\"loading translations\"]\n    })\n  }, /* @__PURE__ */React11.createElement(TranslationsProviderLoaded, null, children)));\n};\n\n// packages/sdk/react-uikit/src/components/UiKitProvider/UiKitProvider.tsx\nfunction _extends6() {\n  _extends6 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends6.apply(this, arguments);\n}\nvar UiKitProvider = ({\n  children,\n  fallback,\n  resourceExtensions,\n  ...uiProviderProps\n}) => {\n  return /* @__PURE__ */React12.createElement(UiProvider, _extends6({}, uiProviderProps), /* @__PURE__ */React12.createElement(TranslationsProvider, _extends6({}, {\n    fallback,\n    resourceExtensions\n  }), children));\n};\nexport { AuthChoices, InvitationStatus, JoinDialog, JoinPanel, Menubar, SingleInputStep, Trans, UiKitProvider, useTranslation11 as useTranslation, useTranslationsContext };","start":1670465440407,"end":1670465440487,"order":"pre"}]}
