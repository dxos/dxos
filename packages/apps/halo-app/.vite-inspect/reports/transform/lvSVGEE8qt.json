{"resolvedId":"/home/jdw/Code/dxos/dxos/packages/apps/halo-app/src/pages/CreateIdentityPage.tsx","transforms":[{"name":"vite:load-fallback","result":"//\n// Copyright 2022 DXOS.org\n//\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\n\nimport { useClient, useIdentity } from '@dxos/react-client';\nimport { Heading, SingleInputStep, useTranslation } from '@dxos/react-uikit';\n\nconst CreateIdentityPage = () => {\n  const { t } = useTranslation();\n  const client = useClient();\n  const identity = useIdentity();\n  const [displayName, setDisplayName] = useState('');\n  const [pending, setPending] = useState(false);\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const redirectUrl = searchParams.get('redirect');\n  const redirect = useCallback(\n    () =>\n      redirectUrl?.startsWith('http')\n        ? window.location.replace(redirectUrl)\n        : navigate(redirectUrl && redirectUrl.length ? redirectUrl : '/devices'),\n    [redirectUrl]\n  );\n\n  const onNext = useCallback(() => {\n    setPending(true);\n    void client.halo.createProfile({ displayName }).then(redirect, (_rejection) => setPending(false));\n  }, [displayName, redirect]);\n\n  useEffect(() => {\n    if (identity) {\n      redirect();\n    }\n  }, []);\n\n  return (\n    <main className='max-is-lg mli-auto pli-7 mbs-7'>\n      <Heading>{t('create identity label', { ns: 'uikit' })}</Heading>\n      <SingleInputStep\n        {...{\n          pending,\n          inputLabel: t('displayName label', { ns: 'uikit' }),\n          inputPlaceholder: t('displayName placeholder', { ns: 'uikit' }),\n          onChange: setDisplayName,\n          onNext,\n          onBack: () => history.back()\n        }}\n      />\n    </main>\n  );\n};\n\nexport default CreateIdentityPage;\n","start":1670465438377,"end":1670465438622},{"name":"vite:react-babel","result":"//\n// Copyright 2022 DXOS.org\n//\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { useClient, useIdentity } from '@dxos/react-client';\nimport { Heading, SingleInputStep, useTranslation } from '@dxos/react-uikit';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst CreateIdentityPage = () => {\n  const {\n    t\n  } = useTranslation();\n  const client = useClient();\n  const identity = useIdentity();\n  const [displayName, setDisplayName] = useState('');\n  const [pending, setPending] = useState(false);\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const redirectUrl = searchParams.get('redirect');\n  const redirect = useCallback(() => redirectUrl?.startsWith('http') ? window.location.replace(redirectUrl) : navigate(redirectUrl && redirectUrl.length ? redirectUrl : '/devices'), [redirectUrl]);\n  const onNext = useCallback(() => {\n    setPending(true);\n    void client.halo.createProfile({\n      displayName\n    }).then(redirect, _rejection => setPending(false));\n  }, [displayName, redirect]);\n  useEffect(() => {\n    if (identity) {\n      redirect();\n    }\n  }, []);\n  return /*#__PURE__*/_jsxs(\"main\", {\n    className: \"max-is-lg mli-auto pli-7 mbs-7\",\n    children: [/*#__PURE__*/_jsx(Heading, {\n      children: t('create identity label', {\n        ns: 'uikit'\n      })\n    }), /*#__PURE__*/_jsx(SingleInputStep, {\n      pending,\n      inputLabel: t('displayName label', {\n        ns: 'uikit'\n      }),\n      inputPlaceholder: t('displayName placeholder', {\n        ns: 'uikit'\n      }),\n      onChange: setDisplayName,\n      onNext,\n      onBack: () => history.back()\n    })]\n  });\n};\nexport default CreateIdentityPage;","start":1670465438623,"end":1670465438631,"order":"pre"},{"name":"vite:esbuild","result":"import { useCallback, useEffect, useState } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { useClient, useIdentity } from \"@dxos/react-client\";\nimport { Heading, SingleInputStep, useTranslation } from \"@dxos/react-uikit\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst CreateIdentityPage = () => {\n  const {\n    t\n  } = useTranslation();\n  const client = useClient();\n  const identity = useIdentity();\n  const [displayName, setDisplayName] = useState(\"\");\n  const [pending, setPending] = useState(false);\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const redirectUrl = searchParams.get(\"redirect\");\n  const redirect = useCallback(() => redirectUrl?.startsWith(\"http\") ? window.location.replace(redirectUrl) : navigate(redirectUrl && redirectUrl.length ? redirectUrl : \"/devices\"), [redirectUrl]);\n  const onNext = useCallback(() => {\n    setPending(true);\n    void client.halo.createProfile({\n      displayName\n    }).then(redirect, (_rejection) => setPending(false));\n  }, [displayName, redirect]);\n  useEffect(() => {\n    if (identity) {\n      redirect();\n    }\n  }, []);\n  return /* @__PURE__ */ _jsxs(\"main\", {\n    className: \"max-is-lg mli-auto pli-7 mbs-7\",\n    children: [/* @__PURE__ */ _jsx(Heading, {\n      children: t(\"create identity label\", {\n        ns: \"uikit\"\n      })\n    }), /* @__PURE__ */ _jsx(SingleInputStep, {\n      pending,\n      inputLabel: t(\"displayName label\", {\n        ns: \"uikit\"\n      }),\n      inputPlaceholder: t(\"displayName placeholder\", {\n        ns: \"uikit\"\n      }),\n      onChange: setDisplayName,\n      onNext,\n      onBack: () => history.back()\n    })]\n  });\n};\nexport default CreateIdentityPage;\n","start":1670465438631,"end":1670465438904,"order":"normal"}]}
