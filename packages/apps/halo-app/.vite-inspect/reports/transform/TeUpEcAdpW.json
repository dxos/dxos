{"resolvedId":"/home/jdw/Code/dxos/dxos/node_modules/.pnpm/@headlessui+react@1.7.4_biqbaboplfbrettd7655fr4n2y/node_modules/@headlessui/react/dist/components/combobox/combobox.js","transforms":[{"name":"vite:load-fallback","result":"import X,{Fragment as se,createContext as z,createRef as be,useCallback as de,useContext as ee,useMemo as I,useReducer as ce,useRef as D}from\"react\";import{useComputed as J}from'../../hooks/use-computed.js';import{useDisposables as oe}from'../../hooks/use-disposables.js';import{useEvent as x}from'../../hooks/use-event.js';import{useId as j}from'../../hooks/use-id.js';import{useIsoMorphicEffect as h}from'../../hooks/use-iso-morphic-effect.js';import{useLatestValue as fe}from'../../hooks/use-latest-value.js';import{useOutsideClick as me}from'../../hooks/use-outside-click.js';import{useResolveButtonType as Te}from'../../hooks/use-resolve-button-type.js';import{useSyncRefs as H}from'../../hooks/use-sync-refs.js';import{useTreeWalker as xe}from'../../hooks/use-tree-walker.js';import{calculateActiveIndex as ge,Focus as R}from'../../utils/calculate-active-index.js';import{disposables as te}from'../../utils/disposables.js';import{forwardRefWithAs as k,render as w,compact as Oe,Features as ne}from'../../utils/render.js';import{isDisabledReactIssue7711 as Ce}from'../../utils/bugs.js';import{match as B}from'../../utils/match.js';import{objectToFormEntries as Re}from'../../utils/form.js';import{sortByDomNode as ve}from'../../utils/focus-management.js';import{Hidden as ye,Features as Se}from'../../internal/hidden.js';import{useOpenClosed as Ae,State as q,OpenClosedProvider as Pe}from'../../internal/open-closed.js';import{Keys as v}from'../keyboard.js';import{useControllable as Ee}from'../../hooks/use-controllable.js';import{useWatch as Ie}from'../../hooks/use-watch.js';var De=(n=>(n[n.Open=0]=\"Open\",n[n.Closed=1]=\"Closed\",n))(De||{}),Le=(n=>(n[n.Single=0]=\"Single\",n[n.Multi=1]=\"Multi\",n))(Le||{}),he=(n=>(n[n.Pointer=0]=\"Pointer\",n[n.Other=1]=\"Other\",n))(he||{}),Ve=(a=>(a[a.OpenCombobox=0]=\"OpenCombobox\",a[a.CloseCombobox=1]=\"CloseCombobox\",a[a.GoToOption=2]=\"GoToOption\",a[a.RegisterOption=3]=\"RegisterOption\",a[a.UnregisterOption=4]=\"UnregisterOption\",a[a.RegisterLabel=5]=\"RegisterLabel\",a))(Ve||{});function Q(t,l=n=>n){let n=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,e=ve(l(t.options.slice()),r=>r.dataRef.current.domRef.current),i=n?e.indexOf(n):null;return i===-1&&(i=null),{options:e,activeOptionIndex:i}}let Me={[1](t){return t.dataRef.current.disabled||t.comboboxState===1?t:{...t,activeOptionIndex:null,comboboxState:1}},[0](t){if(t.dataRef.current.disabled||t.comboboxState===0)return t;let l=t.activeOptionIndex,{isSelected:n}=t.dataRef.current,e=t.options.findIndex(i=>n(i.dataRef.current.value));return e!==-1&&(l=e),{...t,comboboxState:0,activeOptionIndex:l}},[2](t,l){var i;if(t.dataRef.current.disabled||t.dataRef.current.optionsRef.current&&!t.dataRef.current.optionsPropsRef.current.static&&t.comboboxState===1)return t;let n=Q(t);if(n.activeOptionIndex===null){let r=n.options.findIndex(a=>!a.dataRef.current.disabled);r!==-1&&(n.activeOptionIndex=r)}let e=ge(l,{resolveItems:()=>n.options,resolveActiveIndex:()=>n.activeOptionIndex,resolveId:r=>r.id,resolveDisabled:r=>r.dataRef.current.disabled});return{...t,...n,activeOptionIndex:e,activationTrigger:(i=l.trigger)!=null?i:1}},[3]:(t,l)=>{let n={id:l.id,dataRef:l.dataRef},e=Q(t,r=>[...r,n]);t.activeOptionIndex===null&&t.dataRef.current.isSelected(l.dataRef.current.value)&&(e.activeOptionIndex=e.options.indexOf(n));let i={...t,...e,activationTrigger:1};return t.dataRef.current.__demoMode&&t.dataRef.current.value===void 0&&(i.activeOptionIndex=0),i},[4]:(t,l)=>{let n=Q(t,e=>{let i=e.findIndex(r=>r.id===l.id);return i!==-1&&e.splice(i,1),e});return{...t,...n,activationTrigger:1}},[5]:(t,l)=>({...t,labelId:l.id})},Y=z(null);Y.displayName=\"ComboboxActionsContext\";function K(t){let l=ee(Y);if(l===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,K),n}return l}let Z=z(null);Z.displayName=\"ComboboxDataContext\";function U(t){let l=ee(Z);if(l===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,U),n}return l}function Fe(t,l){return B(l.type,Me,t,l)}let _e=se;function ke(t,l){let{value:n,defaultValue:e,onChange:i,name:r,by:a=(d,f)=>d===f,disabled:m=!1,__demoMode:o=!1,nullable:s=!1,multiple:y=!1,...C}=t,[g,O]=Ee(n,i,e),[c,b]=ce(Fe,{dataRef:be(),comboboxState:o?0:1,options:[],activeOptionIndex:null,activationTrigger:1,labelId:null}),T=D(!1),G=D({static:!1,hold:!1}),V=D(null),M=D(null),N=D(null),W=D(null),P=x(typeof a==\"string\"?(d,f)=>{let A=a;return(d==null?void 0:d[A])===(f==null?void 0:f[A])}:a),F=de(d=>B(u.mode,{[1]:()=>g.some(f=>P(f,d)),[0]:()=>P(g,d)}),[g]),u=I(()=>({...c,optionsPropsRef:G,labelRef:V,inputRef:M,buttonRef:N,optionsRef:W,value:g,disabled:m,mode:y?1:0,get activeOptionIndex(){if(T.current&&c.activeOptionIndex===null&&c.options.length>0){let d=c.options.findIndex(f=>!f.dataRef.current.disabled);if(d!==-1)return d}return c.activeOptionIndex},compare:P,isSelected:F,nullable:s,__demoMode:o}),[g,m,y,s,o,c]);h(()=>{c.dataRef.current=u},[u]),me([u.buttonRef,u.inputRef,u.optionsRef],()=>b({type:1}),u.comboboxState===0);let E=I(()=>({open:u.comboboxState===0,disabled:m,activeIndex:u.activeOptionIndex,activeOption:u.activeOptionIndex===null?null:u.options[u.activeOptionIndex].dataRef.current.value,value:g}),[u,m,g]),p=x(d=>{let f=u.options.find(A=>A.id===d);!f||$(f.dataRef.current.value)}),S=x(()=>{if(u.activeOptionIndex!==null){let{dataRef:d,id:f}=u.options[u.activeOptionIndex];$(d.current.value),b({type:2,focus:R.Specific,id:f})}}),L=x(()=>{b({type:0}),T.current=!0}),_=x(()=>{b({type:1}),T.current=!1}),re=x((d,f,A)=>(T.current=!1,d===R.Specific?b({type:2,focus:R.Specific,id:f,trigger:A}):b({type:2,focus:d,trigger:A}))),ae=x((d,f)=>(b({type:3,id:d,dataRef:f}),()=>b({type:4,id:d}))),le=x(d=>(b({type:5,id:d}),()=>b({type:5,id:null}))),$=x(d=>B(u.mode,{[0](){return O==null?void 0:O(d)},[1](){let f=u.value.slice(),A=f.findIndex(pe=>P(pe,d));return A===-1?f.push(d):f.splice(A,1),O==null?void 0:O(f)}})),ie=I(()=>({onChange:$,registerOption:ae,registerLabel:le,goToOption:re,closeCombobox:_,openCombobox:L,selectActiveOption:S,selectOption:p}),[]),ue=l===null?{}:{ref:l};return X.createElement(Y.Provider,{value:ie},X.createElement(Z.Provider,{value:u},X.createElement(Pe,{value:B(u.comboboxState,{[0]:q.Open,[1]:q.Closed})},r!=null&&g!=null&&Re({[r]:g}).map(([d,f])=>X.createElement(ye,{features:Se.Hidden,...Oe({key:d,as:\"input\",type:\"hidden\",hidden:!0,readOnly:!0,name:d,value:f})})),w({ourProps:ue,theirProps:C,slot:E,defaultTag:_e,name:\"Combobox\"}))))}let we=k(ke),Be=\"input\",Ue=k(function(l,n){var u,E;let{value:e,onChange:i,displayValue:r,type:a=\"text\",...m}=l,o=U(\"Combobox.Input\"),s=K(\"Combobox.Input\"),y=H(o.inputRef,n),C=`headlessui-combobox-input-${j()}`,g=oe(),O=!1;function c(p){var _;let S=o.inputRef.current;if(!S||S.value===p)return;let L=Object.getOwnPropertyDescriptor(S.constructor.prototype,\"value\");(_=L==null?void 0:L.set)==null||_.call(S,p),O=!0,S.dispatchEvent(new Event(\"input\",{bubbles:!0})),S.value=p,O=!1}let b=I(()=>{var p;return typeof r==\"function\"?(p=r(o.value))!=null?p:\"\":typeof o.value==\"string\"?o.value:\"\"},[o.value]);Ie(([p,S],[L,_])=>{!o.inputRef.current||(_===0&&S===1?c(p):p!==L&&(o.inputRef.current.value=p))},[b,o.comboboxState]);let T=D(!1),G=x(()=>{T.current=!0}),V=x(()=>{setTimeout(()=>{T.current=!1})}),M=x(p=>{switch(p.key){case v.Backspace:case v.Delete:if(o.mode!==0||!o.nullable)return;let S=p.currentTarget;g.requestAnimationFrame(()=>{S.value===\"\"&&(s.onChange(null),o.optionsRef.current&&(o.optionsRef.current.scrollTop=0),s.goToOption(R.Nothing))});break;case v.Enter:if(o.comboboxState!==0||T.current)return;if(p.preventDefault(),p.stopPropagation(),o.activeOptionIndex===null){s.closeCombobox();return}s.selectActiveOption(),o.mode===0&&s.closeCombobox();break;case v.ArrowDown:return p.preventDefault(),p.stopPropagation(),B(o.comboboxState,{[0]:()=>{s.goToOption(R.Next)},[1]:()=>{s.openCombobox()}});case v.ArrowUp:return p.preventDefault(),p.stopPropagation(),B(o.comboboxState,{[0]:()=>{s.goToOption(R.Previous)},[1]:()=>{s.openCombobox(),g.nextFrame(()=>{o.value||s.goToOption(R.Last)})}});case v.Home:case v.PageUp:return p.preventDefault(),p.stopPropagation(),s.goToOption(R.First);case v.End:case v.PageDown:return p.preventDefault(),p.stopPropagation(),s.goToOption(R.Last);case v.Escape:return o.comboboxState!==0?void 0:(p.preventDefault(),o.optionsRef.current&&!o.optionsPropsRef.current.static&&p.stopPropagation(),s.closeCombobox());case v.Tab:if(o.comboboxState!==0)return;o.mode===0&&s.selectActiveOption(),s.closeCombobox();break}}),N=x(p=>{O||s.openCombobox(),i==null||i(p)}),W=J(()=>{if(!!o.labelId)return[o.labelId].join(\" \")},[o.labelId]),P=I(()=>({open:o.comboboxState===0,disabled:o.disabled}),[o]),F={ref:y,id:C,role:\"combobox\",type:a,\"aria-controls\":(u=o.optionsRef.current)==null?void 0:u.id,\"aria-expanded\":o.disabled?void 0:o.comboboxState===0,\"aria-activedescendant\":o.activeOptionIndex===null||(E=o.options[o.activeOptionIndex])==null?void 0:E.id,\"aria-multiselectable\":o.mode===1?!0:void 0,\"aria-labelledby\":W,disabled:o.disabled,onCompositionStart:G,onCompositionEnd:V,onKeyDown:M,onChange:N};return w({ourProps:F,theirProps:m,slot:P,defaultTag:Be,name:\"Combobox.Input\"})}),Ge=\"button\",Ne=k(function(l,n){var c;let e=U(\"Combobox.Button\"),i=K(\"Combobox.Button\"),r=H(e.buttonRef,n),a=`headlessui-combobox-button-${j()}`,m=oe(),o=x(b=>{switch(b.key){case v.ArrowDown:return b.preventDefault(),b.stopPropagation(),e.comboboxState===1&&i.openCombobox(),m.nextFrame(()=>{var T;return(T=e.inputRef.current)==null?void 0:T.focus({preventScroll:!0})});case v.ArrowUp:return b.preventDefault(),b.stopPropagation(),e.comboboxState===1&&(i.openCombobox(),m.nextFrame(()=>{e.value||i.goToOption(R.Last)})),m.nextFrame(()=>{var T;return(T=e.inputRef.current)==null?void 0:T.focus({preventScroll:!0})});case v.Escape:return e.comboboxState!==0?void 0:(b.preventDefault(),e.optionsRef.current&&!e.optionsPropsRef.current.static&&b.stopPropagation(),i.closeCombobox(),m.nextFrame(()=>{var T;return(T=e.inputRef.current)==null?void 0:T.focus({preventScroll:!0})}));default:return}}),s=x(b=>{if(Ce(b.currentTarget))return b.preventDefault();e.comboboxState===0?i.closeCombobox():(b.preventDefault(),i.openCombobox()),m.nextFrame(()=>{var T;return(T=e.inputRef.current)==null?void 0:T.focus({preventScroll:!0})})}),y=J(()=>{if(!!e.labelId)return[e.labelId,a].join(\" \")},[e.labelId,a]),C=I(()=>({open:e.comboboxState===0,disabled:e.disabled,value:e.value}),[e]),g=l,O={ref:r,id:a,type:Te(l,e.buttonRef),tabIndex:-1,\"aria-haspopup\":!0,\"aria-controls\":(c=e.optionsRef.current)==null?void 0:c.id,\"aria-expanded\":e.disabled?void 0:e.comboboxState===0,\"aria-labelledby\":y,disabled:e.disabled,onClick:s,onKeyDown:o};return w({ourProps:O,theirProps:g,slot:C,defaultTag:Ge,name:\"Combobox.Button\"})}),je=\"label\",He=k(function(l,n){let e=U(\"Combobox.Label\"),i=`headlessui-combobox-label-${j()}`,r=K(\"Combobox.Label\"),a=H(e.labelRef,n);h(()=>r.registerLabel(i),[i]);let m=x(()=>{var C;return(C=e.inputRef.current)==null?void 0:C.focus({preventScroll:!0})}),o=I(()=>({open:e.comboboxState===0,disabled:e.disabled}),[e]);return w({ourProps:{ref:a,id:i,onClick:m},theirProps:l,slot:o,defaultTag:je,name:\"Combobox.Label\"})}),Ke=\"ul\",We=ne.RenderStrategy|ne.Static,Xe=k(function(l,n){var O;let{hold:e=!1,...i}=l,r=U(\"Combobox.Options\"),a=H(r.optionsRef,n),m=`headlessui-combobox-options-${j()}`,o=Ae(),s=(()=>o!==null?o===q.Open:r.comboboxState===0)();h(()=>{var c;r.optionsPropsRef.current.static=(c=l.static)!=null?c:!1},[r.optionsPropsRef,l.static]),h(()=>{r.optionsPropsRef.current.hold=e},[r.optionsPropsRef,e]),xe({container:r.optionsRef.current,enabled:r.comboboxState===0,accept(c){return c.getAttribute(\"role\")===\"option\"?NodeFilter.FILTER_REJECT:c.hasAttribute(\"role\")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute(\"role\",\"none\")}});let y=J(()=>{var c,b;return(b=r.labelId)!=null?b:(c=r.buttonRef.current)==null?void 0:c.id},[r.labelId,r.buttonRef.current]),C=I(()=>({open:r.comboboxState===0}),[r]),g={\"aria-activedescendant\":r.activeOptionIndex===null||(O=r.options[r.activeOptionIndex])==null?void 0:O.id,\"aria-labelledby\":y,role:\"listbox\",id:m,ref:a};return w({ourProps:g,theirProps:i,slot:C,defaultTag:Ke,features:We,visible:s,name:\"Combobox.Options\"})}),$e=\"li\",Je=k(function(l,n){var P,F;let{disabled:e=!1,value:i,...r}=l,a=U(\"Combobox.Option\"),m=K(\"Combobox.Option\"),o=`headlessui-combobox-option-${j()}`,s=a.activeOptionIndex!==null?a.options[a.activeOptionIndex].id===o:!1,y=a.isSelected(i),C=D(null),g=fe({disabled:e,value:i,domRef:C,textValue:(F=(P=C.current)==null?void 0:P.textContent)==null?void 0:F.toLowerCase()}),O=H(n,C),c=x(()=>m.selectOption(o));h(()=>m.registerOption(o,g),[g,o]);let b=D(!a.__demoMode);h(()=>{if(!a.__demoMode)return;let u=te();return u.requestAnimationFrame(()=>{b.current=!0}),u.dispose},[]),h(()=>{if(a.comboboxState!==0||!s||!b.current||a.activationTrigger===0)return;let u=te();return u.requestAnimationFrame(()=>{var E,p;(p=(E=C.current)==null?void 0:E.scrollIntoView)==null||p.call(E,{block:\"nearest\"})}),u.dispose},[C,s,a.comboboxState,a.activationTrigger,a.activeOptionIndex]);let T=x(u=>{if(e)return u.preventDefault();c(),a.mode===0&&m.closeCombobox()}),G=x(()=>{if(e)return m.goToOption(R.Nothing);m.goToOption(R.Specific,o)}),V=x(()=>{e||s||m.goToOption(R.Specific,o,0)}),M=x(()=>{e||!s||a.optionsPropsRef.current.hold||m.goToOption(R.Nothing)}),N=I(()=>({active:s,selected:y,disabled:e}),[s,y,e]);return w({ourProps:{id:o,ref:O,role:\"option\",tabIndex:e===!0?void 0:-1,\"aria-disabled\":e===!0?!0:void 0,\"aria-selected\":y,disabled:void 0,onClick:T,onFocus:G,onPointerMove:V,onMouseMove:V,onPointerLeave:M,onMouseLeave:M},theirProps:r,slot:N,defaultTag:$e,name:\"Combobox.Option\"})}),Lo=Object.assign(we,{Input:Ue,Button:Ne,Label:He,Options:Xe,Option:Je});export{Lo as Combobox};\n","start":1670465467580,"end":1670465467624},{"name":"vite:react-babel","result":"import X, { Fragment as se, createContext as z, createRef as be, useCallback as de, useContext as ee, useMemo as I, useReducer as ce, useRef as D } from \"react\";\nimport { useComputed as J } from '../../hooks/use-computed.js';\nimport { useDisposables as oe } from '../../hooks/use-disposables.js';\nimport { useEvent as x } from '../../hooks/use-event.js';\nimport { useId as j } from '../../hooks/use-id.js';\nimport { useIsoMorphicEffect as h } from '../../hooks/use-iso-morphic-effect.js';\nimport { useLatestValue as fe } from '../../hooks/use-latest-value.js';\nimport { useOutsideClick as me } from '../../hooks/use-outside-click.js';\nimport { useResolveButtonType as Te } from '../../hooks/use-resolve-button-type.js';\nimport { useSyncRefs as H } from '../../hooks/use-sync-refs.js';\nimport { useTreeWalker as xe } from '../../hooks/use-tree-walker.js';\nimport { calculateActiveIndex as ge, Focus as R } from '../../utils/calculate-active-index.js';\nimport { disposables as te } from '../../utils/disposables.js';\nimport { forwardRefWithAs as k, render as w, compact as Oe, Features as ne } from '../../utils/render.js';\nimport { isDisabledReactIssue7711 as Ce } from '../../utils/bugs.js';\nimport { match as B } from '../../utils/match.js';\nimport { objectToFormEntries as Re } from '../../utils/form.js';\nimport { sortByDomNode as ve } from '../../utils/focus-management.js';\nimport { Hidden as ye, Features as Se } from '../../internal/hidden.js';\nimport { useOpenClosed as Ae, State as q, OpenClosedProvider as Pe } from '../../internal/open-closed.js';\nimport { Keys as v } from '../keyboard.js';\nimport { useControllable as Ee } from '../../hooks/use-controllable.js';\nimport { useWatch as Ie } from '../../hooks/use-watch.js';\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar De = (n => (n[n.Open = 0] = \"Open\", n[n.Closed = 1] = \"Closed\", n))(De || {}),\n  Le = (n => (n[n.Single = 0] = \"Single\", n[n.Multi = 1] = \"Multi\", n))(Le || {}),\n  he = (n => (n[n.Pointer = 0] = \"Pointer\", n[n.Other = 1] = \"Other\", n))(he || {}),\n  Ve = (a => (a[a.OpenCombobox = 0] = \"OpenCombobox\", a[a.CloseCombobox = 1] = \"CloseCombobox\", a[a.GoToOption = 2] = \"GoToOption\", a[a.RegisterOption = 3] = \"RegisterOption\", a[a.UnregisterOption = 4] = \"UnregisterOption\", a[a.RegisterLabel = 5] = \"RegisterLabel\", a))(Ve || {});\nfunction Q(t, l = n => n) {\n  let n = t.activeOptionIndex !== null ? t.options[t.activeOptionIndex] : null,\n    e = ve(l(t.options.slice()), r => r.dataRef.current.domRef.current),\n    i = n ? e.indexOf(n) : null;\n  return i === -1 && (i = null), {\n    options: e,\n    activeOptionIndex: i\n  };\n}\nlet Me = {\n    [1](t) {\n      return t.dataRef.current.disabled || t.comboboxState === 1 ? t : {\n        ...t,\n        activeOptionIndex: null,\n        comboboxState: 1\n      };\n    },\n    [0](t) {\n      if (t.dataRef.current.disabled || t.comboboxState === 0) return t;\n      let l = t.activeOptionIndex,\n        {\n          isSelected: n\n        } = t.dataRef.current,\n        e = t.options.findIndex(i => n(i.dataRef.current.value));\n      return e !== -1 && (l = e), {\n        ...t,\n        comboboxState: 0,\n        activeOptionIndex: l\n      };\n    },\n    [2](t, l) {\n      var i;\n      if (t.dataRef.current.disabled || t.dataRef.current.optionsRef.current && !t.dataRef.current.optionsPropsRef.current.static && t.comboboxState === 1) return t;\n      let n = Q(t);\n      if (n.activeOptionIndex === null) {\n        let r = n.options.findIndex(a => !a.dataRef.current.disabled);\n        r !== -1 && (n.activeOptionIndex = r);\n      }\n      let e = ge(l, {\n        resolveItems: () => n.options,\n        resolveActiveIndex: () => n.activeOptionIndex,\n        resolveId: r => r.id,\n        resolveDisabled: r => r.dataRef.current.disabled\n      });\n      return {\n        ...t,\n        ...n,\n        activeOptionIndex: e,\n        activationTrigger: (i = l.trigger) != null ? i : 1\n      };\n    },\n    [3]: (t, l) => {\n      let n = {\n          id: l.id,\n          dataRef: l.dataRef\n        },\n        e = Q(t, r => [...r, n]);\n      t.activeOptionIndex === null && t.dataRef.current.isSelected(l.dataRef.current.value) && (e.activeOptionIndex = e.options.indexOf(n));\n      let i = {\n        ...t,\n        ...e,\n        activationTrigger: 1\n      };\n      return t.dataRef.current.__demoMode && t.dataRef.current.value === void 0 && (i.activeOptionIndex = 0), i;\n    },\n    [4]: (t, l) => {\n      let n = Q(t, e => {\n        let i = e.findIndex(r => r.id === l.id);\n        return i !== -1 && e.splice(i, 1), e;\n      });\n      return {\n        ...t,\n        ...n,\n        activationTrigger: 1\n      };\n    },\n    [5]: (t, l) => ({\n      ...t,\n      labelId: l.id\n    })\n  },\n  Y = z(null);\nY.displayName = \"ComboboxActionsContext\";\nfunction K(t) {\n  let l = ee(Y);\n  if (l === null) {\n    let n = new Error(`<${t} /> is missing a parent <Combobox /> component.`);\n    throw Error.captureStackTrace && Error.captureStackTrace(n, K), n;\n  }\n  return l;\n}\nlet Z = z(null);\nZ.displayName = \"ComboboxDataContext\";\nfunction U(t) {\n  let l = ee(Z);\n  if (l === null) {\n    let n = new Error(`<${t} /> is missing a parent <Combobox /> component.`);\n    throw Error.captureStackTrace && Error.captureStackTrace(n, U), n;\n  }\n  return l;\n}\nfunction Fe(t, l) {\n  return B(l.type, Me, t, l);\n}\nlet _e = se;\nfunction ke(t, l) {\n  let {\n      value: n,\n      defaultValue: e,\n      onChange: i,\n      name: r,\n      by: a = (d, f) => d === f,\n      disabled: m = !1,\n      __demoMode: o = !1,\n      nullable: s = !1,\n      multiple: y = !1,\n      ...C\n    } = t,\n    [g, O] = Ee(n, i, e),\n    [c, b] = ce(Fe, {\n      dataRef: be(),\n      comboboxState: o ? 0 : 1,\n      options: [],\n      activeOptionIndex: null,\n      activationTrigger: 1,\n      labelId: null\n    }),\n    T = D(!1),\n    G = D({\n      static: !1,\n      hold: !1\n    }),\n    V = D(null),\n    M = D(null),\n    N = D(null),\n    W = D(null),\n    P = x(typeof a == \"string\" ? (d, f) => {\n      let A = a;\n      return (d == null ? void 0 : d[A]) === (f == null ? void 0 : f[A]);\n    } : a),\n    F = de(d => B(u.mode, {\n      [1]: () => g.some(f => P(f, d)),\n      [0]: () => P(g, d)\n    }), [g]),\n    u = I(() => ({\n      ...c,\n      optionsPropsRef: G,\n      labelRef: V,\n      inputRef: M,\n      buttonRef: N,\n      optionsRef: W,\n      value: g,\n      disabled: m,\n      mode: y ? 1 : 0,\n      get activeOptionIndex() {\n        if (T.current && c.activeOptionIndex === null && c.options.length > 0) {\n          let d = c.options.findIndex(f => !f.dataRef.current.disabled);\n          if (d !== -1) return d;\n        }\n        return c.activeOptionIndex;\n      },\n      compare: P,\n      isSelected: F,\n      nullable: s,\n      __demoMode: o\n    }), [g, m, y, s, o, c]);\n  h(() => {\n    c.dataRef.current = u;\n  }, [u]), me([u.buttonRef, u.inputRef, u.optionsRef], () => b({\n    type: 1\n  }), u.comboboxState === 0);\n  let E = I(() => ({\n      open: u.comboboxState === 0,\n      disabled: m,\n      activeIndex: u.activeOptionIndex,\n      activeOption: u.activeOptionIndex === null ? null : u.options[u.activeOptionIndex].dataRef.current.value,\n      value: g\n    }), [u, m, g]),\n    p = x(d => {\n      let f = u.options.find(A => A.id === d);\n      !f || $(f.dataRef.current.value);\n    }),\n    S = x(() => {\n      if (u.activeOptionIndex !== null) {\n        let {\n          dataRef: d,\n          id: f\n        } = u.options[u.activeOptionIndex];\n        $(d.current.value), b({\n          type: 2,\n          focus: R.Specific,\n          id: f\n        });\n      }\n    }),\n    L = x(() => {\n      b({\n        type: 0\n      }), T.current = !0;\n    }),\n    _ = x(() => {\n      b({\n        type: 1\n      }), T.current = !1;\n    }),\n    re = x((d, f, A) => (T.current = !1, d === R.Specific ? b({\n      type: 2,\n      focus: R.Specific,\n      id: f,\n      trigger: A\n    }) : b({\n      type: 2,\n      focus: d,\n      trigger: A\n    }))),\n    ae = x((d, f) => (b({\n      type: 3,\n      id: d,\n      dataRef: f\n    }), () => b({\n      type: 4,\n      id: d\n    }))),\n    le = x(d => (b({\n      type: 5,\n      id: d\n    }), () => b({\n      type: 5,\n      id: null\n    }))),\n    $ = x(d => B(u.mode, {\n      [0]() {\n        return O == null ? void 0 : O(d);\n      },\n      [1]() {\n        let f = u.value.slice(),\n          A = f.findIndex(pe => P(pe, d));\n        return A === -1 ? f.push(d) : f.splice(A, 1), O == null ? void 0 : O(f);\n      }\n    })),\n    ie = I(() => ({\n      onChange: $,\n      registerOption: ae,\n      registerLabel: le,\n      goToOption: re,\n      closeCombobox: _,\n      openCombobox: L,\n      selectActiveOption: S,\n      selectOption: p\n    }), []),\n    ue = l === null ? {} : {\n      ref: l\n    };\n  return /*#__PURE__*/_jsx(Y.Provider, {\n    value: ie,\n    children: /*#__PURE__*/_jsx(Z.Provider, {\n      value: u,\n      children: /*#__PURE__*/_jsxs(Pe, {\n        value: B(u.comboboxState, {\n          [0]: q.Open,\n          [1]: q.Closed\n        }),\n        children: [r != null && g != null && Re({\n          [r]: g\n        }).map(([d, f]) => X.createElement(ye, {\n          features: Se.Hidden,\n          ...Oe({\n            key: d,\n            as: \"input\",\n            type: \"hidden\",\n            hidden: !0,\n            readOnly: !0,\n            name: d,\n            value: f\n          })\n        })), w({\n          ourProps: ue,\n          theirProps: C,\n          slot: E,\n          defaultTag: _e,\n          name: \"Combobox\"\n        })]\n      })\n    })\n  });\n}\nlet we = k(ke),\n  Be = \"input\",\n  Ue = k(function (l, n) {\n    var u, E;\n    let {\n        value: e,\n        onChange: i,\n        displayValue: r,\n        type: a = \"text\",\n        ...m\n      } = l,\n      o = U(\"Combobox.Input\"),\n      s = K(\"Combobox.Input\"),\n      y = H(o.inputRef, n),\n      C = `headlessui-combobox-input-${j()}`,\n      g = oe(),\n      O = !1;\n    function c(p) {\n      var _;\n      let S = o.inputRef.current;\n      if (!S || S.value === p) return;\n      let L = Object.getOwnPropertyDescriptor(S.constructor.prototype, \"value\");\n      (_ = L == null ? void 0 : L.set) == null || _.call(S, p), O = !0, S.dispatchEvent(new Event(\"input\", {\n        bubbles: !0\n      })), S.value = p, O = !1;\n    }\n    let b = I(() => {\n      var p;\n      return typeof r == \"function\" ? (p = r(o.value)) != null ? p : \"\" : typeof o.value == \"string\" ? o.value : \"\";\n    }, [o.value]);\n    Ie(([p, S], [L, _]) => {\n      !o.inputRef.current || (_ === 0 && S === 1 ? c(p) : p !== L && (o.inputRef.current.value = p));\n    }, [b, o.comboboxState]);\n    let T = D(!1),\n      G = x(() => {\n        T.current = !0;\n      }),\n      V = x(() => {\n        setTimeout(() => {\n          T.current = !1;\n        });\n      }),\n      M = x(p => {\n        switch (p.key) {\n          case v.Backspace:\n          case v.Delete:\n            if (o.mode !== 0 || !o.nullable) return;\n            let S = p.currentTarget;\n            g.requestAnimationFrame(() => {\n              S.value === \"\" && (s.onChange(null), o.optionsRef.current && (o.optionsRef.current.scrollTop = 0), s.goToOption(R.Nothing));\n            });\n            break;\n          case v.Enter:\n            if (o.comboboxState !== 0 || T.current) return;\n            if (p.preventDefault(), p.stopPropagation(), o.activeOptionIndex === null) {\n              s.closeCombobox();\n              return;\n            }\n            s.selectActiveOption(), o.mode === 0 && s.closeCombobox();\n            break;\n          case v.ArrowDown:\n            return p.preventDefault(), p.stopPropagation(), B(o.comboboxState, {\n              [0]: () => {\n                s.goToOption(R.Next);\n              },\n              [1]: () => {\n                s.openCombobox();\n              }\n            });\n          case v.ArrowUp:\n            return p.preventDefault(), p.stopPropagation(), B(o.comboboxState, {\n              [0]: () => {\n                s.goToOption(R.Previous);\n              },\n              [1]: () => {\n                s.openCombobox(), g.nextFrame(() => {\n                  o.value || s.goToOption(R.Last);\n                });\n              }\n            });\n          case v.Home:\n          case v.PageUp:\n            return p.preventDefault(), p.stopPropagation(), s.goToOption(R.First);\n          case v.End:\n          case v.PageDown:\n            return p.preventDefault(), p.stopPropagation(), s.goToOption(R.Last);\n          case v.Escape:\n            return o.comboboxState !== 0 ? void 0 : (p.preventDefault(), o.optionsRef.current && !o.optionsPropsRef.current.static && p.stopPropagation(), s.closeCombobox());\n          case v.Tab:\n            if (o.comboboxState !== 0) return;\n            o.mode === 0 && s.selectActiveOption(), s.closeCombobox();\n            break;\n        }\n      }),\n      N = x(p => {\n        O || s.openCombobox(), i == null || i(p);\n      }),\n      W = J(() => {\n        if (!!o.labelId) return [o.labelId].join(\" \");\n      }, [o.labelId]),\n      P = I(() => ({\n        open: o.comboboxState === 0,\n        disabled: o.disabled\n      }), [o]),\n      F = {\n        ref: y,\n        id: C,\n        role: \"combobox\",\n        type: a,\n        \"aria-controls\": (u = o.optionsRef.current) == null ? void 0 : u.id,\n        \"aria-expanded\": o.disabled ? void 0 : o.comboboxState === 0,\n        \"aria-activedescendant\": o.activeOptionIndex === null || (E = o.options[o.activeOptionIndex]) == null ? void 0 : E.id,\n        \"aria-multiselectable\": o.mode === 1 ? !0 : void 0,\n        \"aria-labelledby\": W,\n        disabled: o.disabled,\n        onCompositionStart: G,\n        onCompositionEnd: V,\n        onKeyDown: M,\n        onChange: N\n      };\n    return w({\n      ourProps: F,\n      theirProps: m,\n      slot: P,\n      defaultTag: Be,\n      name: \"Combobox.Input\"\n    });\n  }),\n  Ge = \"button\",\n  Ne = k(function (l, n) {\n    var c;\n    let e = U(\"Combobox.Button\"),\n      i = K(\"Combobox.Button\"),\n      r = H(e.buttonRef, n),\n      a = `headlessui-combobox-button-${j()}`,\n      m = oe(),\n      o = x(b => {\n        switch (b.key) {\n          case v.ArrowDown:\n            return b.preventDefault(), b.stopPropagation(), e.comboboxState === 1 && i.openCombobox(), m.nextFrame(() => {\n              var T;\n              return (T = e.inputRef.current) == null ? void 0 : T.focus({\n                preventScroll: !0\n              });\n            });\n          case v.ArrowUp:\n            return b.preventDefault(), b.stopPropagation(), e.comboboxState === 1 && (i.openCombobox(), m.nextFrame(() => {\n              e.value || i.goToOption(R.Last);\n            })), m.nextFrame(() => {\n              var T;\n              return (T = e.inputRef.current) == null ? void 0 : T.focus({\n                preventScroll: !0\n              });\n            });\n          case v.Escape:\n            return e.comboboxState !== 0 ? void 0 : (b.preventDefault(), e.optionsRef.current && !e.optionsPropsRef.current.static && b.stopPropagation(), i.closeCombobox(), m.nextFrame(() => {\n              var T;\n              return (T = e.inputRef.current) == null ? void 0 : T.focus({\n                preventScroll: !0\n              });\n            }));\n          default:\n            return;\n        }\n      }),\n      s = x(b => {\n        if (Ce(b.currentTarget)) return b.preventDefault();\n        e.comboboxState === 0 ? i.closeCombobox() : (b.preventDefault(), i.openCombobox()), m.nextFrame(() => {\n          var T;\n          return (T = e.inputRef.current) == null ? void 0 : T.focus({\n            preventScroll: !0\n          });\n        });\n      }),\n      y = J(() => {\n        if (!!e.labelId) return [e.labelId, a].join(\" \");\n      }, [e.labelId, a]),\n      C = I(() => ({\n        open: e.comboboxState === 0,\n        disabled: e.disabled,\n        value: e.value\n      }), [e]),\n      g = l,\n      O = {\n        ref: r,\n        id: a,\n        type: Te(l, e.buttonRef),\n        tabIndex: -1,\n        \"aria-haspopup\": !0,\n        \"aria-controls\": (c = e.optionsRef.current) == null ? void 0 : c.id,\n        \"aria-expanded\": e.disabled ? void 0 : e.comboboxState === 0,\n        \"aria-labelledby\": y,\n        disabled: e.disabled,\n        onClick: s,\n        onKeyDown: o\n      };\n    return w({\n      ourProps: O,\n      theirProps: g,\n      slot: C,\n      defaultTag: Ge,\n      name: \"Combobox.Button\"\n    });\n  }),\n  je = \"label\",\n  He = k(function (l, n) {\n    let e = U(\"Combobox.Label\"),\n      i = `headlessui-combobox-label-${j()}`,\n      r = K(\"Combobox.Label\"),\n      a = H(e.labelRef, n);\n    h(() => r.registerLabel(i), [i]);\n    let m = x(() => {\n        var C;\n        return (C = e.inputRef.current) == null ? void 0 : C.focus({\n          preventScroll: !0\n        });\n      }),\n      o = I(() => ({\n        open: e.comboboxState === 0,\n        disabled: e.disabled\n      }), [e]);\n    return w({\n      ourProps: {\n        ref: a,\n        id: i,\n        onClick: m\n      },\n      theirProps: l,\n      slot: o,\n      defaultTag: je,\n      name: \"Combobox.Label\"\n    });\n  }),\n  Ke = \"ul\",\n  We = ne.RenderStrategy | ne.Static,\n  Xe = k(function (l, n) {\n    var O;\n    let {\n        hold: e = !1,\n        ...i\n      } = l,\n      r = U(\"Combobox.Options\"),\n      a = H(r.optionsRef, n),\n      m = `headlessui-combobox-options-${j()}`,\n      o = Ae(),\n      s = (() => o !== null ? o === q.Open : r.comboboxState === 0)();\n    h(() => {\n      var c;\n      r.optionsPropsRef.current.static = (c = l.static) != null ? c : !1;\n    }, [r.optionsPropsRef, l.static]), h(() => {\n      r.optionsPropsRef.current.hold = e;\n    }, [r.optionsPropsRef, e]), xe({\n      container: r.optionsRef.current,\n      enabled: r.comboboxState === 0,\n      accept(c) {\n        return c.getAttribute(\"role\") === \"option\" ? NodeFilter.FILTER_REJECT : c.hasAttribute(\"role\") ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;\n      },\n      walk(c) {\n        c.setAttribute(\"role\", \"none\");\n      }\n    });\n    let y = J(() => {\n        var c, b;\n        return (b = r.labelId) != null ? b : (c = r.buttonRef.current) == null ? void 0 : c.id;\n      }, [r.labelId, r.buttonRef.current]),\n      C = I(() => ({\n        open: r.comboboxState === 0\n      }), [r]),\n      g = {\n        \"aria-activedescendant\": r.activeOptionIndex === null || (O = r.options[r.activeOptionIndex]) == null ? void 0 : O.id,\n        \"aria-labelledby\": y,\n        role: \"listbox\",\n        id: m,\n        ref: a\n      };\n    return w({\n      ourProps: g,\n      theirProps: i,\n      slot: C,\n      defaultTag: Ke,\n      features: We,\n      visible: s,\n      name: \"Combobox.Options\"\n    });\n  }),\n  $e = \"li\",\n  Je = k(function (l, n) {\n    var P, F;\n    let {\n        disabled: e = !1,\n        value: i,\n        ...r\n      } = l,\n      a = U(\"Combobox.Option\"),\n      m = K(\"Combobox.Option\"),\n      o = `headlessui-combobox-option-${j()}`,\n      s = a.activeOptionIndex !== null ? a.options[a.activeOptionIndex].id === o : !1,\n      y = a.isSelected(i),\n      C = D(null),\n      g = fe({\n        disabled: e,\n        value: i,\n        domRef: C,\n        textValue: (F = (P = C.current) == null ? void 0 : P.textContent) == null ? void 0 : F.toLowerCase()\n      }),\n      O = H(n, C),\n      c = x(() => m.selectOption(o));\n    h(() => m.registerOption(o, g), [g, o]);\n    let b = D(!a.__demoMode);\n    h(() => {\n      if (!a.__demoMode) return;\n      let u = te();\n      return u.requestAnimationFrame(() => {\n        b.current = !0;\n      }), u.dispose;\n    }, []), h(() => {\n      if (a.comboboxState !== 0 || !s || !b.current || a.activationTrigger === 0) return;\n      let u = te();\n      return u.requestAnimationFrame(() => {\n        var E, p;\n        (p = (E = C.current) == null ? void 0 : E.scrollIntoView) == null || p.call(E, {\n          block: \"nearest\"\n        });\n      }), u.dispose;\n    }, [C, s, a.comboboxState, a.activationTrigger, a.activeOptionIndex]);\n    let T = x(u => {\n        if (e) return u.preventDefault();\n        c(), a.mode === 0 && m.closeCombobox();\n      }),\n      G = x(() => {\n        if (e) return m.goToOption(R.Nothing);\n        m.goToOption(R.Specific, o);\n      }),\n      V = x(() => {\n        e || s || m.goToOption(R.Specific, o, 0);\n      }),\n      M = x(() => {\n        e || !s || a.optionsPropsRef.current.hold || m.goToOption(R.Nothing);\n      }),\n      N = I(() => ({\n        active: s,\n        selected: y,\n        disabled: e\n      }), [s, y, e]);\n    return w({\n      ourProps: {\n        id: o,\n        ref: O,\n        role: \"option\",\n        tabIndex: e === !0 ? void 0 : -1,\n        \"aria-disabled\": e === !0 ? !0 : void 0,\n        \"aria-selected\": y,\n        disabled: void 0,\n        onClick: T,\n        onFocus: G,\n        onPointerMove: V,\n        onMouseMove: V,\n        onPointerLeave: M,\n        onMouseLeave: M\n      },\n      theirProps: r,\n      slot: N,\n      defaultTag: $e,\n      name: \"Combobox.Option\"\n    });\n  }),\n  Lo = Object.assign(we, {\n    Input: Ue,\n    Button: Ne,\n    Label: He,\n    Options: Xe,\n    Option: Je\n  });\nexport { Lo as Combobox };","start":1670465467624,"end":1670465467682,"order":"pre"}]}
