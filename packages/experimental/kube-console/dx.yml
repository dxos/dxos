version: 1

package:
  modules:
    - name: console
      type: dxos:type/app
      displayName: KUBE Console
      description: KUBE Admin Console.
      build:
        command: pnpm -w nx bundle kube-console
        env:
          VITE_PWA: true
      # TODO(wittjosiah): Currently breaking publish to dev kube.
      # tunnel: true

    - name: kube-console-web
      type: dxos:type/app
      displayName: kube-console-web
      description: kube-console Demo.
      build:
        command: pnpm -w nx bundle kube-console --outputPath packages/experimental/kube-console/out/kube-console-web
        env:
          VITE_DEV: true

runtime:
  client:
    storage:
      persistent: true

  # TODO(burdon): Are these provided by KUBE?
  services:
    signal:
      server: wss://kube.dxos.org/.well-known/dx/signal
    ice:
      - urls: turn:kube.dxos.org:3478
        username: dxos
        credential: dxos
    ipfs:
      server: https://dev.kube.dxos.org/ipfs/api
      gateway: https://dev.kube.dxos.org/ipfs/gateway
