##
## Test:
## curl -s -X POST -H "Content-Type: application/json" http://localhost:7100/dev/hello | jq
##

functions:
  - id: 'dxos.org/function/calendar'
    name: 'calendar'
    handler: 'calendar'
    description: 'Calendar Sync.'

  - id: 'dxos.org/function/chat'
    name: 'chat'
    handler: 'chat'
    description: 'GPT Chat.'

  - id: 'dxos.org/function/chess'
    name: 'chess'
    handler: 'chess'
    description: 'Chess.'

  - id: 'dxos.org/function/email'
    name: 'email'
    handler: 'email'
    description: 'Email Sync.'

  - id: 'dxos.org/function/email-extractor'
    name: 'email-extractor'
    handler: 'email-extractor'
    description: 'Email Extractor.'

  - id: 'dxos.org/function/embedding'
    name: 'embedding'
    handler: 'embedding'
    description: 'Text embedding.'

  - id: 'dxos.org/function/hello'
    name: 'hello'
    handler: 'hello'
    description: 'Hello world.'

  - id: 'dxos.org/function/github'
    name: 'github'
    handler: 'github'
    description: 'Github Sync.'

  - id: 'dxos.org/function/suggest-chess-move'
    name: 'suggest-chess-move'
    handler: 'suggest-chess-move'
    description: 'Listens to suggest next move signals, uses llm to generate response signals'

  - id: 'dxos.org/function/lookup-next-term'
    name: 'lookup-next-term'
    handler: 'lookup-next-term'
    description: 'Triggers a /lookup prompt for a document highlight with no responses'

  - id: 'dxos.org/function/extract-terms'
    name: 'extract-terms'
    handler: 'extract-terms'
    description: 'Rapid Automatic Keyword Extraction for document contents'

triggers:
#  - function: 'dxos.org/function/calendar'
#    schedule: '*/30 * * * * *'
#    subscriptions:
#     - type: 'braneframe.Calendar'

  - function: 'dxos.org/function/chat'
    subscriptions:
      - type: 'braneframe.Message'
    signals:
      - kind: 'suggestion'
        dataType: 'trigger-prompt'

  # - function: 'dxos.org/function/email'
  #   schedule: '*/30 * * * * *'
  #   subscriptions:
  #    - type: 'braneframe.Mailbox'

#  - function: 'dxos.org/function/email-extractor'
#    subscriptions:
#      - type: 'braneframe.Message'
#        delay: 5
#        props:
#          type: 'email'

  - function: 'dxos.org/function/chess'
    subscriptions:
      - type: 'dxos.experimental.chess.Game'

  - function: 'dxos.org/function/embedding'
    subscriptions:
      - type: 'braneframe.Document'
        deep: true
        delay: 5
      - type: 'braneframe.File'

#  - function: 'dxos.org/function/suggest-chess-move'
#    signals:
#      - kind: 'suggestion'
#        dataType: 'suggest-next-chess-move'

  - function: 'dxos.org/function/extract-terms'
    signals:
      - kind: 'suggestion'
        dataType: 'dxos.signal.extract-terms'

  - function: 'dxos.org/function/lookup-next-term'
    signals:
      - kind: 'suggestion'
        dataType: 'dxos.signal.lookup-next-term'

#  - function: 'dxos.org/function/github'
#    subscriptions:
#      - type: 'example.com/schema/project'
