version: 1

package:
  modules:
    - name: kai
      type: dxos:type/app
      displayName: kai
      description: Kai Demo.
      build:
        command: pnpm -w nx bundle kai
        env:
          KAI_PWA: true
      # TODO(wittjosiah): Currently breaking publish to dev kube.
      # tunnel: true

    - name: kai-web
      type: dxos:type/app
      displayName: kai-web
      description: Kai Demo.
      build:
        command: pnpm -w nx bundle kai --outputPath packages/experimental/kai/out/kai-web
        env:
          KAI_DEV: true

runtime:
  client:
    storage:
      persistent: true

  services:
    signal:
      server: wss://kube.dxos.org/.well-known/dx/signal
    ice:
      - urls: turn:kube.dxos.org:3478
        username: dxos
        credential: dxos
    dxns:
      server: https://kube.dxos.org/.well-known/dx/registry
