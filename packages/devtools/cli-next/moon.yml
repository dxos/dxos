type: application
language: typescript
tags:
  - ts-build
  - ts-test
tasks:
  build:
    deps:
      - prebuild
    options:
      mergeOutputs: replace
    outputs: []
  compile:
    command: bun
    args:
      - ./scripts/build.ts
    options:
      mergeArgs: replace
      mergeOutputs: replace
    inputs:
      - scripts/build.ts
      - bunfig.toml
    outputs:
      - dist/
  dev:
    command: ./dxnext
    deps:
      - ^:compile
    local: true
  prebuild:
    command: bun ./scripts/copy-package-json.ts
    deps:
      - compile
    inputs:
      - scripts/copy-package-json.ts
      - package.json
      - moon.yml
    outputs:
      - dist/package.json
