type: application
language: typescript
tags:
  - ts-build
  - ts-test
tasks:
  build:
    options:
      mergeOutputs: replace
    outputs: []
  compile:
    command: bun
    args:
      - ./scripts/build.ts
    options:
      mergeArgs: replace
      mergeInputs: append
      mergeOutputs: replace
    inputs:
      - scripts/build.ts
      - bunfig.toml
      - package.json
      - LICENSE
    outputs:
      - dist/cli-next/
      - dist/cli-next-darwin-arm64/
      - dist/cli-next-darwin-x64/
      - dist/cli-next-linux-arm64/
      - dist/cli-next-linux-x64/
      - dist/cli-next-win32-x64/
  dev:
    command: ./dxnext
    deps:
      - ^:compile
    local: true
  publish:
    command: bun
    args:
      - ./scripts/publish.ts
    deps:
      - compile
    inputs:
      - scripts/publish.ts
      - dist/**/*
    local: true
