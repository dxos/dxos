type: application
language: typescript
tags:
  - ts-build
  - ts-test
tasks:
  build:
    options:
      mergeOutputs: replace
    outputs: []
  compile:
    command: bun
    args:
      - ./scripts/build.ts
    deps:
      - app-framework:compile
      - plugin-client:compile
      - cli-util:compile
    options:
      mergeArgs: replace
      mergeInputs: append
      mergeOutputs: replace
      timeout: 60
    inputs:
      - scripts/build.ts
      - bunfig.toml
      - package.json
      - LICENSE
    outputs:
      - dist/cli/
      - dist/cli-darwin-arm64/
      - dist/cli-darwin-x64/
      - dist/cli-linux-arm64/
      - dist/cli-linux-x64/
      - dist/cli-win32-x64/
  dev:
    command: ./dxnext
    deps:
      - ^:compile
    local: true
  publish:
    command: bun
    args:
      - ./scripts/publish.ts
    deps:
      - compile
    inputs:
      - scripts/publish.ts
      - dist/**/*
    local: true
