<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2494.7917px" preserveAspectRatio="none" style="width:1495px;height:2494px;background:#000000;" version="1.1" viewBox="0 0 1495 2494" width="1495.8333px" zoomAndPan="magnify"><defs/><g><rect fill="#717D89" height="1057.7637" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="431.7708" y="581.8685"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="431.7708" y1="581.8685" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="442.1875" x2="442.1875" y1="581.8685" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="442.1875" y1="581.8685" y2="581.8685"/><rect fill="#717D89" height="324.0234" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="431.7708" y="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="431.7708" y1="1693.9372" y2="2017.9606"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="442.1875" x2="442.1875" y1="1693.9372" y2="2017.9606"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="442.1875" y1="2017.9606" y2="2017.9606"/><rect fill="#717D89" height="332.3568" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="109.5133"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="109.5133" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="109.5133" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="753.6458" y1="109.5133" y2="109.5133"/><rect fill="#717D89" height="1143.457" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="496.1751" y2="1639.6322"/><rect fill="#717D89" height="332.3568" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="1693.9372" y2="2026.2939"/><rect fill="#717D89" height="307.2184" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="2080.599" y2="2387.8174"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="2080.599" y2="2387.8174"/><rect fill="#717D89" height="246.6634" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="195.2067"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="195.2067" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="195.2067" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1065.1042" y1="195.2067" y2="195.2067"/><rect fill="#717D89" height="1143.457" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="496.1751" y2="1639.6322"/><rect fill="#717D89" height="332.3568" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="1693.9372" y2="2026.2939"/><rect fill="#717D89" height="297.8434" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="2080.599" y2="2378.4424"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="2080.599" y2="2378.4424"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1065.1042" y1="2378.4424" y2="2378.4424"/><rect fill="#4E5D6C" height="344.9951" rx="4.1667" ry="4.1667" style="stroke:#DF691A;stroke-width:1.0416666666666667;" width="1452.6042" x="20.8333" y="1287.3454"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="53.125" x2="53.125" y1="99.0967" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="53.125" x2="53.125" y1="441.8701" y2="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="53.125" x2="53.125" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="53.125" x2="53.125" y1="1639.6322" y2="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="53.125" x2="53.125" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="53.125" x2="53.125" y1="2026.2939" y2="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="53.125" x2="53.125" y1="2080.599" y2="2397.1924"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="436.4583" x2="436.4583" y1="99.0967" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="436.4583" x2="436.4583" y1="441.8701" y2="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="436.4583" x2="436.4583" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="436.4583" x2="436.4583" y1="1639.6322" y2="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="436.4583" x2="436.4583" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="436.4583" x2="436.4583" y1="2026.2939" y2="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="436.4583" x2="436.4583" y1="2080.599" y2="2397.1924"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="747.9167" x2="747.9167" y1="99.0967" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="747.9167" x2="747.9167" y1="441.8701" y2="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="747.9167" x2="747.9167" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="747.9167" x2="747.9167" y1="1639.6322" y2="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="747.9167" x2="747.9167" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="747.9167" x2="747.9167" y1="2026.2939" y2="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="747.9167" x2="747.9167" y1="2080.599" y2="2397.1924"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1059.8958" x2="1059.8958" y1="99.0967" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="1059.8958" x2="1059.8958" y1="441.8701" y2="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1059.8958" x2="1059.8958" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="1059.8958" x2="1059.8958" y1="1639.6322" y2="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1059.8958" x2="1059.8958" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="1059.8958" x2="1059.8958" y1="2026.2939" y2="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1059.8958" x2="1059.8958" y1="2080.599" y2="2397.1924"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1443.2292" x2="1443.2292" y1="99.0967" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="1443.2292" x2="1443.2292" y1="441.8701" y2="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1443.2292" x2="1443.2292" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="1443.2292" x2="1443.2292" y1="1639.6322" y2="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1443.2292" x2="1443.2292" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:1.0,4.0;" x1="1443.2292" x2="1443.2292" y1="2026.2939" y2="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;stroke-dasharray:5.0,5.0;" x1="1443.2292" x2="1443.2292" y1="2080.599" y2="2397.1924"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="28.125" x="36.4583" y="91.2516">Alice</text><ellipse cx="53.6458" cy="19.7917" fill="#DF691A" rx="8.3333" ry="8.3333" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><path d="M53.6458,28.125 L53.6458,56.25 M40.1042,36.4583 L67.1875,36.4583 M53.6458,56.25 L40.1042,71.875 M53.6458,56.25 L67.1875,71.875 " fill="none" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="28.125" x="36.4583" y="2413.444">Alice</text><ellipse cx="53.6458" cy="2430.6641" fill="#DF691A" rx="8.3333" ry="8.3333" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><path d="M53.6458,2438.9974 L53.6458,2467.1224 M40.1042,2447.3307 L67.1875,2447.3307 M53.6458,2467.1224 L40.1042,2482.7474 M53.6458,2467.1224 L67.1875,2482.7474 " fill="none" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="71.875" x="397.9167" y="91.2516">Alice's kube</text><ellipse cx="436.9792" cy="57.2917" fill="#DF691A" rx="12.5" ry="12.5" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><line style="stroke:#E58748;stroke-width:1.0416666666666667;" x1="424.4792" x2="449.4792" y1="71.875" y2="71.875"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="71.875" x="397.9167" y="2413.444">Alice's kube</text><ellipse cx="436.9792" cy="2437.9557" fill="#DF691A" rx="12.5" ry="12.5" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><line style="stroke:#E58748;stroke-width:1.0416666666666667;" x1="424.4792" x2="449.4792" y1="2452.5391" y2="2452.5391"/><path d="M686.4583,63.5417 L810.4167,63.5417 C815.625,63.5417 815.625,81.3192 815.625,81.3192 C815.625,81.3192 815.625,99.0967 810.4167,99.0967 L686.4583,99.0967 C681.25,99.0967 681.25,81.3192 681.25,81.3192 C681.25,81.3192 681.25,63.5417 686.4583,63.5417 " fill="#DF691A" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><path d="M810.4167,63.5417 C805.2083,63.5417 805.2083,81.3192 805.2083,81.3192 C805.2083,99.0967 810.4167,99.0967 810.4167,99.0967 " fill="none" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="103.125" x="691.6667" y="86.0433">Pub/Sub network</text><path d="M686.4583,2396.1507 L810.4167,2396.1507 C815.625,2396.1507 815.625,2413.9282 815.625,2413.9282 C815.625,2413.9282 815.625,2431.7057 810.4167,2431.7057 L686.4583,2431.7057 C681.25,2431.7057 681.25,2413.9282 681.25,2413.9282 C681.25,2413.9282 681.25,2396.1507 686.4583,2396.1507 " fill="#DF691A" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><path d="M810.4167,2396.1507 C805.2083,2396.1507 805.2083,2413.9282 805.2083,2413.9282 C805.2083,2431.7057 810.4167,2431.7057 810.4167,2431.7057 " fill="none" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="103.125" x="691.6667" y="2418.6523">Pub/Sub network</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="66.6667" x="1023.4375" y="91.2516">Bob's kube</text><ellipse cx="1059.8958" cy="57.2917" fill="#DF691A" rx="12.5" ry="12.5" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><line style="stroke:#E58748;stroke-width:1.0416666666666667;" x1="1047.3958" x2="1072.3958" y1="71.875" y2="71.875"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="66.6667" x="1023.4375" y="2413.444">Bob's kube</text><ellipse cx="1059.8958" cy="2437.9557" fill="#DF691A" rx="12.5" ry="12.5" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><line style="stroke:#E58748;stroke-width:1.0416666666666667;" x1="1047.3958" x2="1072.3958" y1="2452.5391" y2="2452.5391"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="22.9167" x="1428.6458" y="91.2516">Bob</text><ellipse cx="1443.2292" cy="19.7917" fill="#DF691A" rx="8.3333" ry="8.3333" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><path d="M1443.2292,28.125 L1443.2292,56.25 M1429.6875,36.4583 L1456.7708,36.4583 M1443.2292,56.25 L1429.6875,71.875 M1443.2292,56.25 L1456.7708,71.875 " fill="none" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="22.9167" x="1428.6458" y="2413.444">Bob</text><ellipse cx="1443.2292" cy="2430.6641" fill="#DF691A" rx="8.3333" ry="8.3333" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><path d="M1443.2292,2438.9974 L1443.2292,2467.1224 M1429.6875,2447.3307 L1456.7708,2447.3307 M1443.2292,2467.1224 L1429.6875,2482.7474 M1443.2292,2467.1224 L1456.7708,2482.7474 " fill="none" style="stroke:#E58748;stroke-width:1.0416666666666667;"/><rect fill="#717D89" height="1057.7637" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="431.7708" y="581.8685"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="431.7708" y1="581.8685" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="442.1875" x2="442.1875" y1="581.8685" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="442.1875" y1="581.8685" y2="581.8685"/><rect fill="#717D89" height="324.0234" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="431.7708" y="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="431.7708" y1="1693.9372" y2="2017.9606"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="442.1875" x2="442.1875" y1="1693.9372" y2="2017.9606"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="431.7708" x2="442.1875" y1="2017.9606" y2="2017.9606"/><rect fill="#717D89" height="332.3568" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="109.5133"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="109.5133" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="109.5133" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="753.6458" y1="109.5133" y2="109.5133"/><rect fill="#717D89" height="1143.457" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="496.1751" y2="1639.6322"/><rect fill="#717D89" height="332.3568" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="1693.9372" y2="2026.2939"/><rect fill="#717D89" height="307.2184" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="743.2292" y="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="743.2292" x2="743.2292" y1="2080.599" y2="2387.8174"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="753.6458" x2="753.6458" y1="2080.599" y2="2387.8174"/><rect fill="#717D89" height="246.6634" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="195.2067"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="195.2067" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="195.2067" y2="441.8701"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1065.1042" y1="195.2067" y2="195.2067"/><rect fill="#717D89" height="1143.457" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="496.1751"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="496.1751" y2="1639.6322"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="496.1751" y2="1639.6322"/><rect fill="#717D89" height="332.3568" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="1693.9372"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="1693.9372" y2="2026.2939"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="1693.9372" y2="2026.2939"/><rect fill="#717D89" height="297.8434" style="stroke:#717D89;stroke-width:1.0416666666666667;" width="10.4167" x="1054.6875" y="2080.599"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1054.6875" y1="2080.599" y2="2378.4424"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1065.1042" x2="1065.1042" y1="2080.599" y2="2378.4424"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="1054.6875" x2="1065.1042" y1="2378.4424" y2="2378.4424"/><rect fill="#4E5D6C" height="3.125" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" width="1473.4375" x="10.4167" y="135.6242"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="135.6242" y2="135.6242"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="138.7492" y2="138.7492"/><rect fill="#4E5D6C" height="33.4717" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:2.0833333333333335;" width="90.625" x="701.8229" y="119.93"/><text fill="#ABB6C2" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="61.4583" x="713.2813" y="141.39">Bob joins</text><polygon fill="#DF691A" points="1076.5625,191.04,1066.1458,195.2067,1076.5625,199.3734,1072.3958,195.2067" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><polygon fill="#DF691A" points="1430.7292,191.04,1441.1458,195.2067,1430.7292,199.3734,1434.8958,195.2067" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1070.3125" x2="1436.9792" y1="195.2067" y2="195.2067"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="1088.0208" y="185.2783">1</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="45.8333" x="1110.9375" y="185.2783">connect</text><polygon fill="#DF691A" points="1076.5625,230.7617,1066.1458,234.9284,1076.5625,239.0951,1072.3958,234.9284" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1070.3125" x2="1442.1875" y1="234.9284" y2="234.9284"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="1088.0208" y="225">2</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="161.4583" x="1110.9375" y="225">ReceiveMessages(key:bob)</text><polygon fill="#DF691A" points="1076.5625,270.4834,1066.1458,274.6501,1076.5625,278.8167,1072.3958,274.6501" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1070.3125" x2="1442.1875" y1="274.6501" y2="274.6501"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="1088.0208" y="264.7217">3</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="148.9583" x="1110.9375" y="264.7217">Join(swarm:s0 peer:bob)</text><polygon fill="#008000" points="765.1042,310.2051,754.6875,314.3717,765.1042,318.5384,760.9375,314.3717" style="stroke:#008000;stroke-width:1.0416666666666667;"/><line style="stroke:#008000;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="314.3717" y2="314.3717"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="776.5625" y="304.4434">4</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="102.0833" x="799.4792" y="304.4434">Sub(topic:bkube)</text><polygon fill="#008000" points="765.1042,349.9268,754.6875,354.0934,765.1042,358.2601,760.9375,354.0934" style="stroke:#008000;stroke-width:1.0416666666666667;"/><line style="stroke:#008000;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="354.0934" y2="354.0934"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="776.5625" y="344.165">5</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="78.125" x="799.4792" y="344.165">Sub(topic:s0)</text><polygon fill="#0000FF" points="765.1042,389.6484,754.6875,393.8151,765.1042,397.9818,760.9375,393.8151" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="393.8151" y2="393.8151"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="776.5625" y="383.8867">6</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="185.4167" x="799.4792" y="383.8867">Pub(topic:s0 lookupFor:bkube)</text><polygon fill="#0000FF" points="765.1042,429.3701,754.6875,433.5368,765.1042,437.7035,760.9375,433.5368" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="433.5368" y2="433.5368"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="776.5625" y="423.6084">7</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="164.5833" x="799.4792" y="423.6084">Pub(topic:p0 newPeer:bob)</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="45.8333" x="725.5208" y="473.7467">later on</text><rect fill="#4E5D6C" height="3.125" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" width="1473.4375" x="10.4167" y="522.286"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="522.286" y2="522.286"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="525.411" y2="525.411"/><rect fill="#4E5D6C" height="33.4717" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:2.0833333333333335;" width="96.875" x="698.6979" y="506.5918"/><text fill="#ABB6C2" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="67.7083" x="710.1563" y="528.0518">Alice joins</text><polygon fill="#DF691A" points="65.1042,577.7018,54.6875,581.8685,65.1042,586.0352,60.9375,581.8685" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><polygon fill="#DF691A" points="419.2708,577.7018,429.6875,581.8685,419.2708,586.0352,423.4375,581.8685" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="58.8542" x2="425.5208" y1="581.8685" y2="581.8685"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="76.5625" y="571.9401">8</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="45.8333" x="99.4792" y="571.9401">connect</text><polygon fill="#DF691A" points="419.2708,617.4235,429.6875,621.5902,419.2708,625.7568,423.4375,621.5902" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="53.6458" x2="425.5208" y1="621.5902" y2="621.5902"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="8.3333" x="66.1458" y="611.6618">9</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="164.5833" x="89.0625" y="611.6618">ReceiveMessages(key:alice)</text><polygon fill="#DF691A" points="419.2708,657.1452,429.6875,661.3118,419.2708,665.4785,423.4375,661.3118" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="53.6458" x2="425.5208" y1="661.3118" y2="661.3118"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="66.1458" y="651.3835">10</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="145.8333" x="97.3958" y="651.3835">Join(swarm:0 peer:alice)</text><polygon fill="#008000" points="730.7292,696.8669,741.1458,701.0335,730.7292,705.2002,734.8958,701.0335" style="stroke:#008000;stroke-width:1.0416666666666667;"/><line style="stroke:#008000;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="701.0335" y2="701.0335"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="691.1051">11</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="101.0417" x="485.9375" y="691.1051">Sub(topic:akube)</text><polygon fill="#008000" points="730.7292,736.5885,741.1458,740.7552,730.7292,744.9219,734.8958,740.7552" style="stroke:#008000;stroke-width:1.0416666666666667;"/><line style="stroke:#008000;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="740.7552" y2="740.7552"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="730.8268">12</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="78.125" x="485.9375" y="730.8268">Sub(topic:s0)</text><polygon fill="#0000FF" points="730.7292,776.3102,741.1458,780.4769,730.7292,784.6436,734.8958,780.4769" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="780.4769" y2="780.4769"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="770.5485">13</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="184.375" x="485.9375" y="770.5485">Pub(topic:s0 lookupFor:akube)</text><polygon fill="#0000FF" points="1042.1875,816.0319,1052.6042,820.1986,1042.1875,824.3652,1046.3542,820.1986" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="753.6458" x2="1048.4375" y1="820.1986" y2="820.1986"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="766.1458" y="810.2702">14</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="184.375" x="797.3958" y="810.2702">Pub(topic:s0 lookupFor:akube)</text><polygon fill="#0000FF" points="765.1042,855.7536,754.6875,859.9202,765.1042,864.0869,760.9375,859.9202" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="859.9202" y2="859.9202"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="776.5625" y="849.9919">15</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="162.5" x="807.8125" y="849.9919">Pub(topic:akube peer:bob)</text><polygon fill="#0000FF" points="453.6458,895.4753,443.2292,899.6419,453.6458,903.8086,449.4792,899.6419" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="447.3958" x2="742.1875" y1="899.6419" y2="899.6419"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="465.1042" y="889.7135">16</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="162.5" x="496.3542" y="889.7135">Pub(topic:akube peer:bob)</text><polygon fill="#DF691A" points="65.1042,935.1969,54.6875,939.3636,65.1042,943.5303,60.9375,939.3636" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="58.8542" x2="430.7292" y1="939.3636" y2="939.3636"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="76.5625" y="929.4352">17</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="248.9583" x="107.8125" y="929.4352">Join(s:s0 p:alice).PeerAvailable(peer:bob)</text><polygon fill="#0000FF" points="730.7292,974.9186,741.1458,979.0853,730.7292,983.252,734.8958,979.0853" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="979.0853" y2="979.0853"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="969.1569">18</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="165.625" x="485.9375" y="969.1569">Pub(topic:s0 newPeer:alice)</text><polygon fill="#0000FF" points="1042.1875,1014.6403,1052.6042,1018.807,1042.1875,1022.9736,1046.3542,1018.807" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="753.6458" x2="1048.4375" y1="1018.807" y2="1018.807"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="766.1458" y="1008.8786">19</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="165.625" x="797.3958" y="1008.8786">Pub(topic:s0 newPeer:alice)</text><polygon fill="#DF691A" points="1430.7292,1054.362,1441.1458,1058.5286,1430.7292,1062.6953,1434.8958,1058.5286" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1065.1042" x2="1436.9792" y1="1058.5286" y2="1058.5286"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="1077.6042" y="1048.6003">20</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="248.9583" x="1108.8542" y="1048.6003">Join(s:s0 p:bob).PeerAvailable(peer:alice)</text><rect fill="#4E5D6C" height="3.125" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" width="1473.4375" x="10.4167" y="1092.9728"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="1092.9728" y2="1092.9728"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="1096.0978" y2="1096.0978"/><rect fill="#4E5D6C" height="33.4717" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:2.0833333333333335;" width="230.2083" x="632.0313" y="1077.2786"/><text fill="#ABB6C2" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="201.0417" x="643.4896" y="1098.7386">Alice messages Bob to connect</text><polygon fill="#DF691A" points="419.2708,1148.3887,429.6875,1152.5553,419.2708,1156.722,423.4375,1152.5553" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="53.6458" x2="425.5208" y1="1152.5553" y2="1152.5553"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="66.1458" y="1142.627">21</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="311.4583" x="97.3958" y="1142.627">SendMessage(sender:alice receiver:bob payload:…)</text><polygon fill="#0000FF" points="730.7292,1188.1104,741.1458,1192.277,730.7292,1196.4437,734.8958,1192.277" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="1192.277" y2="1192.277"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="1182.3486">22</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="234.375" x="485.9375" y="1182.3486">Pub(topic:bob sender:alice payload:…)</text><polygon fill="#0000FF" points="1042.1875,1227.832,1052.6042,1231.9987,1042.1875,1236.1654,1046.3542,1231.9987" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="753.6458" x2="1048.4375" y1="1231.9987" y2="1231.9987"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="766.1458" y="1222.0703">23</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="234.375" x="797.3958" y="1222.0703">Pub(topic:bob sender:alice payload:…)</text><polygon fill="#DF691A" points="1430.7292,1267.5537,1441.1458,1271.7204,1430.7292,1275.887,1434.8958,1271.7204" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1065.1042" x2="1436.9792" y1="1271.7204" y2="1271.7204"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="1077.6042" y="1261.792">24</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="232.2917" x="1108.8542" y="1261.792">Message(from:alice to:bob payload:…)</text><path d="M25,1287.3454 L150,1287.3454 L150,1304.1504 L139.5833,1314.5671 L20.8333,1314.5671 L20.8333,1291.512 A4.1667,4.1667 0 0 1 25,1287.3454 " fill="#4E5D6C" style="stroke:#4E5D6C;stroke-width:1.0416666666666667;"/><rect fill="none" height="344.9951" rx="4.1667" ry="4.1667" style="stroke:#DF691A;stroke-width:1.0416666666666667;" width="1452.6042" x="20.8333" y="1287.3454"/><text fill="#5BC0DE" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="71.875" x="41.6667" y="1305.6803">Roundtrips</text><polygon fill="#DF691A" points="1076.5625,1341.7887,1066.1458,1345.9554,1076.5625,1350.1221,1072.3958,1345.9554" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1070.3125" x2="1442.1875" y1="1345.9554" y2="1345.9554"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="1088.0208" y="1336.027">25</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="311.4583" x="1119.2708" y="1336.027">SendMessage(sender:bob receiver:alice payload:…)</text><polygon fill="#0000FF" points="765.1042,1381.5104,754.6875,1385.6771,765.1042,1389.8438,760.9375,1385.6771" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="1385.6771" y2="1385.6771"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="776.5625" y="1375.7487">26</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="234.375" x="807.8125" y="1375.7487">Pub(topic:alice sender:bob payload:…)</text><polygon fill="#0000FF" points="453.6458,1421.2321,443.2292,1425.3988,453.6458,1429.5654,449.4792,1425.3988" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="447.3958" x2="742.1875" y1="1425.3988" y2="1425.3988"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="465.1042" y="1415.4704">27</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="234.375" x="496.3542" y="1415.4704">Pub(topic:alice sender:bob payload:…)</text><polygon fill="#DF691A" points="65.1042,1460.9538,54.6875,1465.1204,65.1042,1469.2871,60.9375,1465.1204" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="58.8542" x2="430.7292" y1="1465.1204" y2="1465.1204"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="76.5625" y="1455.1921">28</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="232.2917" x="107.8125" y="1455.1921">Message(from:bob to:alice payload:…)</text><polygon fill="#DF691A" points="419.2708,1500.6755,429.6875,1504.8421,419.2708,1509.0088,423.4375,1504.8421" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="53.6458" x2="425.5208" y1="1504.8421" y2="1504.8421"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="66.1458" y="1494.9137">29</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="311.4583" x="97.3958" y="1494.9137">SendMessage(sender:alice receiver:bob payload:…)</text><polygon fill="#0000FF" points="730.7292,1540.3971,741.1458,1544.5638,730.7292,1548.7305,734.8958,1544.5638" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="1544.5638" y2="1544.5638"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="1534.6354">30</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="234.375" x="485.9375" y="1534.6354">Pub(topic:bob sender:alice payload:…)</text><polygon fill="#0000FF" points="1042.1875,1580.1188,1052.6042,1584.2855,1042.1875,1588.4521,1046.3542,1584.2855" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="753.6458" x2="1048.4375" y1="1584.2855" y2="1584.2855"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="766.1458" y="1574.3571">31</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="234.375" x="797.3958" y="1574.3571">Pub(topic:bob sender:alice payload:…)</text><polygon fill="#DF691A" points="1430.7292,1619.8405,1441.1458,1624.0072,1430.7292,1628.1738,1434.8958,1624.0072" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1065.1042" x2="1436.9792" y1="1624.0072" y2="1624.0072"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="1077.6042" y="1614.0788">32</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="232.2917" x="1108.8542" y="1614.0788">Message(from:alice to:bob payload:…)</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="59.375" x="718.75" y="1671.5088">eventually</text><rect fill="#4E5D6C" height="3.125" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" width="1473.4375" x="10.4167" y="1720.048"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="1720.048" y2="1720.048"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="1723.173" y2="1723.173"/><rect fill="#4E5D6C" height="33.4717" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:2.0833333333333335;" width="170.8333" x="661.7188" y="1704.3538"/><text fill="#ABB6C2" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="141.6667" x="673.1771" y="1725.8138">Alice leaves smoothly</text><polygon fill="#DF691A" points="419.2708,1775.4639,429.6875,1779.6305,419.2708,1783.7972,423.4375,1779.6305" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="53.6458" x2="425.5208" y1="1779.6305" y2="1779.6305"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="66.1458" y="1769.7021">33</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="141.6667" x="97.3958" y="1769.7021">Join(s:s0 p:alice).close()</text><polygon fill="#FF0000" points="730.7292,1815.1855,741.1458,1819.3522,730.7292,1823.5189,734.8958,1819.3522" style="stroke:#FF0000;stroke-width:1.0416666666666667;"/><line style="stroke:#FF0000;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="1819.3522" y2="1819.3522"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="1809.4238">34</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="93.75" x="485.9375" y="1809.4238">Unsub(topic:s0)</text><polygon fill="#FF0000" points="730.7292,1854.9072,741.1458,1859.0739,730.7292,1863.2406,734.8958,1859.0739" style="stroke:#FF0000;stroke-width:1.0416666666666667;"/><line style="stroke:#FF0000;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="1859.0739" y2="1859.0739"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="1849.1455">35</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="116.6667" x="485.9375" y="1849.1455">Unsub(topic:akube)</text><polygon fill="#0000FF" points="730.7292,1894.6289,741.1458,1898.7956,730.7292,1902.9622,734.8958,1898.7956" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="442.1875" x2="736.9792" y1="1898.7956" y2="1898.7956"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="454.6875" y="1888.8672">36</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="164.5833" x="485.9375" y="1888.8672">Pub(topic:s0 peerLeft:alice)</text><polygon fill="#0000FF" points="1042.1875,1934.3506,1052.6042,1938.5173,1042.1875,1942.6839,1046.3542,1938.5173" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="753.6458" x2="1048.4375" y1="1938.5173" y2="1938.5173"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="766.1458" y="1928.5889">37</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="164.5833" x="797.3958" y="1928.5889">Pub(topic:s0 peerLeft:alice)</text><polygon fill="#DF691A" points="419.2708,1974.0723,429.6875,1978.2389,419.2708,1982.4056,423.4375,1978.2389" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="53.6458" x2="425.5208" y1="1978.2389" y2="1978.2389"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="66.1458" y="1968.3105">38</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="148.9583" x="97.3958" y="1968.3105">Subscribe(p:alice).close()</text><polygon fill="#FF0000" points="730.7292,2013.7939,741.1458,2017.9606,730.7292,2022.1273,734.8958,2017.9606" style="stroke:#FF0000;stroke-width:1.0416666666666667;"/><line style="stroke:#FF0000;stroke-width:3.125;" x1="436.9792" x2="736.9792" y1="2017.9606" y2="2017.9606"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="449.4792" y="2008.0322">39</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="106.25" x="480.7292" y="2008.0322">Unsub(topic:alice)</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="59.375" x="718.75" y="2058.1706">eventually</text><rect fill="#4E5D6C" height="3.125" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" width="1473.4375" x="10.4167" y="2106.7098"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="2106.7098" y2="2106.7098"/><line style="stroke:#4E5D6C;stroke-width:1.0416666666666667;" x1="10.4167" x2="1483.8542" y1="2109.8348" y2="2109.8348"/><rect fill="#4E5D6C" height="33.4717" rx="4.1667" ry="4.1667" style="stroke:#4E5D6C;stroke-width:2.0833333333333335;" width="188.5417" x="652.8646" y="2091.0156"/><text fill="#ABB6C2" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="159.375" x="664.3229" y="2112.4756">Bob leaves unexpectedly</text><line style="stroke:#DF691A;stroke-width:2.0833333333333335;" x1="1072.3958" x2="1082.8125" y1="2161.084" y2="2171.5007"/><line style="stroke:#DF691A;stroke-width:2.0833333333333335;" x1="1072.3958" x2="1082.8125" y1="2171.5007" y2="2161.084"/><line style="stroke:#DF691A;stroke-width:2.0833333333333335;" x1="1424.4792" x2="1434.8958" y1="2161.084" y2="2171.5007"/><line style="stroke:#DF691A;stroke-width:2.0833333333333335;" x1="1424.4792" x2="1434.8958" y1="2171.5007" y2="2161.084"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1077.6042" x2="1429.6875" y1="2166.2923" y2="2166.2923"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="1088.0208" y="2156.3639">40</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="63.5417" x="1119.2708" y="2156.3639">disconnect</text><line style="stroke:#DF691A;stroke-width:3.125;" x1="1065.1042" x2="1108.8542" y1="2206.014" y2="2206.014"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1108.8542" x2="1108.8542" y1="2206.014" y2="2219.5557"/><line style="stroke:#DF691A;stroke-width:3.125;" x1="1066.1458" x2="1108.8542" y1="2219.5557" y2="2219.5557"/><polygon fill="#DF691A" points="1076.5625,2215.389,1066.1458,2219.5557,1076.5625,2223.7223,1072.3958,2219.5557" style="stroke:#DF691A;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="1077.6042" y="2196.0856">41</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="152.0833" x="1108.8542" y="2196.0856">timeout waiting for return</text><polygon fill="#FF0000" points="765.1042,2255.1107,754.6875,2259.2773,765.1042,2263.444,760.9375,2259.2773" style="stroke:#FF0000;stroke-width:1.0416666666666667;"/><line style="stroke:#FF0000;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="2259.2773" y2="2259.2773"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="776.5625" y="2249.349">42</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="103.125" x="807.8125" y="2249.349">Unsub(topic:bob)</text><polygon fill="#0000FF" points="765.1042,2294.8324,754.6875,2298.999,765.1042,2303.1657,760.9375,2298.999" style="stroke:#0000FF;stroke-width:1.0416666666666667;"/><line style="stroke:#0000FF;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="2298.999" y2="2298.999"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="776.5625" y="2289.0706">43</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="161.4583" x="807.8125" y="2289.0706">Pub(topic:s0 peerLeft:bob)</text><polygon fill="#FF0000" points="765.1042,2334.554,754.6875,2338.7207,765.1042,2342.8874,760.9375,2338.7207" style="stroke:#FF0000;stroke-width:1.0416666666666667;"/><line style="stroke:#FF0000;stroke-width:3.125;" x1="758.8542" x2="1053.6458" y1="2338.7207" y2="2338.7207"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="776.5625" y="2328.7923">44</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="93.75" x="807.8125" y="2328.7923">Unsub(topic:s0)</text><polygon fill="#FF0000" points="765.1042,2374.2757,754.6875,2378.4424,765.1042,2382.609,760.9375,2378.4424" style="stroke:#FF0000;stroke-width:1.0416666666666667;"/><line style="stroke:#FF0000;stroke-width:3.125;" x1="758.8542" x2="1058.8542" y1="2378.4424" y2="2378.4424"/><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="16.6667" x="776.5625" y="2368.514">45</text><text fill="#FFFFFF" font-family="&quot;Verdana&quot;" font-size="12.5" lengthAdjust="spacing" textLength="117.7083" x="807.8125" y="2368.514">Unsub(topic:bkube)</text><!--MD5=[3b8ae50b170b1385769b546867dcce3b]
@startuml
!theme superhero
skinparam backgroundColor black

actor       Alice             as alice
entity      "Alice's kube"    as akube
queue       "Pub/Sub network" as psn
entity      "Bob's kube"      as bkube
actor       Bob               as bob
autonumber

activate psn
== Bob joins ==
bob <-> bkube:        <i>connect</i>
activate bkube
bob -> bkube:         ReceiveMessages(key:bob)
bob -> bkube:         Join(swarm:s0 peer:bob)
bkube -[#green]> psn: Sub(topic:bkube)
bkube -[#green]> psn: Sub(topic:s0)
bkube -[#blue]> psn:  Pub(topic:s0 lookupFor:bkube)
bkube -[#blue]> psn:  Pub(topic:p0 newPeer:bob)
...later on...
== Alice joins ==
alice <-> akube:<i>connect</i>
activate akube
alice -> akube:       ReceiveMessages(key:alice)
alice -> akube:       Join(swarm:0 peer:alice)
akube -[#green]> psn: Sub(topic:akube)
akube -[#green]> psn: Sub(topic:s0)
akube -[#blue]> psn:  Pub(topic:s0 lookupFor:akube)
psn -[#blue]> bkube:  Pub(topic:s0 lookupFor:akube)
bkube -[#blue]> psn:  Pub(topic:akube peer:bob)
psn -[#blue]> akube:  Pub(topic:akube peer:bob)
akube -> alice:       Join(s:s0 p:alice).PeerAvailable(peer:bob)
akube -[#blue]> psn:  Pub(topic:s0 newPeer:alice)
psn   -[#blue]> bkube:Pub(topic:s0 newPeer:alice)
bkube -> bob:         Join(s:s0 p:bob).PeerAvailable(peer:alice)

== Alice messages Bob to connect ==
alice -> akube:       SendMessage(sender:alice receiver:bob payload:…)
akube -[#blue]> psn:  Pub(topic:bob sender:alice payload:…)
psn -[#blue]> bkube:  Pub(topic:bob sender:alice payload:…)
bkube -> bob:         Message(from:alice to:bob payload:…)

group Roundtrips
bob -> bkube:         SendMessage(sender:bob receiver:alice payload:…)
bkube -[#blue]> psn:  Pub(topic:alice sender:bob payload:…)
psn -[#blue]> akube:  Pub(topic:alice sender:bob payload:…)
akube -> alice:       Message(from:bob to:alice payload:…)

alice -> akube:       SendMessage(sender:alice receiver:bob payload:…)
akube -[#blue]> psn:  Pub(topic:bob sender:alice payload:…)
psn -[#blue]> bkube:  Pub(topic:bob sender:alice payload:…)
bkube -> bob:         Message(from:alice to:bob payload:…)
end

...eventually...
== Alice leaves smoothly ==
alice -> akube:       Join(s:s0 p:alice).close()
akube -[#red]> psn:   Unsub(topic:s0)
akube -[#red]> psn:   Unsub(topic:akube)
akube -[#blue]> psn:  Pub(topic:s0 peerLeft:alice)
psn -[#blue]> bkube:  Pub(topic:s0 peerLeft:alice)
alice -> akube:       Subscribe(p:alice).close()
akube -[#red]> psn:   Unsub(topic:alice)
deactivate akube
...eventually...
== Bob leaves unexpectedly ==
bob X-X bkube:        <i>disconnect</i>
bkube -> bkube:       <i>timeout waiting for return</i>
bkube -[#red]> psn:   Unsub(topic:bob)
bkube -[#blue]> psn:  Pub(topic:s0 peerLeft:bob)
bkube -[#red]> psn:   Unsub(topic:s0)
bkube -[#red]> psn:   Unsub(topic:bkube)
deactivate bkube

@enduml

@startuml



skinparam backgroundColor transparent
skinparam useBetaStyle false






<style>
  root {
    BackgroundColor transparent
    FontColor #FFF
    HyperLinkColor #f0ad4e
    LineColor #e58748
    LineThickness 1
    Margin 10
    Padding 6
    Shadowing 0.0
  }
  node {
   Padding 15
   roundcorner 20
   BackgroundColor #DF691A-#e58748
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  groupHeader {
    BackgroundColor #4E5D6C
    FontColor #5bc0de
    FontStyle bold
  }
  header {
    LineThickness 0
  }
  referenceHeader {
    BackgroundColor transparent
    FontColor #4E5D6C
    FontStyle bold
  }
  separator {
    BackgroundColor #FFF
    FontColor transparent
    FontStyle bold
  }
  title {
	FontSize 20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor  #3e4a56-#4E5D6C
	FontColor #DF691A
	BorderColor #4E5D6C
  }
  nwdiagDiagram {
	network {
			FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A    
		LineColor #DF691A
		LineThickness 1.0
		FontColor #b25415
	}
	server {
			FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	}
	arrow {
		FontColor #b25415
		LineColor #b25415
	}
	group {
		BackGroundColor #abb6c2
		LineColor #bcc5ce
		LineThickness 2.0
		Margin 5
		Padding 5
	}
  }
  ganttDiagram {
	task {
			FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
		LineColor #DF691A
		Margin 10
		Padding 6
	}
	note {
		FontColor #FFF
		LineColor #7ccde5
		BackGroundColor #5bc0de
	}
	separator {
		LineColor #4E5D6C
		BackGroundColor #4E5D6C-#717d89
		FontColor #FFF
	}
	milestone {
		FontColor #5bc0de
		FontSize 16
		FontStyle italic
		BackGroundColor #4E5D6C
		LineColor #717d89
	}
	timeline {
		BackgroundColor #4E5D6C
		FontColor #FFF
	}
	closed {
		BackgroundColor #f3bd71
		FontColor #FFF
	}
  }
</style>
skinparam defaultFontName       "Verdana"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           8
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               5
skinparam ArrowColor            #4E5D6C
skinparam stereotype {
    CBackgroundColor #3e4a56
    CBorderColor #717d89
    ABackgroundColor #5F8F00
    ABorderColor #4a934a
    IBackgroundColor #AE423F
    IBorderColor #e17572
    EBackgroundColor #C08A3E
    EBorderColor #f3bd71
    NBackgroundColor #499AB2
    NBorderColor #7ccde5
}
skinparam title {
	FontColor	                 #DF691A
	BorderColor	                 #717d89
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              #3e4a56-#4E5D6C
}

skinparam legend {
	BackgroundColor #4E5D6C
	BorderColor #717d89
	FontColor #abb6c2
}

skinparam swimlane {
	BorderColor #5bc0de
	BorderThickness 2
	TitleBackgroundColor  #3e4a56-#4E5D6C
	TitleFontColor #DF691A
}


skinparam activity {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	BarColor #5cb85c
	StartColor #5bc0de
	EndColor #5bc0de
	DiamondBackgroundColor #3e4a56
  	DiamondBorderColor #717d89
  	DiamondFontColor #FFF
}


skinparam participant {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	BorderThickness 2
}


skinparam actor {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam arrow {
	Thickness 3
	Color #DF691A
	FontColor #FFF
}


skinparam sequence {
	BorderColor #DF691A
	TitleFontColor #DF691A
	BackgroundColor transparent
	StartColor #DF691A
	EndColor #DF691A
	BoxBackgroundColor transparent
	BoxBorderColor #4E5D6C
	BoxFontColor #4E5D6C
	DelayFontColor #4E5D6C
	LifeLineBorderColor #4E5D6C
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #717d89
	GroupBackgroundColor #4E5D6C
	GroupBorderColor #4E5D6C
	GroupFontColor #4E5D6C
	GroupHeaderFontColor #5bc0de
	GroupHeaderBackgroundColor transparent
	DividerBackgroundColor #4E5D6C
    DividerBorderColor #4E5D6C
    DividerBorderThickness 2
    DividerFontColor #abb6c2
	ReferenceBackgroundColor transparent
	ReferenceBorderColor #4E5D6C
	ReferenceFontColor #4E5D6C
	ReferenceHeaderFontColor #5bc0de
	ReferenceHeaderBackgroundColor #4E5D6C
	StereotypeFontColor #FFF
}


skinparam partition {
	BorderColor #DF691A
	FontColor #DF691A
	BackgroundColor transparent
}


skinparam collections {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam control {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam entity {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam boundary {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam agent {
	BackgroundColor #f0ad4e
	BorderColor #C08A3E
	FontColor #4E5D6C
}


skinparam note {
	BorderThickness 1
	BackgroundColor #5bc0de
	BorderColor #7ccde5
	FontColor #FFF
}


skinparam artifact {
	BackgroundColor #4E5D6C
	BorderColor #717d89
	FontColor #abb6c2
}


skinparam component {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam interface {
	BackgroundColor  #e17572
	BorderColor  #d9534f
	FontColor #4E5D6C
}


skinparam storage {
	BackgroundColor #f0ad4e
  	BorderColor #f3bd71
	FontColor #FFF
}


skinparam node {
	BackgroundColor  #4E5D6C
	BorderColor #abb6c2
	FontColor #abb6c2
}


skinparam cloud {
	BackgroundColor #abb6c2-black
	BorderColor #abb6c2
	FontColor #4E5D6C
}


skinparam database {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam class {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	HeaderBackgroundColor #b25415
	StereotypeFontColor #4E5D6C
	BorderThickness 1
	AttributeFontColor #4E5D6C
	AttributeFontSize 11
}


skinparam object {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	StereotypeFontColor #4E5D6C
	BorderThickness 1
	AttributeFontColor #FFF
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	BorderThickness 2
	StereotypeFontColor #DF691A
}


skinparam rectangle {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	BackgroundColor #3e4a56
	BorderThickness 2
	StereotypeFontColor #DF691A
}


skinparam package {
	BackgroundColor #4E5D6C
  	BorderColor #DF691A
	FontColor #DF691A
	BorderThickness 2
}


skinparam folder {
	BackgroundColor #3e4a56
  	BorderColor #f0ad4e
	FontColor #f0ad4e
	BorderThickness 2
}


skinparam frame {
	BackgroundColor #3e4a56
  	BorderColor #5bc0de
	FontColor #5bc0de
	BorderThickness 2
}


skinparam state {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
	StartColor #5bc0de
	EndColor #5bc0de
	AttributeFontColor #FFF
	AttributeFontSize 11
}


skinparam queue {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}


skinparam card {
	BackgroundColor #5bc0de
	BorderColor #7ccde5
	FontColor #FFF
}


skinparam file {
	BackgroundColor #717d89
	BorderColor #abb6c2
	FontColor #abb6c2
}


skinparam stack {
		FontColor #FFF
	BorderColor #e58748
	BackgroundColor #DF691A
}
skinparam backgroundColor black

actor       Alice             as alice
entity      "Alice's kube"    as akube
queue       "Pub/Sub network" as psn
entity      "Bob's kube"      as bkube
actor       Bob               as bob
autonumber

activate psn
== Bob joins ==
bob <-> bkube:        <i>connect</i>
activate bkube
bob -> bkube:         ReceiveMessages(key:bob)
bob -> bkube:         Join(swarm:s0 peer:bob)
bkube -[#green]> psn: Sub(topic:bkube)
bkube -[#green]> psn: Sub(topic:s0)
bkube -[#blue]> psn:  Pub(topic:s0 lookupFor:bkube)
bkube -[#blue]> psn:  Pub(topic:p0 newPeer:bob)
...later on...
== Alice joins ==
alice <-> akube:<i>connect</i>
activate akube
alice -> akube:       ReceiveMessages(key:alice)
alice -> akube:       Join(swarm:0 peer:alice)
akube -[#green]> psn: Sub(topic:akube)
akube -[#green]> psn: Sub(topic:s0)
akube -[#blue]> psn:  Pub(topic:s0 lookupFor:akube)
psn -[#blue]> bkube:  Pub(topic:s0 lookupFor:akube)
bkube -[#blue]> psn:  Pub(topic:akube peer:bob)
psn -[#blue]> akube:  Pub(topic:akube peer:bob)
akube -> alice:       Join(s:s0 p:alice).PeerAvailable(peer:bob)
akube -[#blue]> psn:  Pub(topic:s0 newPeer:alice)
psn   -[#blue]> bkube:Pub(topic:s0 newPeer:alice)
bkube -> bob:         Join(s:s0 p:bob).PeerAvailable(peer:alice)

== Alice messages Bob to connect ==
alice -> akube:       SendMessage(sender:alice receiver:bob payload:…)
akube -[#blue]> psn:  Pub(topic:bob sender:alice payload:…)
psn -[#blue]> bkube:  Pub(topic:bob sender:alice payload:…)
bkube -> bob:         Message(from:alice to:bob payload:…)

group Roundtrips
bob -> bkube:         SendMessage(sender:bob receiver:alice payload:…)
bkube -[#blue]> psn:  Pub(topic:alice sender:bob payload:…)
psn -[#blue]> akube:  Pub(topic:alice sender:bob payload:…)
akube -> alice:       Message(from:bob to:alice payload:…)

alice -> akube:       SendMessage(sender:alice receiver:bob payload:…)
akube -[#blue]> psn:  Pub(topic:bob sender:alice payload:…)
psn -[#blue]> bkube:  Pub(topic:bob sender:alice payload:…)
bkube -> bob:         Message(from:alice to:bob payload:…)
end

...eventually...
== Alice leaves smoothly ==
alice -> akube:       Join(s:s0 p:alice).close()
akube -[#red]> psn:   Unsub(topic:s0)
akube -[#red]> psn:   Unsub(topic:akube)
akube -[#blue]> psn:  Pub(topic:s0 peerLeft:alice)
psn -[#blue]> bkube:  Pub(topic:s0 peerLeft:alice)
alice -> akube:       Subscribe(p:alice).close()
akube -[#red]> psn:   Unsub(topic:alice)
deactivate akube
...eventually...
== Bob leaves unexpectedly ==
bob X-X bkube:        <i>disconnect</i>
bkube -> bkube:       <i>timeout waiting for return</i>
bkube -[#red]> psn:   Unsub(topic:bob)
bkube -[#blue]> psn:  Pub(topic:s0 peerLeft:bob)
bkube -[#red]> psn:   Unsub(topic:s0)
bkube -[#red]> psn:   Unsub(topic:bkube)
deactivate bkube

@enduml

PlantUML version 1.2022.6(Tue Jun 21 19:34:49 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>