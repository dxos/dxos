type: tool
language: typescript
tasks:
  bundle:
    command: storybook build
    args:
      - --output-dir=out/stories
    deps:
      - app-graph:compile
      - devtools:compile
      - react-client:compile
      - react-ui:compile
      - react-ui-editor:compile
      - react-ui-geo:compile
      - react-ui-grid:compile
      - react-ui-searchlist:compile
      - react-ui-stack:compile
      - react-ui-table:compile
      - shell:compile
      - vite-plugin-icons:compile
      - mkdist
    inputs:
      - .storybook/*
      - static/*
      - $NODE_OPTIONS
    outputs:
      - out/stories/
  mkdist:
    command: mkdir -p static
    outputs:
      - static
  serve:
    command: storybook dev
    args:
      - --port=9009
      - --no-open
    deps:
      - ^:compile
      - mkdist
    inputs:
      - .storybook/*
      - static/*
    preset: server
  serve-e2e:
    command: storybook dev
    args:
      - --port=9009
      - --ci
      - --quiet
      - --config-dir=config/e2e
    deps:
      - ^:compile
      - mkdist
    inputs:
      - .storybook/*
      - config/e2e/*
      - static/*
    preset: server
